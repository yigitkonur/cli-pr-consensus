{
  "meta": {
    "version": "1.0.0",
    "generatedAt": "2026-02-03T10:19:08.672Z",
    "prUrl": "https://github.com/yigitkonur/design-system-wope/pull/1",
    "mode": "normal",
    "format": "json"
  },
  "pr": {
    "number": 1,
    "title": "refactor(storybook): comprehensive story enhancement - CSF3, TypeScript, play functions",
    "body": "## Summary\n\nThis PR comprehensively enhances all 319 Storybook story files to follow the \"gold standard\" pattern established by `SdButton.stories.ts`. The refactoring was executed in 10 waves with parallel agent orchestration.\n\n### Key Changes\n\n- **CSF3 Format Migration**: All stories now use `satisfies Meta<typeof Component>` pattern\n- **TypeScript Compliance**: Fixed 55+ TypeScript errors across story files\n- **Import Path Fix**: Updated `@storybook/test` ‚Üí `storybook/test` (Storybook 10 format)\n- **Play Functions**: Added interactive testing to 200+ stories\n- **JSDoc Documentation**: English-only component descriptions on all stories\n- **argTypes Enhancement**: Comprehensive prop documentation with controls\n- **AllThemes Stories**: 6-theme showcase story for every component\n- **Event Actions**: Proper `fn()` handlers for all component events\n\n### Wave Breakdown\n\n| Wave | Category | Files | Focus |\n|------|----------|-------|-------|\n| 1-3 | Inputs, Controls, Feedback, Display Part 1 | 60 | Core components |\n| 4-9 | Display Part 2, Navigation, Overlays, Layout, Utilities, Features | 207 | Complex components |\n| 10 | SdTable, Analytics, Project, Patterns | 52 | Remaining components |\n\n### Verification\n\n- ‚úÖ `npm run build-storybook` - Build succeeds\n- ‚úÖ `npx vue-tsc --noEmit --project tsconfig.storybook.json` - 0 TypeScript errors\n- ‚úÖ ESLint on story files - 0 errors (warnings for `any` types acceptable)\n\n### Files Modified\n\n- 319 story files enhanced\n- 32,871 lines added, 13,165 lines removed (net +19,706 lines)\n\n## Test Plan\n\n- [ ] Run `npm run storybook` and verify stories load correctly\n- [ ] Spot-check play functions execute in Storybook interactions tab\n- [ ] Verify autodocs render with component descriptions\n- [ ] Check AllThemes stories render across all 6 themes\n<!-- devin-review-badge-begin -->\n\n---\n\n<a href=\"https://app.devin.ai/review/yigitkonur/design-system-wope/pull/1\">\n  <picture>\n    <source media=\"(prefers-color-scheme: dark)\" srcset=\"https://static.devin.ai/assets/gh-open-in-devin-review-dark.svg?v=1\">\n    <img src=\"https://static.devin.ai/assets/gh-open-in-devin-review-light.svg?v=1\" alt=\"Open with Devin\">\n  </picture>\n</a>\n<!-- devin-review-badge-end -->\n\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n# Release Notes\n\n* **New Features**\n  * Enhanced Storybook documentation with comprehensive component story variants, interactive tests, and improved examples across all component types.\n  * Added interactive play tests to validate component rendering and behavior in story previews.\n  * Introduced theme showcase stories demonstrating components across multiple design themes.\n  * Expanded component examples with loading states, edge cases, and various configuration scenarios.\n\n* **Documentation**\n  * Improved component descriptions and prop documentation with clearer, more detailed explanations.\n  * Added layout and positioning parameters to better showcase components in Storybook.\n  * Enhanced story organization with descriptive comments and better narrative structure.\n\n* **Improvements**\n  * Standardized story naming conventions (Default, AllThemes, Loading) for consistency.\n  * Added mock data and test fixtures for more realistic component previews.\n  * Improved type safety with explicit Storybook metadata declarations.\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->",
    "state": "OPEN",
    "author": "yigitkonur",
    "createdAt": "2026-02-03T05:45:01Z",
    "updatedAt": "2026-02-03T08:04:31Z",
    "mergedAt": null,
    "baseRef": "main",
    "headRef": "vk/fdac-design-system-st",
    "additions": 32874,
    "deletions": 13165,
    "changedFiles": 320,
    "isDraft": false,
    "reviewDecision": null,
    "mergeState": "CLEAN",
    "labels": [],
    "assignees": []
  },
  "files": [
    {
      "path": ".storybook/mocks/agGridMocks.ts",
      "additions": 3,
      "deletions": 0,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/controls/SdButton/SdButtonChip/SdButtonChip.stories.ts",
      "additions": 40,
      "deletions": 1,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/controls/SdButton/SdButtonGradient/SdButtonGradient.stories.ts",
      "additions": 12,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/controls/SdButton/SdButtonLarge/SdButtonLarge.stories.ts",
      "additions": 54,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/controls/SdButton/SdButtonTag/SdButtonTag.stories.ts",
      "additions": 39,
      "deletions": 2,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/controls/SdButton/SdButtonTextChip/SdButtonTextChip.stories.ts",
      "additions": 34,
      "deletions": 2,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/controls/SdLinkButton/SdLinkButton.stories.ts",
      "additions": 116,
      "deletions": 32,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdBadge/SdBadge.stories.ts",
      "additions": 15,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdBullet/SdBullet.stories.ts",
      "additions": 34,
      "deletions": 1,
      "comments": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFn",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Clickable story needs an `onClick` spy (and likely `clickable`) to make the play assertion valid.**\n\n`args.onClick` is never set, so the play assertion will throw. If SdBullet requires a `clickable` prop to render a button role, `getByRole('button')` will also fail. Please align this story with other Clickable patterns by providing an `onClick: fn()` and enabling clickability.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({\n```\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  args: {\n    active: true,\n    color: BulletColor.Indigo,\n    clickable: true,\n    onClick: fn(),\n  },\n  render: (args: any) => ({\n    components: { SdBullet },\n    setup() {\n      return { args };\n    },\n    template: '<SdBullet v-bind=\"args\" `@click`=\"args.onClick\" />',\n  }),\n  play: async ({ canvasElement, args, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Click bullet and verify handler called', async () => {\n      const bullet = canvas.getByRole('button');\n      await userEvent.click(bullet);\n      await expect(args.onClick).toHaveBeenCalled();\n    });\n```\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts` around lines 103 - 121,\nThe story's play asserts args.onClick but args never provides an onClick spy\n(and the button role may not render without clickability) ‚Äî update the story's\nargs to include a spy and enable clicking (e.g., add onClick as a spy function\nand clickable: true), and keep the render/template wiring (render, template,\nSdBullet, args) unchanged; create the spy using your test helper (jest.fn() or\nStorybook action helper) at top of the story file so play can assert\nargs.onClick was called when userEvent.click hits the button.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Clickable story needs an `onClick` spy (and likely `clickable`) to make the play assertion valid.**\n\n`args.onClick` is never set, so the play assertion will throw. If SdBullet requires a `clickable` prop to render a button role, `getByRole('button')` will also fail. Please align this story with other Clickable patterns by providing an `onClick: fn()` and enabling clickability.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  args: {\n    active: true,\n    color: BulletColor.Indigo,\n    clickable: true,\n    onClick: fn(),\n  },\n  render: (args: any) => ({\n    components: { SdBullet },\n    setup() {\n      return { args };\n    },\n    template: '<SdBullet v-bind=\"args\" `@click`=\"args.onClick\" />',\n  }),\n  play: async ({ canvasElement, args, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Click bullet and verify handler called', async () => {\n      const bullet = canvas.getByRole('button');\n      await userEvent.click(bullet);\n      await expect(args.onClick).toHaveBeenCalled();\n    });\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts` around lines 103 - 121,\nThe story's play asserts args.onClick but args never provides an onClick spy\n(and the button role may not render without clickability) ‚Äî update the story's\nargs to include a spy and enable clicking (e.g., add onClick as a spy function\nand clickable: true), and keep the render/template wiring (render, template,\nSdBullet, args) unchanged; create the spy using your test helper (jest.fn() or\nStorybook action helper) at top of the story file so play can assert\nargs.onClick was called when userEvent.click hits the button.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdBullet/SdBullet.stories.ts",
          "line": 103,
          "diffHunk": "@@ -93,6 +96,32 @@ export const MultiColor: Story = {\n   },\n };\n \n+/**\n+ * Clickable bullet that responds to user interaction\n+ */\n+export const Clickable: Story = {\n+  args: {\n+    active: true,\n+    color: BulletColor.Indigo,\n+  },\n+  render: (args: any) => ({\n+    components: { SdBullet },\n+    setup() {\n+      return { args };\n+    },\n+    template: '<SdBullet v-bind=\"args\" @click=\"args.onClick\" />',\n+  }),\n+  play: async ({ canvasElement, args, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Click bullet and verify handler called', async () => {\n+      const bullet = canvas.getByRole('button');\n+      await userEvent.click(bullet);\n+      await expect(args.onClick).toHaveBeenCalled();\n+    });",
          "isResolved": false,
          "suggestion": "export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({"
        }
      ],
      "commentCount": 1
    },
    {
      "path": "src/components/display/SdChart/SdChart.stories.ts",
      "additions": 127,
      "deletions": 26,
      "comments": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFw",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Play function assertion has incorrect query approach.**\n\nThe `getByText` with a class check callback is semantically incorrect. `getByText` is meant to find elements by their text content, not by CSS class. This assertion may pass accidentally if any text element happens to have ancestors with `.sd-chart`, but it doesn't properly verify the chart rendered.\n\n<details>\n<summary>üêõ Suggested fix using proper query</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, add a `data-testid` attribute to the chart component for more reliable testing.\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Chart wrapper is rendered', async () => {\n      // Query the chart container directly\n      const wrapper = canvasElement.querySelector('.sd-chart');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdChart/SdChart.stories.ts` around lines 199 - 206,\nThe play function currently uses canvas.getByText with a class-check callback\n(canvas.getByText(... element?.classList?.contains('sd-chart'))), which is\nincorrect; update the assertion in the play function to use a semantic or\ntest-id query instead (e.g., within(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Play function assertion has incorrect query approach.**\n\nThe `getByText` with a class check callback is semantically incorrect. `getByText` is meant to find elements by their text content, not by CSS class. This assertion may pass accidentally if any text element happens to have ancestors with `.sd-chart`, but it doesn't properly verify the chart rendered.\n\n\n<details>\n<summary>üêõ Suggested fix using proper query</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, add a `data-testid` attribute to the chart component for more reliable testing.\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Chart wrapper is rendered', async () => {\n      // Query the chart container directly\n      const wrapper = canvasElement.querySelector('.sd-chart');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdChart/SdChart.stories.ts` around lines 199 - 206,\nThe play function currently uses canvas.getByText with a class-check callback\n(canvas.getByText(... element?.classList?.contains('sd-chart'))), which is\nincorrect; update the assertion in the play function to use a semantic or\ntest-id query instead (e.g., within(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n```\n\n</details>\n\n<!-- fingerprinting:phantom:medusa:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdChart/SdChart.stories.ts",
          "line": 199,
          "diffHunk": "@@ -173,18 +196,29 @@ export const Line: Story = {\n       'Dataset 2': 'var(--lime)',\n     },\n   },\n+  play: async ({ canvasElement, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Chart wrapper is rendered', async () => {\n+      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      await expect(wrapper).toBeInTheDocument();\n+    });\n+  },",
          "isResolved": false,
          "suggestion": "play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },"
        }
      ],
      "commentCount": 1
    },
    {
      "path": "src/components/display/SdChart/SdChartTooltip/SdChartTooltip.stories.ts",
      "additions": 114,
      "deletions": 3,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdChart/SdDoughnutChart/SdDoughnutChart.stories.ts",
      "additions": 85,
      "deletions": 15,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdCheckList/SdCheckList.stories.ts",
      "additions": 125,
      "deletions": 24,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdCopy/SdCopy.stories.ts",
      "additions": 60,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdCopyImage/SdCopyImage.stories.ts",
      "additions": 87,
      "deletions": 5,
      "comments": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFx",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**The `imageElement` ref is defined but not wired to the component.**\n\nThe template defines `ref=\"imgEl\"` on the image element, but this ref is never passed to `sd-copy-image` via the `imageElement` prop. This story visually shows an image but doesn't actually demonstrate the copy-image functionality.\n\n<details>\n<summary>üêõ Proposed fix to wire up the image reference</summary>\n\n```diff\n export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };\n```\n\nYou'll also need to import `ref` from Vue at the top of the file:\n\n```typescript\nimport { ref } from 'vue';\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts` around lines 102 -\n119, The story's template sets ref=\"imgEl\" on the <img> but never passes that\nreference to the SdCopyImage component, so the copy behavior isn't demonstrated;\nupdate the WithImagePreview render setup to create a Vue ref (import ref from\n'vue'), assign it to the image element (e.g., imgEl), and pass it into the\nSdCopyImage via the imageElement prop (or imageElement: imgEl) and ensure the\n`@copy` handler still uses args.onCopy; modify the render function in the\nWithImagePreview story and add the ref import.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**The `imageElement` ref is defined but not wired to the component.**\n\nThe template defines `ref=\"imgEl\"` on the image element, but this ref is never passed to `sd-copy-image` via the `imageElement` prop. This story visually shows an image but doesn't actually demonstrate the copy-image functionality.\n\n\n\n<details>\n<summary>üêõ Proposed fix to wire up the image reference</summary>\n\n```diff\n export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };\n```\n\nYou'll also need to import `ref` from Vue at the top of the file:\n\n```typescript\nimport { ref } from 'vue';\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts` around lines 102 -\n119, The story's template sets ref=\"imgEl\" on the <img> but never passes that\nreference to the SdCopyImage component, so the copy behavior isn't demonstrated;\nupdate the WithImagePreview render setup to create a Vue ref (import ref from\n'vue'), assign it to the image element (e.g., imgEl), and pass it into the\nSdCopyImage via the imageElement prop (or imageElement: imgEl) and ensure the\n`@copy` handler still uses args.onCopy; modify the render function in the\nWithImagePreview story and add the ref import.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdCopyImage/SdCopyImage.stories.ts",
          "line": 102,
          "diffHunk": "@@ -31,15 +45,84 @@ const meta = {\n export default meta;\n type Story = StoryObj<typeof meta>;\n \n+/**\n+ * Default copy image button\n+ */\n export const Default: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n     setup() { return { args }; },\n     template: '<sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">Copy Image</sd-copy-image>',\n   }),\n+  play: async ({ canvasElement, args, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Click the copy image button', async () => {\n+      const button = canvas.getByRole('button');\n+      await userEvent.click(button);\n+      await expect(args.onCopy).toHaveBeenCalled();\n+    });\n+  },\n };\n \n+/**\n+ * Copy image button rendered as a custom HTML element\n+ */\n+export const WithCustomElement: Story = {\n+  args: {\n+    as: 'span',\n+  },\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: '<sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\" style=\"cursor: pointer; text-decoration: underline;\">Copy as span</sd-copy-image>',\n+  }),\n+};\n+\n+/**\n+ * Copy image button with scoped slot showing copied state\n+ */\n+export const ScopedSlot: Story = {\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: `\n+      <sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">\n+        <template #default=\"{ copied }\">\n+          {{ copied ? 'Image Copied!' : 'Click to copy image' }}\n+        </template>\n+      </sd-copy-image>\n+    `,\n+  }),\n+};\n+\n+/**\n+ * Copy image with an inline image element reference\n+ */\n+export const WithImagePreview: Story = {\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: `\n+      <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n+        <img\n+          ref=\"imgEl\"\n+          src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n+          alt=\"Sample image\"\n+          crossorigin=\"anonymous\"\n+          style=\"border-radius: 8px;\"\n+        />\n+        <sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">Copy This Image</sd-copy-image>\n+      </div>\n+    `,\n+  }),\n+};",
          "isResolved": false,
          "suggestion": "export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };"
        }
      ],
      "commentCount": 1
    },
    {
      "path": "src/components/display/SdDemo/SdDemo.stories.ts",
      "additions": 67,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdDemo/SdDemoItem/SdDemoItem.stories.ts",
      "additions": 103,
      "deletions": 8,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdEmoji/SdEmoji.stories.ts",
      "additions": 21,
      "deletions": 7,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdFeaturedBox/SdFeaturedBox.stories.ts",
      "additions": 183,
      "deletions": 96,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdFeaturedSnippet/SdFeaturedSnippet.stories.ts",
      "additions": 214,
      "deletions": 33,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdFlag/SdFlag.stories.ts",
      "additions": 24,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdGalleryBox/SdGalleryBox.stories.ts",
      "additions": 146,
      "deletions": 64,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdGalleryBoxList/SdGalleryBoxList.stories.ts",
      "additions": 91,
      "deletions": 397,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdGhostBox/SdGhostBox.stories.ts",
      "additions": 52,
      "deletions": 2,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdIcon/SdIcon.stories.ts",
      "additions": 29,
      "deletions": 10,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdLegendBox/SdLegendBox.stories.ts",
      "additions": 200,
      "deletions": 41,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdLegendItem/SdLegendItem.stories.ts",
      "additions": 156,
      "deletions": 30,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdLinkIcon/SdLinkIcon.stories.ts",
      "additions": 124,
      "deletions": 17,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdListGroup/SdListGroup.stories.ts",
      "additions": 89,
      "deletions": 80,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdListLg/SdListLg.stories.ts",
      "additions": 102,
      "deletions": 121,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdLogo/SdLogo.stories.ts",
      "additions": 22,
      "deletions": 13,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdMetaData/SdMetaData.stories.ts",
      "additions": 145,
      "deletions": 117,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdMetricBox/SdMetricBox.stories.ts",
      "additions": 143,
      "deletions": 75,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdPie/SdPie.stories.ts",
      "additions": 144,
      "deletions": 47,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdPositionTrends/SdPositionTrends.stories.ts",
      "additions": 154,
      "deletions": 120,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdPricingBox/SdPricingBox.stories.ts",
      "additions": 155,
      "deletions": 94,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdPricingBox/SdPricingBoxCounter/SdPricingBoxCounter.stories.ts",
      "additions": 182,
      "deletions": 35,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdPricingBoxAlternative/SdPricingBoxAlternative.stories.ts",
      "additions": 106,
      "deletions": 77,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdProcessBox/SdProcessBox.stories.ts",
      "additions": 151,
      "deletions": 56,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdSearchResult/SdSearchResult.stories.ts",
      "additions": 161,
      "deletions": 20,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdSeasonality/SdSeasonality.stories.ts",
      "additions": 134,
      "deletions": 19,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdSerpList/SdSerpList.stories.ts",
      "additions": 73,
      "deletions": 67,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdSerpList/SdSerpListItem/SdSerpListItem.stories.ts",
      "additions": 152,
      "deletions": 14,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/AuthorityCellRenderer/AuthorityCellRenderer.stories.ts",
      "additions": 97,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/BadgeCellRenderer/BadgeCellRenderer.stories.ts",
      "additions": 94,
      "deletions": 4,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/ChangeCellRenderer/ChangeCellRenderer.stories.ts",
      "additions": 138,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts",
      "additions": 127,
      "deletions": 18,
      "comments": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFz",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_üõ†Ô∏è Refactor suggestion_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\n# First, let's view the actual file to confirm the code structure\ncat -n src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts | head -80\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 3072\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the MockGridParams interface definition\nfd -e ts -e tsx | xargs rg -l \"MockGridParams\" | head -5\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 574\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Run the verification script to check how many cell renderer stories use this pattern\nrg -c 'createMockGridParams\\(.*as any\\)' src/components/display/SdTable/CellRenderers/\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check all instances of 'as any' used with createMockGridParams in this specific file\nrg -n 'createMockGridParams.*as any' src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for 'as any' in cell renderer stories\nrg 'as any' src/components/display/SdTable/CellRenderers/ -t ts --glob=\"*.stories.ts\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1652\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find MockGridParams interface definition\nrg -n \"interface MockGridParams|type MockGridParams\" --glob=\"*.ts\" --glob=\"*.tsx\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check the agGridMocks file mentioned in the import\nfd agGridMocks -e ts -e tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file content\ncat src/storybook-mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also check if there's a type definition file\nfd agGridMocks -e d.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the agGridMocks file\nfd agGridMocks\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also search for the file by content\nrg -l \"createMockGridParams\" --type ts --type tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 100\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for the definition of createMockGridParams\nrg \"export.*createMockGridParams|function createMockGridParams\" --type ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check tsconfig for path aliases\ncat tsconfig.json | head -50\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1409\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find all mocks directories\nfd -t d \"mocks|mock\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file at the correct location\ncat ./.storybook/mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 7967\n\n---\n\n</details>\n\n**Use specialized factory functions instead of `as any` workarounds.**\n\nThe `as any` assertions bypass TypeScript type safety for custom renderer-specific properties like `useTitle`, `getRowData`, `gridOptions`, and `ghostRowData`. This pattern is used across multiple cell renderer stories (at least 14 instances), indicating a systemic issue.\n\nThe `agGridMocks.ts` module already provides specialized factory functions for this purpose‚Äîfor example, `createChildTableCellParams()` is designed exactly for this renderer. Use the appropriate specialized function instead of `createMockGridParams()` with `as any` to maintain type safety and avoid potential property typos.\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`\naround lines 64 - 71, The story is using createMockGridParams(...) with an as\nany override which bypasses TypeScript checks for renderer-specific props\n(useTitle, getRowData, getGhostRowData, gridOptions, ghostRowData); replace that\ncall with the specialized factory createChildTableCellParams(...) from\nagGridMocks and pass the same properties (useTitle, getRowData,\ngetGhostRowData/ghostRowData, gridOptions) so types are enforced; update the\nimport to pull createChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n```\n\n</details>",
          "rawBody": "_üõ†Ô∏è Refactor suggestion_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\n# First, let's view the actual file to confirm the code structure\ncat -n src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts | head -80\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 3072\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the MockGridParams interface definition\nfd -e ts -e tsx | xargs rg -l \"MockGridParams\" | head -5\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 574\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Run the verification script to check how many cell renderer stories use this pattern\nrg -c 'createMockGridParams\\(.*as any\\)' src/components/display/SdTable/CellRenderers/\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check all instances of 'as any' used with createMockGridParams in this specific file\nrg -n 'createMockGridParams.*as any' src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for 'as any' in cell renderer stories\nrg 'as any' src/components/display/SdTable/CellRenderers/ -t ts --glob=\"*.stories.ts\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1652\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find MockGridParams interface definition\nrg -n \"interface MockGridParams|type MockGridParams\" --glob=\"*.ts\" --glob=\"*.tsx\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check the agGridMocks file mentioned in the import\nfd agGridMocks -e ts -e tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file content\ncat src/storybook-mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also check if there's a type definition file\nfd agGridMocks -e d.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the agGridMocks file\nfd agGridMocks\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also search for the file by content\nrg -l \"createMockGridParams\" --type ts --type tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 100\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for the definition of createMockGridParams\nrg \"export.*createMockGridParams|function createMockGridParams\" --type ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check tsconfig for path aliases\ncat tsconfig.json | head -50\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1409\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find all mocks directories\nfd -t d \"mocks|mock\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file at the correct location\ncat ./.storybook/mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 7967\n\n---\n\n\n\n</details>\n\n**Use specialized factory functions instead of `as any` workarounds.**\n\nThe `as any` assertions bypass TypeScript type safety for custom renderer-specific properties like `useTitle`, `getRowData`, `gridOptions`, and `ghostRowData`. This pattern is used across multiple cell renderer stories (at least 14 instances), indicating a systemic issue.\n\nThe `agGridMocks.ts` module already provides specialized factory functions for this purpose‚Äîfor example, `createChildTableCellParams()` is designed exactly for this renderer. Use the appropriate specialized function instead of `createMockGridParams()` with `as any` to maintain type safety and avoid potential property typos.\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`\naround lines 64 - 71, The story is using createMockGridParams(...) with an as\nany override which bypasses TypeScript checks for renderer-specific props\n(useTitle, getRowData, getGhostRowData, gridOptions, ghostRowData); replace that\ncall with the specialized factory createChildTableCellParams(...) from\nagGridMocks and pass the same properties (useTitle, getRowData,\ngetGhostRowData/ghostRowData, gridOptions) so types are enforced; update the\nimport to pull createChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts",
          "line": 64,
          "diffHunk": "@@ -26,41 +31,145 @@ const meta = {\n export default meta;\n type Story = StoryObj<typeof meta>;\n \n+const sampleColumnDefs = [\n+  { field: 'keyword', headerName: 'Keyword' },\n+  { field: 'volume', headerName: 'Volume' },\n+  { field: 'visibility', headerName: 'Visibility' },\n+  { field: 'traffic', headerName: 'Traffic' },\n+  { field: 'position', headerName: 'Position' },\n+];\n+\n const sampleRowData = [\n   {\n     keyword: 'seo software tool',\n     volume: { value: 123400 },\n     visibility: { value: 0.23, change: { prev: 0.1, diff: 0.13 } },\n     traffic: { value: 56700, change: { prev: 56500, diff: 200 } },\n     position: { value: 23, change: { prev: 33, diff: 10 } },\n-    visualRank: { value: 2, change: { prev: 1, diff: 1 } },\n-    pixelRank: { value: 120, change: { prev: 250, diff: 130 } },\n-    adsValue: { value: 1200, change: { prev: 1000, diff: 200 } },\n+  },\n+  {\n+    keyword: 'keyword tracking',\n+    volume: { value: 45000 },\n+    visibility: { value: 0.45, change: { prev: 0.4, diff: 0.05 } },\n+    traffic: { value: 12300, change: { prev: 11000, diff: 1300 } },\n+    position: { value: 5, change: { prev: 8, diff: 3 } },\n   },\n ];\n \n-const sampleColumnDefs = [\n-  { field: 'keyword', headerName: 'Keyword' },\n-  { field: 'volume', headerName: 'Volume' },\n-  { field: 'visibility', headerName: 'Visibility' },\n-  { field: 'traffic', headerName: 'Traffic' },\n-  { field: 'position', headerName: 'Position' },\n-];\n+/**\n+ * Default child table with sample keyword data\n+ */\n+export const Default: Story = {\n+  args: {\n+    params: createMockGridParams({\n+      columnDefs: sampleColumnDefs,\n+      useTitle: () => 'Keyword Breakdown',\n+      getRowData: () => sampleRowData,\n+      getGhostRowData: () => [],\n+      gridOptions: {},\n+      ghostRowData: [],\n+    } as any),",
          "isResolved": false
        }
      ],
      "commentCount": 1
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/CompetitionLevelCellRenderer/CompetitionLevelCellRenderer.stories.ts",
      "additions": 97,
      "deletions": 7,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts",
      "additions": 73,
      "deletions": 3,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/DateAndTypeCellRenderer/DateAndTypeCellRenderer.stories.ts",
      "additions": 132,
      "deletions": 7,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/DateCellRenderer/DateCellRenderer.stories.ts",
      "additions": 71,
      "deletions": 4,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/DeviceCellRenderer/DeviceCellRenderer.stories.ts",
      "additions": 108,
      "deletions": 3,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/DomainCellRenderer/DomainCellRenderer.stories.ts",
      "additions": 104,
      "deletions": 55,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/EventCellRenderer/EventCellRenderer.stories.ts",
      "additions": 74,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/InsightsCellRenderer/InsightsCellRenderer.stories.ts",
      "additions": 127,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/KeywordCellRenderer/KeywordCellRenderer.stories.ts",
      "additions": 77,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/KeywordDifficultyCellRenderer/KeywordDifficultyCellRenderer.stories.ts",
      "additions": 91,
      "deletions": 10,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts",
      "additions": 75,
      "deletions": 11,
      "comments": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgF1",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Rename the `Error` story to avoid shadowing the global `Error`.**\n\nBiome flags this as a lint error (`noShadowRestrictedNames`). It can break lint CI. Rename the export (and update any doc references if needed).\n\n<details>\n<summary>‚úÖ Proposed fix</summary>\n\n```diff\n-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };\n```\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n/**\n * Keyword in error state with X-mark circle icon and error gradient\n */\nexport const ErrorState: Story = {\n  args: {\n```\n\n</details>\n\n<details>\n<summary>üß∞ Tools</summary>\n\n<details>\n<summary>ü™õ Biome (2.3.13)</summary>\n\n[error] 75-75: Do not shadow the global \"Error\" property.\n\nConsider renaming this variable. It's easy to confuse the origin of variables when they're named after a known global.\n\n(lint/suspicious/noShadowRestrictedNames)\n\n</details>\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`\naround lines 72 - 76, The exported story named Error shadows the global Error\nand triggers the noShadowRestrictedNames lint rule; rename the export (for\nexample change export const Error to export const ErrorState or KeywordError)\nand update any places that import or reference this story (docs, storybook\nconfigs, tests) to use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Rename the `Error` story to avoid shadowing the global `Error`.**\n\nBiome flags this as a lint error (`noShadowRestrictedNames`). It can break lint CI. Rename the export (and update any doc references if needed).\n\n<details>\n<summary>‚úÖ Proposed fix</summary>\n\n```diff\n-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n/**\n * Keyword in error state with X-mark circle icon and error gradient\n */\nexport const ErrorState: Story = {\n  args: {\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>üß∞ Tools</summary>\n\n<details>\n<summary>ü™õ Biome (2.3.13)</summary>\n\n[error] 75-75: Do not shadow the global \"Error\" property.\n\nConsider renaming this variable. It's easy to confuse the origin of variables when they're named after a known global.\n\n(lint/suspicious/noShadowRestrictedNames)\n\n</details>\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`\naround lines 72 - 76, The exported story named Error shadows the global Error\nand triggers the noShadowRestrictedNames lint rule; rename the export (for\nexample change export const Error to export const ErrorState or KeywordError)\nand update any places that import or reference this story (docs, storybook\nconfigs, tests) to use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts",
          "line": 72,
          "diffHunk": "@@ -65,20 +70,79 @@ export const InProgress: Story = {\n };\n \n /**\n- * Keyword in error state.\n+ * Keyword in error state with X-mark circle icon and error gradient\n  */\n export const Error: Story = {\n   args: {",
          "isResolved": false,
          "suggestion": "-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };"
        }
      ],
      "commentCount": 1
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/LabDataCellRenderer/LabDataCellRenderer.stories.ts",
      "additions": 120,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/LanguageCellRenderer/LanguageCellRenderer.stories.ts",
      "additions": 79,
      "deletions": 17,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/LinkRelationCellRenderer/LinkRelationCellRenderer.stories.ts",
      "additions": 63,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/LocationCellRenderer/LocationCellRenderer.stories.ts",
      "additions": 74,
      "deletions": 17,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/MetricBarCellRenderer/MetricBarCellRenderer.stories.ts",
      "additions": 106,
      "deletions": 33,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/OpportunityCellRenderer/OpportunityCellRenderer.stories.ts",
      "additions": 115,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PageCellRenderer/PageCellRenderer.stories.ts",
      "additions": 103,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/CannibalizationContent/CannibalizationContent.stories.ts",
      "additions": 102,
      "deletions": 27,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/ChangeContent/ChangeContent.stories.ts",
      "additions": 87,
      "deletions": 9,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/CompetitorsContent/CompetitorsContent.stories.ts",
      "additions": 73,
      "deletions": 39,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/IssueContent/IssueContent.stories.ts",
      "additions": 59,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/ListContent/ListContent.stories.ts",
      "additions": 65,
      "deletions": 15,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/LocalizedContent/LocalizedContent.stories.ts",
      "additions": 75,
      "deletions": 21,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/RankContent/RankContent.stories.ts",
      "additions": 57,
      "deletions": 7,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/SeasonContent/SeasonContent.stories.ts",
      "additions": 51,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/SerpFeatureDetails/SerpFeatureDetails.stories.ts",
      "additions": 75,
      "deletions": 31,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PopoverContents/TypoContent/TypoContent.stories.ts",
      "additions": 52,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts",
      "additions": 93,
      "deletions": 3,
      "comments": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgF8",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\nfind . -name \"PositionTrendCellRenderer.stories.ts\" -type f\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 182\n\n---\n\nüèÅ Script executed:\n\n```shell\ncat -n ./src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 8700\n\n---\n\nüåê Web query:\n\n`Testing Library getByRole throws error when element not found`\n\nüí° Result:\n\n`getByRole` **is supposed to throw** when it can‚Äôt find a match (or when it finds more than one match). That‚Äôs how all `getBy*` queries behave in Testing Library. Use a different query depending on what you‚Äôre testing: ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### What to use instead\n\n- **Asserting it is *not* present** (no throw):\n  ```js\n  expect(screen.queryByRole('button', { name: /save/i })).not.toBeInTheDocument()\n  ```\n  `queryBy*` returns `null` when not found. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n- **Element appears asynchronously** (wait + throw if it never appears):\n  ```js\n  const btn = await screen.findByRole('button', { name: /save/i })\n  ```\n  `findBy*` retries until timeout, then rejects. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### Common ‚Äúfound in DOM but not by role‚Äù gotchas\n\n- The element might be **hidden/inaccessible**, so `getByRole` won‚Äôt match unless you include hidden elements:\n  ```js\n  screen.getByRole('button', { name: /save/i, hidden: true })\n  ```\n  ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\n- The **role or accessible name** might not be what you think (Testing Library uses the accessibility tree). When `getByRole` throws, read the ‚ÄúHere are the available roles‚Äù section in the error to see what it *can* access. ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\nCitations:\n\n- 1: https://testing-library.com/docs/queries/about?utm_source=openai\n- 2: https://testing-library.com/docs/queries/about?utm_source=openai\n- 3: https://testing-library.com/docs/queries/about?utm_source=openai\n- 4: https://testing-library.com/docs/queries/byrole?utm_source=openai\n- 5: https://testing-library.com/docs/queries/byrole?utm_source=openai\n\n---\n\n</details>\n\n**Use `queryByRole` with proper fallback logic to prevent test failure when the element lacks `role=\"img\"`.**\n\nWhen `getByRole` doesn't find a match, it throws an error immediately‚Äîthe OR operator never evaluates the fallback selector. Use `queryByRole` (which returns `null` instead of throwing) or `findByRole` with proper fallback handling.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\nawait step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`\nat line 2, The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\nfind . -name \"PositionTrendCellRenderer.stories.ts\" -type f\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 182\n\n---\n\nüèÅ Script executed:\n\n```shell\ncat -n ./src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 8700\n\n---\n\nüåê Web query:\n\n`Testing Library getByRole throws error when element not found`\n\nüí° Result:\n\n`getByRole` **is supposed to throw** when it can‚Äôt find a match (or when it finds more than one match). That‚Äôs how all `getBy*` queries behave in Testing Library. Use a different query depending on what you‚Äôre testing: ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### What to use instead\n\n- **Asserting it is *not* present** (no throw):\n  ```js\n  expect(screen.queryByRole('button', { name: /save/i })).not.toBeInTheDocument()\n  ```\n  `queryBy*` returns `null` when not found. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n- **Element appears asynchronously** (wait + throw if it never appears):\n  ```js\n  const btn = await screen.findByRole('button', { name: /save/i })\n  ```\n  `findBy*` retries until timeout, then rejects. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### Common ‚Äúfound in DOM but not by role‚Äù gotchas\n\n- The element might be **hidden/inaccessible**, so `getByRole` won‚Äôt match unless you include hidden elements:\n  ```js\n  screen.getByRole('button', { name: /save/i, hidden: true })\n  ```\n  ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\n- The **role or accessible name** might not be what you think (Testing Library uses the accessibility tree). When `getByRole` throws, read the ‚ÄúHere are the available roles‚Äù section in the error to see what it *can* access. ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\nCitations:\n\n- 1: https://testing-library.com/docs/queries/about?utm_source=openai\n- 2: https://testing-library.com/docs/queries/about?utm_source=openai\n- 3: https://testing-library.com/docs/queries/about?utm_source=openai\n- 4: https://testing-library.com/docs/queries/byrole?utm_source=openai\n- 5: https://testing-library.com/docs/queries/byrole?utm_source=openai\n\n---\n\n\n\n</details>\n\n**Use `queryByRole` with proper fallback logic to prevent test failure when the element lacks `role=\"img\"`.**\n\nWhen `getByRole` doesn't find a match, it throws an error immediately‚Äîthe OR operator never evaluates the fallback selector. Use `queryByRole` (which returns `null` instead of throwing) or `findByRole` with proper fallback handling.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\nawait step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`\nat line 2, The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:44Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts",
          "line": 2,
          "diffHunk": "@@ -1,30 +1,36 @@\n import type { Meta, StoryObj } from '@storybook/vue3-vite';\n+import { expect, within } from 'storybook/test';",
          "isResolved": false,
          "suggestion": "await step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});"
        }
      ],
      "commentCount": 1
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/ScoreCellRenderer/ScoreCellRenderer.stories.ts",
      "additions": 101,
      "deletions": 7,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/SearchIntentCellRenderer/SearchIntentCellRenderer.stories.ts",
      "additions": 82,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/SearchResultCellRenderer/SearchResultCellRenderer.stories.ts",
      "additions": 111,
      "deletions": 48,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/SearchResultChangeCellRenderer/SearchResultChangeCellRenderer.stories.ts",
      "additions": 124,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/SearchResultStatusCellRenderer/SearchResultStatusCellRenderer.stories.ts",
      "additions": 102,
      "deletions": 7,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/SerpChangeCellRenderer/SerpChangeCellRenderer.stories.ts",
      "additions": 101,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/SerpFeaturesCellRenderer/SerpFeaturesCellRenderer.stories.ts",
      "additions": 65,
      "deletions": 7,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/TagCellRenderer/TagCellRenderer.stories.ts",
      "additions": 67,
      "deletions": 3,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/TagsCellRenderer/TagsCellRenderer.stories.ts",
      "additions": 69,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/TopKeywordsCellRenderer/TopKeywordsCellRenderer.stories.ts",
      "additions": 112,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/TypeCellRenderer/TypeCellRenderer.stories.ts",
      "additions": 70,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/ValueHintCellRenderer/ValueHintCellRenderer.stories.ts",
      "additions": 163,
      "deletions": 5,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/VolumeBestCellRenderer/VolumeBestCellRenderer.stories.ts",
      "additions": 91,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/VolumeDetailCellRenderer/VolumeDetailCellRenderer.stories.ts",
      "additions": 115,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/CellRenderers/VolumeTrendCellRenderer/VolumeTrendCellRenderer.stories.ts",
      "additions": 140,
      "deletions": 102,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/ColumnHeaders/BaseColumnHeader/BaseColumnHeader.stories.ts",
      "additions": 121,
      "deletions": 36,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/ColumnHeaders/CompetitorColumnHeader/CompetitorColumnHeader.stories.ts",
      "additions": 110,
      "deletions": 25,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/ColumnHeaders/DefaultColumnHeader/DefaultColumnHeader.stories.ts",
      "additions": 118,
      "deletions": 26,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/ColumnHeaders/DomainColumnHeader/DomainColumnHeader.stories.ts",
      "additions": 102,
      "deletions": 30,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/ColumnHeaders/SortColumnHeader/SortColumnHeader.stories.ts",
      "additions": 122,
      "deletions": 28,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/SdTableAddKeyword.stories.ts",
      "additions": 21,
      "deletions": 4,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/SdTableAnalysis.stories.ts",
      "additions": 36,
      "deletions": 11,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/SdTableGoogleIntegrations.stories.ts",
      "additions": 16,
      "deletions": 1,
      "comments": [],
      "commentCount": 0
    },
    {
      "path": "src/components/display/SdTable/SdTableMarket.stories.ts",
      "additions": 26,
      "deletions": 6,
      "comments": [],
      "commentCount": 0
    }
  ],
  "comments": {
    "general": [
      {
        "id": "IC_kwDOQ5kgRs7k2mWV",
        "agent": "coderabbit",
        "author": "coderabbitai",
        "body": "**[TIP]** For best results, initiate chat on the files or code changes.\n\n`@yigitkonur`, hello! I'm here to help. \n\nI can see this is a comprehensive Storybook enhancement PR with 319 story files refactored. How can I assist you? I can:\n\n- **Review the changes** in detail and provide feedback\n- **Answer questions** about the refactoring or any specific files\n- **Help verify** the changes against the test plan\n- **Search for specific patterns** or issues in the codebase\n- **Generate statistics** or insights about the changes\n- Or anything else you need!\n\nJust let me know what you'd like me to do.",
        "rawBody": "<!-- This is an auto-generated reply by CodeRabbit -->\n> [!TIP]\n> For best results, initiate chat on the files or code changes.\n\n`@yigitkonur`, hello! I'm here to help. \n\nI can see this is a comprehensive Storybook enhancement PR with 319 story files refactored. How can I assist you? I can:\n\n- **Review the changes** in detail and provide feedback\n- **Answer questions** about the refactoring or any specific files\n- **Help verify** the changes against the test plan\n- **Search for specific patterns** or issues in the codebase\n- **Generate statistics** or insights about the changes\n- Or anything else you need!\n\nJust let me know what you'd like me to do.",
        "createdAt": "2026-02-03T07:11:33Z",
        "type": "comment",
        "issue": "[TIP]"
      },
      {
        "id": "IC_kwDOQ5kgRs7k2v5O",
        "agent": "generic",
        "author": "yigitkonur",
        "body": "@coderabbitai full review",
        "rawBody": "@coderabbitai full review",
        "createdAt": "2026-02-03T07:22:03Z",
        "type": "comment"
      },
      {
        "id": "IC_kwDOQ5kgRs7k2v-5",
        "agent": "coderabbit",
        "author": "coderabbitai",
        "body": "<details>\n<summary>‚úÖ Actions performed</summary>\n\nFull review triggered.\n\n</details>",
        "rawBody": "<!-- This is an auto-generated reply by CodeRabbit -->\n<details>\n<summary>‚úÖ Actions performed</summary>\n\nFull review triggered.\n\n</details>",
        "createdAt": "2026-02-03T07:22:09Z",
        "type": "comment"
      },
      {
        "id": "IC_kwDOQ5kgRs7k3Yqq",
        "agent": "greptile",
        "author": "greptile-apps",
        "body": "<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR successfully refactors all 319 Storybook story files to follow a consistent \"gold standard\" pattern with CSF3 format, TypeScript compliance, and enhanced documentation. The refactoring was executed systematically across 10 waves covering the entire component library.\n\n**Key Accomplishments:**\n- Migrated all stories to CSF3 format with `satisfies Meta<typeof Component>` pattern for full type safety\n- Fixed import paths from `@storybook/test` to `storybook/test` (Storybook 10 format) across all 320+ files\n- Added interactive play functions to 200+ stories for testing component behavior\n- Enhanced argTypes with comprehensive prop documentation and proper event handlers using `fn()`\n- Added AllThemes story variants to every component for visual theme testing\n- Created centralized ag-grid mocking utilities in `.storybook/mocks/agGridMocks.ts` with factory functions\n\n**Implementation Quality:**\nThe refactoring demonstrates consistent execution with proper TypeScript patterns, though intentionally uses `any` type for story args (acceptable per PR description). The ag-grid mock enhancements provide minimal viable mocks for isolated component testing without breaking existing functionality.\n\n**No Breaking Changes:**\n- All changes are purely documentation and testing enhancements\n- Build verification passed (`npm run build-storybook`)\n- TypeScript compilation successful with 0 errors\n- No runtime breaking issues identified in play functions\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge - it's a pure documentation and testing enhancement with no runtime breaking changes\n- Perfect score because: (1) All changes are non-functional improvements to Storybook stories, (2) Build and TypeScript verification passed with 0 errors, (3) Import path migration executed consistently across all files, (4) No actual component logic modified, (5) Comprehensive systematic approach with proper testing patterns\n- No files require special attention - all changes follow consistent pattern\n\n<details><summary><h3>Important Files Changed</h3></summary>\n\n| Filename | Overview |\n|----------|----------|\n| .storybook/mocks/agGridMocks.ts | Added 3 new optional properties to MockGridParams interface (metricName, noHint, hideChangeIcon) for supporting additional cell renderer requirements |\n| src/components/controls/SdButton/SdButtonChip/SdButtonChip.stories.ts | Enhanced with CSF3 format, added play functions, improved JSDoc comments, and added event handler documentation following gold standard pattern |\n| src/components/inputs/SdInput/SdInput.stories.ts | Migrated to CSF3, added interactive play tests, enhanced argTypes documentation, and added AllThemes story variant with proper event handlers |\n| src/components/display/SdTable/CellRenderers/DomainCellRenderer/DomainCellRenderer.stories.ts | Updated to use createMockGridParams helper, added comprehensive play tests, and enhanced documentation for ag-grid cell renderer |\n| src/components/display/SdIcon/SdIcon.stories.ts | Added play tests with DOM verification, enhanced documentation, maintained AllIcons and AllGradients showcase stories |\n\n</details>\n\n</details>\n\n<h3>Sequence Diagram</h3>\n\n```mermaid\nsequenceDiagram\n    participant Dev as Developer\n    participant SB as Storybook\n    participant Story as Story File\n    participant Mock as agGridMocks\n    participant Comp as Component\n    participant Test as Play Function\n    \n    Dev->>Story: Open component story\n    Story->>SB: Load with CSF3 meta config\n    SB->>Story: Parse satisfies Meta<typeof Component>\n    \n    alt For ag-grid components\n        Story->>Mock: createMockGridParams()\n        Mock->>Story: Return mock params\n    end\n    \n    Story->>Comp: Render with args\n    Comp->>SB: Display in canvas\n    \n    alt Story has play function\n        SB->>Test: Execute play()\n        Test->>SB: Query with within(canvasElement)\n        Test->>Comp: userEvent.click() / type()\n        Comp->>Test: Fire events\n        Test->>Test: expect(fn()).toHaveBeenCalled()\n        Test->>SB: Report test results\n    end\n    \n    alt AllThemes story\n        Story->>Story: Loop themes array\n        loop For each theme\n            Story->>Comp: Render with theme class\n            Comp->>SB: Display themed variant\n        end\n    end\n    \n    SB->>Dev: Show interactive documentation\n```",
        "rawBody": "<h2>Greptile Overview</h2>\n\n<h3>Greptile Summary</h3>\n\nThis PR successfully refactors all 319 Storybook story files to follow a consistent \"gold standard\" pattern with CSF3 format, TypeScript compliance, and enhanced documentation. The refactoring was executed systematically across 10 waves covering the entire component library.\n\n**Key Accomplishments:**\n- Migrated all stories to CSF3 format with `satisfies Meta<typeof Component>` pattern for full type safety\n- Fixed import paths from `@storybook/test` to `storybook/test` (Storybook 10 format) across all 320+ files\n- Added interactive play functions to 200+ stories for testing component behavior\n- Enhanced argTypes with comprehensive prop documentation and proper event handlers using `fn()`\n- Added AllThemes story variants to every component for visual theme testing\n- Created centralized ag-grid mocking utilities in `.storybook/mocks/agGridMocks.ts` with factory functions\n\n**Implementation Quality:**\nThe refactoring demonstrates consistent execution with proper TypeScript patterns, though intentionally uses `any` type for story args (acceptable per PR description). The ag-grid mock enhancements provide minimal viable mocks for isolated component testing without breaking existing functionality.\n\n**No Breaking Changes:**\n- All changes are purely documentation and testing enhancements\n- Build verification passed (`npm run build-storybook`)\n- TypeScript compilation successful with 0 errors\n- No runtime breaking issues identified in play functions\n\n<h3>Confidence Score: 5/5</h3>\n\n- This PR is safe to merge - it's a pure documentation and testing enhancement with no runtime breaking changes\n- Perfect score because: (1) All changes are non-functional improvements to Storybook stories, (2) Build and TypeScript verification passed with 0 errors, (3) Import path migration executed consistently across all files, (4) No actual component logic modified, (5) Comprehensive systematic approach with proper testing patterns\n- No files require special attention - all changes follow consistent pattern\n\n<details><summary><h3>Important Files Changed</h3></summary>\n\n\n\n\n| Filename | Overview |\n|----------|----------|\n| .storybook/mocks/agGridMocks.ts | Added 3 new optional properties to MockGridParams interface (metricName, noHint, hideChangeIcon) for supporting additional cell renderer requirements |\n| src/components/controls/SdButton/SdButtonChip/SdButtonChip.stories.ts | Enhanced with CSF3 format, added play functions, improved JSDoc comments, and added event handler documentation following gold standard pattern |\n| src/components/inputs/SdInput/SdInput.stories.ts | Migrated to CSF3, added interactive play tests, enhanced argTypes documentation, and added AllThemes story variant with proper event handlers |\n| src/components/display/SdTable/CellRenderers/DomainCellRenderer/DomainCellRenderer.stories.ts | Updated to use createMockGridParams helper, added comprehensive play tests, and enhanced documentation for ag-grid cell renderer |\n| src/components/display/SdIcon/SdIcon.stories.ts | Added play tests with DOM verification, enhanced documentation, maintained AllIcons and AllGradients showcase stories |\n\n</details>\n\n\n</details>\n\n\n<h3>Sequence Diagram</h3>\n\n```mermaid\nsequenceDiagram\n    participant Dev as Developer\n    participant SB as Storybook\n    participant Story as Story File\n    participant Mock as agGridMocks\n    participant Comp as Component\n    participant Test as Play Function\n    \n    Dev->>Story: Open component story\n    Story->>SB: Load with CSF3 meta config\n    SB->>Story: Parse satisfies Meta<typeof Component>\n    \n    alt For ag-grid components\n        Story->>Mock: createMockGridParams()\n        Mock->>Story: Return mock params\n    end\n    \n    Story->>Comp: Render with args\n    Comp->>SB: Display in canvas\n    \n    alt Story has play function\n        SB->>Test: Execute play()\n        Test->>SB: Query with within(canvasElement)\n        Test->>Comp: userEvent.click() / type()\n        Comp->>Test: Fire events\n        Test->>Test: expect(fn()).toHaveBeenCalled()\n        Test->>SB: Report test results\n    end\n    \n    alt AllThemes story\n        Story->>Story: Loop themes array\n        loop For each theme\n            Story->>Comp: Render with theme class\n            Comp->>SB: Display themed variant\n        end\n    end\n    \n    SB->>Dev: Show interactive documentation\n```",
        "createdAt": "2026-02-03T08:04:31Z",
        "type": "comment"
      },
      {
        "id": "PRR_kwDOQ5kgRs7fHUdB",
        "agent": "copilot",
        "author": "copilot-pull-request-reviewer",
        "body": "Copilot encountered an error and was unable to review this pull request. You can try again by re-requesting a review.",
        "rawBody": "Copilot encountered an error and was unable to review this pull request. You can try again by re-requesting a review.",
        "createdAt": "2026-02-03T06:27:19Z",
        "type": "review"
      },
      {
        "id": "PRR_kwDOQ5kgRs7fIUfE",
        "agent": "coderabbit",
        "author": "coderabbitai",
        "body": "**Actionable comments posted: 6**\n**[NOTE]** Due to the large number of review comments, Critical, Major severity comments were prioritized as inline comments.\n**[CAUTION]** Some comments are outside the diff and can‚Äôt be posted inline due to platform limitations.\n<details>\n<summary>‚ö†Ô∏è Outside diff range comments (8)</summary><blockquote>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/LinkRelationCellRenderer/LinkRelationCellRenderer.stories.ts (1)</summary><blockquote>\n`98-130`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**JSDoc description doesn't match implementation.**\nThe JSDoc states \"displays both link relation states across all available themes\" but the implementation only renders a single state (`value: true`). Either update the documentation to accurately describe the single-state showcase, or modify the template to render both states per theme.\n<details>\n<summary>Option 1: Fix JSDoc to match implementation</summary>\n```diff\n/**\n- * All themes showcase - displays both link relation states across all available themes.\n+ * All themes showcase - displays the Dofollow link relation state across all available themes.\n*/\n```\n</details>\n<details>\n<summary>Option 2: Render both states per theme</summary>\n```diff\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <link-relation-cell-renderer v-bind=\"args\" />\n+          <div style=\"display: flex; gap: 8px;\">\n+            <link-relation-cell-renderer :params=\"{ value: true }\" />\n+            <link-relation-cell-renderer :params=\"{ value: false }\" />\n+          </div>\n</div>\n</div>\n`,\n```\nNote: If choosing Option 2, you may need to wrap the params with `createMockGridParams` depending on component requirements.\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableTags.stories.ts (1)</summary><blockquote>\n`148-176`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**AllThemes likely renders an empty/misconfigured table.**\n`AllThemes` doesn‚Äôt pass `columnDefs`, `rowData`, or `gridOptions`, so the table may render without data or required configuration. Consider reusing `Default.args` and passing `gridOptions` like the `Table` render does.  \n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n```diff\nexport const AllThemes: Story = {\n+  args: { ...Default.args },\nrender: (args: any) => ({\ncomponents: { SdTable },\nsetup() {\n+      const gridOptions = createGridOptions();\nconst themes = [\n{ name: 'Light', class: 'wope-light-theme' },\n{ name: 'Dark', class: 'wope-dark-theme' },\n{ name: 'Nebula Surge', class: 'nebula-surge-theme' },\n{ name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n{ name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n{ name: 'Fall Symphony', class: 'fall-symphony-theme' },\n];\n-      return { args, themes };\n+      return { args, themes, gridOptions };\n},\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <sd-table v-bind=\"args\" style=\"width: 400px; height: 256px\" />\n+          <sd-table v-bind=\"args\" :grid-options=\"gridOptions\" style=\"width: 400px; height: 256px\" />\n</div>\n</div>\n`,\n}),\n```\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTablePerformance.stories.ts (1)</summary><blockquote>\n`1494-1494`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n**Fix `summaryColumnDefs()` call in AllThemes story to include required configuration parameters.**\nLine 1494 calls `summaryColumnDefs()` without arguments, but the function requires an object with `lastDate`, `location`, and `language` properties. The function uses `lastDate` to format column headers via `dayjs(lastDate).format('MMM D')` and passes `location` and `language` to cell components. Calling it without arguments will cause runtime errors. Update to match the Default story pattern (line 56):\n```javascript\nsummaryColumnDefs({\nlastDate: '2021-02-02',\nlocation: { countryCode: 'USA' },\nlanguage: { locale: 'en_US' }\n})\n```\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/VolumeBestCellRenderer/VolumeBestCellRenderer.stories.ts (1)</summary><blockquote>\n`33-39`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**Make story data deterministic (avoid `new Date()` in args).**\nUsing the current month means the rendered output changes over time, which can cause flaky snapshots and inconsistent docs. Prefer a fixed sample month shared across stories.  \n<details>\n<summary>üîß Suggested change (deterministic sample month)</summary>\n```diff\ntype Story = StoryObj<typeof meta>;\n+const SAMPLE_MONTH = 1;\nexport const Default: Story = {\nargs: {\nparams: createMockGridParams({\nvalue: {\n-        months: [new Date().getMonth() + 1],\n+        months: [SAMPLE_MONTH],\nvalue: 8000,\n},\n}),\n},\n};\nexport const AllThemes: Story = {\nargs: {\nparams: createMockGridParams({\nvalue: {\n-        months: [new Date().getMonth() + 1],\n+        months: [SAMPLE_MONTH],\nvalue: 8000,\n},\n}),\n},\n```\n</details>\nAlso applies to: 116-121\n</blockquote></details>\n<details>\n<summary>src/components/display/SdCheckList/SdCheckList.stories.ts (1)</summary><blockquote>\n`158-185`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**Clone data per theme to prevent state synchronization across instances.**\nAllThemes renders six SdCheckList instances that all reference the same `args.data` array. Since SdTree (used by SdCheckList) uses `vue3-tree` with `v-model:nodes`, interaction mutations propagate back to the original array‚Äîtoggling a checkbox in one theme will update all others. Each theme should have its own isolated data copy.\n<details>\n<summary>üîß Suggested adjustment (per-theme data clone)</summary>\n```diff\nrender: (args: any) => ({\ncomponents: { SdCheckList },\nsetup() {\n+      const makeData = () => structuredClone(args.data ?? sampleData);\nconst themes = [\n{ name: 'Light', class: 'wope-light-theme' },\n{ name: 'Dark', class: 'wope-dark-theme' },\n{ name: 'Nebula Surge', class: 'nebula-surge-theme' },\n{ name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n{ name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n{ name: 'Fall Symphony', class: 'fall-symphony-theme' },\n-      ];\n-      return { args, themes };\n+      ].map((theme) => ({ ...theme, data: makeData() }));\n+      return { args, themes };\n},\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <sd-check-list v-bind=\"args\" style=\"width: 300px\" />\n+          <sd-check-list v-bind=\"args\" :data=\"theme.data\" style=\"width: 300px\" />\n</div>\n</div>\n`,\n}),\n```\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts (1)</summary><blockquote>\n`30-68`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**Some `change.diff` values don‚Äôt match `value - prev`.**  \nExample: the 2021-02-09 entry has `value: 7`, `prev: 4`, but `diff: -2`. Inconsistent diffs can render misleading arrows or deltas. Please recompute or correct the mismatches in this series.\n</blockquote></details>\n<details>\n<summary>src/components/controls/SdLinkButton/SdLinkButton.stories.ts (1)</summary><blockquote>\n`14-79`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n**Add an onClick action to the meta args so the play test doesn't fail.**\nThe Default story's play function (line 78) calls `expect(args.onClick).toHaveBeenCalled()`, but `onClick` is not defined in either the Default story's args or the meta config. Without this mock function, the play test will throw an error at runtime and the action won't appear in Storybook. Add `onClick: fn()` to the meta args and define its argType.\n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n```diff\nconst meta = {\ntitle: 'Controls/SdLinkButton',\ncomponent: SdLinkButton,\ntags: ['autodocs'],\n+  args: {\n+    onClick: fn(),\n+  },\nargTypes: {\n+    onClick: {\n+      description: 'Emitted when the link button is clicked',\n+      action: 'click',\n+      table: { category: 'events' },\n+    },\ndefault: {\ndescription: 'Default slot for the link button label content',\ncontrol: { type: 'text' },\n```\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/controls/SdButton/SdButtonLarge/SdButtonLarge.stories.ts (1)</summary><blockquote>\n`167-191`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**AllThemes story renders button without label content.**\nThe `args: {}` provides no default slot content, so the button will appear empty in the theme showcase. Other button stories in the PR (e.g., `SdButtonChip.stories.ts` at Lines 121-148) provide meaningful args like `name: 'Example'`.\n<details>\n<summary>üîß Suggested fix to add default label</summary>\n```diff\nexport const AllThemes: Story = {\n-  args: {},\n+  args: {\n+    default: 'Get Started',\n+  },\nrender: (args: any) => ({\ncomponents: { SdButtonLarge },\nsetup() {\n// ...\n},\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <sd-button-large v-bind=\"args\" />\n+          <sd-button-large v-bind=\"args\">{{ args.default }}</sd-button-large>\n</div>\n</div>\n`,\n}),\n```\n</details>\n</blockquote></details>\n</blockquote></details>\n\n<details>\n<summary>ü§ñ Fix all issues with AI agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts`:\n- Around line 103-121: The story's play asserts args.onClick but args never\nprovides an onClick spy (and the button role may not render without\nclickability) ‚Äî update the story's args to include a spy and enable clicking\n(e.g., add onClick as a spy function and clickable: true), and keep the\nrender/template wiring (render, template, SdBullet, args) unchanged; create the\nspy using your test helper (jest.fn() or Storybook action helper) at top of the\nstory file so play can assert args.onClick was called when userEvent.click hits\nthe button.\n\nIn `@src/components/display/SdChart/SdChart.stories.ts`:\n- Around line 199-206: The play function currently uses canvas.getByText with a\nclass-check callback (canvas.getByText(...\nelement?.classList?.contains('sd-chart'))), which is incorrect; update the\nassertion in the play function to use a semantic or test-id query instead (e.g.,\nwithin(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts`:\n- Around line 102-119: The story's template sets ref=\"imgEl\" on the <img> but\nnever passes that reference to the SdCopyImage component, so the copy behavior\nisn't demonstrated; update the WithImagePreview render setup to create a Vue ref\n(import ref from 'vue'), assign it to the image element (e.g., imgEl), and pass\nit into the SdCopyImage via the imageElement prop (or imageElement: imgEl) and\nensure the `@copy` handler still uses args.onCopy; modify the render function in\nthe WithImagePreview story and add the ref import.\n\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`:\n- Around line 64-71: The story is using createMockGridParams(...) with an as any\noverride which bypasses TypeScript checks for renderer-specific props (useTitle,\ngetRowData, getGhostRowData, gridOptions, ghostRowData); replace that call with\nthe specialized factory createChildTableCellParams(...) from agGridMocks and\npass the same properties (useTitle, getRowData, getGhostRowData/ghostRowData,\ngridOptions) so types are enforced; update the import to pull\ncreateChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`:\n- Around line 72-76: The exported story named Error shadows the global Error and\ntriggers the noShadowRestrictedNames lint rule; rename the export (for example\nchange export const Error to export const ErrorState or KeywordError) and update\nany places that import or reference this story (docs, storybook configs, tests)\nto use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`:\n- Line 2: The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<details>\n<summary>üü° Minor comments (28)</summary><blockquote>\n\n<details>\n<summary>src/components/display/SdTable/SdTableGoogleIntegrations.stories.ts-301-306 (1)</summary><blockquote>\n\n`301-306`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Strengthen AllThemes play assertions to verify each label explicitly.**\n\nThe current regex can pass if any theme name appears elsewhere (e.g., inside table data), masking a missing theme label. It‚Äôs safer to assert each expected label individually.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n     await step('Verify theme grid renders correctly', async () => {\n-      const themeContainers = canvas.getAllByText(/Light|Dark|Nebula Surge|Mountain Cliff|Horizon Hopper|Fall Symphony/);\n-      expect(themeContainers.length).toBeGreaterThanOrEqual(6);\n+      const themeNames = [\n+        'Light',\n+        'Dark',\n+        'Nebula Surge',\n+        'Mountain Cliff',\n+        'Horizon Hopper',\n+        'Fall Symphony',\n+      ];\n+      themeNames.forEach((name) => {\n+        expect(canvas.getByText(name)).toBeTruthy();\n+      });\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/ColumnHeaders/SortColumnHeader/SortColumnHeader.stories.ts-127-139 (1)</summary><blockquote>\n\n`127-139`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function clicks header but doesn't verify the sort result.**\n\nThe interaction test triggers a sort click but lacks an assertion to verify the expected outcome. Consider asserting that a sort indicator appears or the sort state changes:\n\n<details>\n<summary>üß™ Suggested enhancement</summary>\n\n```diff\n     await step('Click header to trigger sort', async () => {\n       const headerName = canvas.getByText('Volume');\n       await userEvent.click(headerName);\n     });\n+\n+    await step('Verify sort indicator appears', async () => {\n+      // Assert sort arrow or aria-sort attribute is present\n+      const header = canvas.getByRole('button', { name: /volume/i });\n+      await expect(header).toHaveAttribute('aria-sort', 'ascending');\n+    });\n   },\n```\n\n</details>\n\nAdjust the selector and expected attribute based on how `SortColumnHeader` communicates sort state in the DOM.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdBadge/SdBadge.stories.ts-225-233 (1)</summary><blockquote>\n\n`225-233`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function step description doesn't match the assertion.**\n\nThe step says \"Click the secondary icon and verify action event\", but the test clicks the badge button and asserts `onClick` was called‚Äînot `onAction`. If the intent is to test the secondary icon's action callback, the assertion should verify `args.onAction` instead.\n\n<details>\n<summary>Proposed fix to align description and assertion</summary>\n\nIf testing the secondary icon action:\n```diff\n-    await step('Click the secondary icon and verify action event', async () => {\n-      const badge = canvas.getByRole('button');\n-      await userEvent.click(badge);\n-      await expect(args.onClick).toHaveBeenCalled();\n+    await step('Click badge and verify onClick handler called', async () => {\n+      const badge = canvas.getByRole('button');\n+      await userEvent.click(badge);\n+      await expect(args.onClick).toHaveBeenCalled();\n     });\n```\n\nOr, if you actually want to test the secondary icon triggering `onAction`, update the assertion (and possibly the selector to target the icon specifically).\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSerpList/SdSerpList.stories.ts-57-64 (1)</summary><blockquote>\n\n`57-64`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect use of `getByText` for class-based element selection.**\n\nThe `getByText` query is designed for text content matching, not class-based selection. The callback `((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false)` ignores the text parameter entirely, which makes this query semantically incorrect and potentially flaky.\n\nUse `canvasElement.querySelector` for class-based selection, or verify actual rendered text content instead.\n\n<details>\n<summary>üîß Proposed fix using querySelector</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n-   const canvas = within(canvasElement);\n-\n    await step('Verify the SERP list renders with grouped items', async () => {\n-     const root = canvas.getByText((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false);\n+     const root = canvasElement.querySelector('.sd-serp-list');\n      await expect(root).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBox.stories.ts-101-107 (1)</summary><blockquote>\n\n`101-107`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion may be brittle and mismatches step description.**\n\nThe step describes verifying \"plan tabs\" but actually asserts on a hardcoded price value (`$47`). If the Starter plan pricing changes, this test will fail without any actual regression. Consider asserting on a more stable element that aligns with the step description (e.g., checking for plan tab elements).\n\n<details>\n<summary>üí° Suggested improvement</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify pricing box renders with plan tabs', async () => {\n-      await expect(canvas.getByText('$47')).toBeInTheDocument();\n+      await expect(canvas.getByRole('tablist')).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, update the step description to match what's being tested:\n```diff\n-    await step('Verify pricing box renders with plan tabs', async () => {\n+    await step('Verify pricing box renders with price display', async () => {\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdVolumeTrends/SdVolumeTrends.stories.ts-96-103 (1)</summary><blockquote>\n\n`96-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Semantic mismatch: `getByText` used to query by CSS class.**\n\nThe play function uses `getByText` with a custom matcher that checks for a CSS class (`sd-volume-trends`), which is semantically incorrect. `getByText` is designed for finding elements by text content, not DOM structure.\n\n<details>\n<summary>üõ†Ô∏è Proposed fix using querySelector</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Volume trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-volume-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-volume-trends');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\n</details>\n\nAlternatively, if the component has a semantic role, prefer `getByRole` for better accessibility alignment.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemoItem/SdDemoItem.stories.ts-131-137 (1)</summary><blockquote>\n\n`131-137`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Missing `@click` handler wiring in template.**\n\nThe `AllFileTypes` story doesn't pass the `onClick` handler to the demo items, so click events won't appear in the Actions panel. This is inconsistent with the meta args that define `onClick: fn()`.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n     template: `\n       <div style=\"display: flex; gap: 16px;\">\n-        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" `@click`=\"args.onClick\" />\n       </div>\n     `,\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPositionTrends/SdPositionTrends.stories.ts-93-100 (1)</summary><blockquote>\n\n`93-100`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect usage of `getByText` for class-based element selection.**\n\n`getByText` is designed to match elements by their text content, not by class name. The predicate function receives `(content, element)` where `content` is the text content being evaluated. Using it to check `classList.contains()` is a misuse of the API and may fail if the element doesn't have matching text.\n\n<details>\n<summary>üõ†Ô∏è Suggested fix using container query</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Position trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-position-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-position-trends');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\nAlternatively, consider adding a `data-testid=\"sd-position-trends\"` to the component and using `canvas.getByTestId('sd-position-trends')` for more idiomatic Testing Library usage.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/VolumeTrendCellRenderer/VolumeTrendCellRenderer.stories.ts-86-90 (1)</summary><blockquote>\n\n`86-90`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Minor inconsistency: month 1's `prev` value.**\n\nFor month 1, `prev` is set to `5000`, but other stories (trendData12Months, UpwardTrend, DownwardTrend) consistently use `prev: 0` for the first month since there's no preceding month to compare against.\n\n<details>\n<summary>Suggested fix for consistency</summary>\n\n```diff\n         trends: Array.from({ length: 12 }, (_, i) => ({\n           month: i + 1,\n           value: 5000,\n-          change: { prev: 5000, diff: 0 },\n+          change: { prev: i === 0 ? 0 : 5000, diff: 0 },\n         })),\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdFlag/SdFlag.stories.ts-48-59 (1)</summary><blockquote>\n\n`48-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid hardcoded alt text in the play assertion.**\n\nThe play test hardcodes `'US'`, so it will fail if `args.name` changes. Use `args.name` to derive the expected alt text.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }) => {\n+  play: async ({ canvasElement, step, args }) => {\n     const canvas = within(canvasElement);\n+    const expectedAlt = String(args.name).toUpperCase();\n\n     await step('Verify flag image is rendered', async () => {\n       const img = canvas.getByRole('img');\n       await expect(img).toBeInTheDocument();\n     });\n\n     await step('Verify alt text matches country code', async () => {\n       const img = canvas.getByRole('img');\n-      await expect(img).toHaveAttribute('alt', 'US');\n+      await expect(img).toHaveAttribute('alt', expectedAlt);\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DateAndTypeCellRenderer/DateAndTypeCellRenderer.stories.ts-140-147 (1)</summary><blockquote>\n\n`140-147`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Type the play function parameters for better type safety.**\n\nThe `({ canvasElement, step }: any)` parameter typing loses type safety. Storybook provides proper types for the play function context‚Äîuse them instead of `any`.\n\nHowever, the date format assertion is correct and not brittle: The component explicitly uses the hardcoded format string `'D.M.YYYY'` (see DateAndTypeCellRenderer.vue line 41), so `'15.6.2024'` is the expected output for input `'2024-06-15'` and will not break due to locale variations.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordDifficultyCellRenderer/KeywordDifficultyCellRenderer.stories.ts-6-10 (1)</summary><blockquote>\n\n`6-10`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**JSDoc difficulty thresholds are internally inconsistent.**\n\nThe meta description states \"green for easy (1-79)\" but the individual story JSDoc comments split this into Medium (40-79) at line 52 and Easy (1-39) at line 63. Either update the meta description to reflect four tiers or reconcile the individual story descriptions.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts-54-103 (1)</summary><blockquote>\n\n`54-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Add `showCode` property to `MockGridParams` type to eliminate `as any` cast.**\n\nThe `showCode` property used in the ShowCode story (line 59) is not defined in the `MockGridParams` interface at `.storybook/mocks/agGridMocks.ts`, forcing the `as any` cast. Add `showCode?: boolean;` to the `MockGridParams` interface to properly support this property without type bypass.\n\nAdditionally, remove `any` type annotations from line 83 (`play` function) and line 102 (`render` function) to let Storybook infer the correct types. These are Storybook CSF3 constructs with well-defined types provided by `@storybook/vue3-vite`.\n\n<details>\n<summary>Changes needed</summary>\n\nIn `.storybook/mocks/agGridMocks.ts`, add to the `MockGridParams` interface:\n\n```diff\n export interface MockGridParams {\n   value?: unknown;\n   valueFormatted?: string | unknown[];\n   data?: Record<string, unknown>;\n+  showCode?: boolean;\n   node?: MockNode;\n```\n\nIn `src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts`:\n\n```diff\n export const ShowCode: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'USA',\n-      showCode: true,\n-    } as any),\n+      showCode: true,\n+    }),\n   },\n };\n\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }) => {\n\n-  render: (args: any) => ({\n+  render: (args) => ({\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdEmoji/SdEmoji.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use `queryByRole` so the fallback is reachable.**\n\n`getByRole` throws when the role isn't found, so the `?? canvasElement.querySelector(...)` branch never runs. Use `queryByRole` to keep the intended fallback behavior.\n\n<details>\n<summary>üí° Suggested fix</summary>\n\n```diff\n-      const emoji = canvas.getByRole('img', { hidden: true })\n-        ?? canvasElement.querySelector('.sd-emoji');\n+      const emoji = canvas.queryByRole('img', { hidden: true })\n+        ?? canvasElement.querySelector('.sd-emoji');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdCopyImage/SdCopyImage.stories.ts-57-65 (1)</summary><blockquote>\n\n`57-65`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Same clipboard API concern as SdCopy.**\n\nThe play function may fail in headless CI environments due to clipboard permission requirements. See comment on SdCopy.stories.ts.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBoxCounter/SdPricingBoxCounter.stories.ts-179-205 (1)</summary><blockquote>\n\n`179-205`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the interaction story description with the actual action.**  \nThe docstring says ‚Äúclicking the increment button,‚Äù but the play function only focuses the input. Either update the text or change the play to click the increment control. Here‚Äôs a minimal text fix to match current behavior:\n\n<details>\n<summary>Suggested update</summary>\n\n```diff\n- * Interaction test: clicking the increment button\n+ * Interaction test: focusing the counter input\n...\n-    await step('Click the input to focus it', async () => {\n+    await step('Focus the counter input', async () => {\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts-86-88 (1)</summary><blockquote>\n\n`86-88`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the JSDoc with the actual play assertions.**\n\nThe description says the icon is verified, but the play function only checks the text. Either add an icon assertion or reword the description to avoid misleading docs.\n\n<details>\n<summary>‚úèÔ∏è Minimal fix (description)</summary>\n\n```diff\n-/**\n- * Verifies the keyword text and state icon are rendered in the DOM\n- */\n+/**\n+ * Verifies the keyword text is rendered in the DOM\n+ */\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-71-84 (1)</summary><blockquote>\n\n`71-84`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Normalize season distributions to 1.0 in story args (and docs snippet).**\n\nThese stories describe a *distribution* across four seasons, but the values currently sum > 1.0. This can mislead consumers and skew visual expectations. If the intent is a true distribution, normalize these to total 1.0 and keep the docs snippet aligned with the args.\n\n<details>\n<summary>üîß Suggested normalization</summary>\n\n```diff\n-        code: html`<sd-seasonality :spring=\"0.18\" :summer=\"0.52\" :fall=\"0.35\" :winter=\"0.15\" />`,\n+        code: html`<sd-seasonality :spring=\"0.15\" :summer=\"0.4\" :fall=\"0.3\" :winter=\"0.15\" />`,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n\n-    spring: 0.25,\n-    summer: 0.85,\n-    fall: 0.1,\n-    winter: 0.05,\n+    spring: 0.05,\n+    summer: 0.85,\n+    fall: 0.05,\n+    winter: 0.05,\n\n-    spring: 0.08,\n-    summer: 0.05,\n-    fall: 0.22,\n-    winter: 0.9,\n+    spring: 0.03,\n+    summer: 0.02,\n+    fall: 0.05,\n+    winter: 0.9,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n```\n</details>\n\nAlso applies to: 107-112, 147-152, 203-208\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use a direct DOM query instead of `getByText` with class predicate in play function.**\n\nLine 89 uses `getByText` with a class predicate, which is non-idiomatic and can be flaky/ambiguous because it's text-driven. Use `querySelector` directly to query the root element.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-import { expect, within } from 'storybook/test';\n+import { expect } from 'storybook/test';\n\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Seasonality component is rendered with four season items', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-seasonality') ?? false);\n-      await expect(wrapper).toBeInTheDocument();\n+      const wrapper = canvasElement.querySelector('.sd-seasonality');\n+      expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemo.stories.ts-88-101 (1)</summary><blockquote>\n\n`88-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play test doesn‚Äôt assert the emitted payload.**  \nThe step description says it verifies the correct file type, but it only checks that the handler was called. Consider asserting the expected value to prevent silent regressions.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n       const cards = canvas.getAllByText(/Excel|CSV|Google Sheets/);\n       await userEvent.click(cards[0]);\n-      await expect(args.onSelect).toHaveBeenCalled();\n+      await expect(args.onSelect).toHaveBeenCalledWith(DemoFileTypes.Excel);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdLinkIcon/SdLinkIcon.stories.ts-143-162 (1)</summary><blockquote>\n\n`143-162`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**ToolbarGroup doesn't forward `args`, so controls/actions won't apply.**\n\nThe story hard-codes props for each icon and ignores `args.disabled` / `args.onClick`, so toggling controls won't affect the toolbar items and clicks won't show in Actions. Consider spreading `args` into each icon (and optionally disable the `name` control for this story).\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-        <sd-link-icon :name=\"IconTypes.Pencil\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Copy\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Trash\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Gear\" :size=\"args.size\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Pencil\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Copy\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Trash\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Gear\" />\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableSort/SdTableSortItem/SdTableSortItem.stories.ts-75-108 (1)</summary><blockquote>\n\n`75-108`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Make the play query resilient to multiple buttons.**\n\nLine 91 uses `getByRole('button')`, which will throw if more than one button is rendered. The component renders multiple buttons: two metric/sort type selectors (sd-dropdown-button elements) and a remove button (sd-link-icon). Use `getAllByRole` with a count assertion instead.\n\n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n\n```diff\n-    const sortItem = canvas.getByRole('button');\n-    await expect(sortItem).toBeInTheDocument();\n+    const buttons = canvas.getAllByRole('button');\n+    await expect(buttons.length).toBeGreaterThan(0);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/InsightsCellRenderer/InsightsCellRenderer.stories.ts-141-161 (1)</summary><blockquote>\n\n`141-161`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid `getByText` throwing before the fallback executes.**\n\n`getByText` throws when no text is present, so the fallback `querySelector` never runs. For icon-only renders, this causes the test to fail immediately instead of attempting the fallback query. Use `queryByText` instead.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-      const container = canvas.getByText(/./).closest('.insights-cell')\n-        ?? canvasElement.querySelector('.insights-cell');\n+      const container = canvas.queryByText(/./)?.closest('.insights-cell')\n+        ?? canvasElement.querySelector('.insights-cell');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableOverview.stories.ts-54-85 (1)</summary><blockquote>\n\n`54-85`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function won't execute due to `skip-test` tag.**\n\nThe Default story has both a play function (Lines 80-84) and `tags: ['skip-test']` (Line 55). The play function will never execute during test runs, making it effectively dead code.\n\nIf the circular import issue is resolved, consider removing the skip-test tag. Otherwise, removing the play function would reduce maintenance burden.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DeviceCellRenderer/DeviceCellRenderer.stories.ts-94-101 (1)</summary><blockquote>\n\n`94-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion is too permissive.**\n\nThe regex `/./ ` matches any single character, making this test pass even if the component renders incorrect or unrelated content. This doesn't verify that the device name is actually rendered.\n\n<details>\n<summary>üîß Suggested improvement for meaningful assertion</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify device cell content is rendered', async () => {\n-      const cell = canvas.getByText(/./);\n+      const cell = canvas.getByText(/desktop/i);\n       await expect(cell).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdMetaData/SdMetaData.stories.ts-64-83 (1)</summary><blockquote>\n\n`64-83`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Match the test assertion to the component's actual format behavior.**\n\nThe hardcoded `'12,345'` has two issues: it's locale-dependent, and it doesn't match what the component actually renders. The `SdMetaData` component defaults to `format='compact'`, which would render `12345` as `\"12K\"` (not `\"12,345\"`). The suggested `Intl.NumberFormat()` fix addresses the locale concern but produces the wrong output‚Äîit formats as decimal while the component uses compact.\n\nEither explicitly set `format: 'decimal'` in args and derive the expected value from vue-i18n's `n()` function (matching the component's actual formatter), or update the test to expect the compact format output. The former approach is recommended:\n\n<details>\n<summary>üîß Suggested adjustment</summary>\n\n```diff\nargs: {\n  title: 'Title',\n  value: 12345,\n+ format: 'decimal',\n},\nplay: async ({ canvasElement, step, args }: any) => {\n  const canvas = within(canvasElement);\n+ const { n } = useI18n();\n+ const formattedValue = n(args.value, args.format);\n\n  await step('Verify title and value are rendered', async () => {\n    await expect(canvas.getByText('Title')).toBeInTheDocument();\n-   await expect(canvas.getByText('12,345')).toBeInTheDocument();\n+   await expect(canvas.getByText(formattedValue)).toBeInTheDocument();\n  });\n},\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/features/analytics/SdDailyComparisonUrlList/SdDailyComparisonUrlList.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change the import path from `storybook/test` to `@storybook/test`.** Storybook 10.1.11 supports and recommends importing from `@storybook/test`, the official package. The unscoped `storybook/test` subpath import has shown compatibility issues in Storybook 10 and is not the standard API surface.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableMarket.stories.ts-59-59 (1)</summary><blockquote>\n\n`59-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change to `story` for consistency with the other stories in this file.**\n\nAll other stories in `SdTableMarket.stories.ts` use `docs.description.story` (CompetitorsKeywords, CompetitionOverview, DailyComparison, MarketChild, and PositionDistribution), so CompetitorsDomain should follow the same convention.\n\n<details>\n<summary>üõ†Ô∏è Proposed fix</summary>\n\n```diff\n-        component: 'Table view for the `Market Competitors Domain` section.',\n+        story: 'Table view for the `Market Competitors Domain` section.',\n```\n</details>\n\n</blockquote></details>\n\n</blockquote></details>",
        "rawBody": "**Actionable comments posted: 6**\n\n> [!NOTE]\n> Due to the large number of review comments, Critical, Major severity comments were prioritized as inline comments.\n\n> [!CAUTION]\n> Some comments are outside the diff and can‚Äôt be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>‚ö†Ô∏è Outside diff range comments (8)</summary><blockquote>\n> \n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/LinkRelationCellRenderer/LinkRelationCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `98-130`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **JSDoc description doesn't match implementation.**\n> \n> The JSDoc states \"displays both link relation states across all available themes\" but the implementation only renders a single state (`value: true`). Either update the documentation to accurately describe the single-state showcase, or modify the template to render both states per theme.\n> \n> \n> \n> <details>\n> <summary>Option 1: Fix JSDoc to match implementation</summary>\n> \n> ```diff\n>  /**\n> - * All themes showcase - displays both link relation states across all available themes.\n> + * All themes showcase - displays the Dofollow link relation state across all available themes.\n>   */\n> ```\n> </details>\n> \n> <details>\n> <summary>Option 2: Render both states per theme</summary>\n> \n> ```diff\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <link-relation-cell-renderer v-bind=\"args\" />\n> +          <div style=\"display: flex; gap: 8px;\">\n> +            <link-relation-cell-renderer :params=\"{ value: true }\" />\n> +            <link-relation-cell-renderer :params=\"{ value: false }\" />\n> +          </div>\n>          </div>\n>        </div>\n>      `,\n> ```\n> \n> Note: If choosing Option 2, you may need to wrap the params with `createMockGridParams` depending on component requirements.\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/SdTableTags.stories.ts (1)</summary><blockquote>\n> \n> `148-176`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **AllThemes likely renders an empty/misconfigured table.**\n> \n> `AllThemes` doesn‚Äôt pass `columnDefs`, `rowData`, or `gridOptions`, so the table may render without data or required configuration. Consider reusing `Default.args` and passing `gridOptions` like the `Table` render does.  \n> \n> \n> <details>\n> <summary>üõ†Ô∏è Suggested fix</summary>\n> \n> ```diff\n>  export const AllThemes: Story = {\n> +  args: { ...Default.args },\n>    render: (args: any) => ({\n>      components: { SdTable },\n>      setup() {\n> +      const gridOptions = createGridOptions();\n>        const themes = [\n>          { name: 'Light', class: 'wope-light-theme' },\n>          { name: 'Dark', class: 'wope-dark-theme' },\n>          { name: 'Nebula Surge', class: 'nebula-surge-theme' },\n>          { name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n>          { name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n>          { name: 'Fall Symphony', class: 'fall-symphony-theme' },\n>        ];\n> -      return { args, themes };\n> +      return { args, themes, gridOptions };\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-table v-bind=\"args\" style=\"width: 400px; height: 256px\" />\n> +          <sd-table v-bind=\"args\" :grid-options=\"gridOptions\" style=\"width: 400px; height: 256px\" />\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/SdTablePerformance.stories.ts (1)</summary><blockquote>\n> \n> `1494-1494`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n> \n> **Fix `summaryColumnDefs()` call in AllThemes story to include required configuration parameters.**\n> \n> Line 1494 calls `summaryColumnDefs()` without arguments, but the function requires an object with `lastDate`, `location`, and `language` properties. The function uses `lastDate` to format column headers via `dayjs(lastDate).format('MMM D')` and passes `location` and `language` to cell components. Calling it without arguments will cause runtime errors. Update to match the Default story pattern (line 56):\n> \n> ```javascript\n> summaryColumnDefs({\n>   lastDate: '2021-02-02',\n>   location: { countryCode: 'USA' },\n>   language: { locale: 'en_US' }\n> })\n> ```\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/VolumeBestCellRenderer/VolumeBestCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `33-39`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Make story data deterministic (avoid `new Date()` in args).**\n> \n> Using the current month means the rendered output changes over time, which can cause flaky snapshots and inconsistent docs. Prefer a fixed sample month shared across stories.  \n> \n> \n> <details>\n> <summary>üîß Suggested change (deterministic sample month)</summary>\n> \n> ```diff\n>  type Story = StoryObj<typeof meta>;\n> +const SAMPLE_MONTH = 1;\n> \n>  export const Default: Story = {\n>    args: {\n>      params: createMockGridParams({\n>        value: {\n> -        months: [new Date().getMonth() + 1],\n> +        months: [SAMPLE_MONTH],\n>          value: 8000,\n>        },\n>      }),\n>    },\n>  };\n> \n>  export const AllThemes: Story = {\n>    args: {\n>      params: createMockGridParams({\n>        value: {\n> -        months: [new Date().getMonth() + 1],\n> +        months: [SAMPLE_MONTH],\n>          value: 8000,\n>        },\n>      }),\n>    },\n> ```\n> </details>\n> \n> \n> Also applies to: 116-121\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdCheckList/SdCheckList.stories.ts (1)</summary><blockquote>\n> \n> `158-185`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Clone data per theme to prevent state synchronization across instances.**\n> \n> AllThemes renders six SdCheckList instances that all reference the same `args.data` array. Since SdTree (used by SdCheckList) uses `vue3-tree` with `v-model:nodes`, interaction mutations propagate back to the original array‚Äîtoggling a checkbox in one theme will update all others. Each theme should have its own isolated data copy.\n> \n> <details>\n> <summary>üîß Suggested adjustment (per-theme data clone)</summary>\n> \n> ```diff\n>    render: (args: any) => ({\n>      components: { SdCheckList },\n>      setup() {\n> +      const makeData = () => structuredClone(args.data ?? sampleData);\n>        const themes = [\n>          { name: 'Light', class: 'wope-light-theme' },\n>          { name: 'Dark', class: 'wope-dark-theme' },\n>          { name: 'Nebula Surge', class: 'nebula-surge-theme' },\n>          { name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n>          { name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n>          { name: 'Fall Symphony', class: 'fall-symphony-theme' },\n> -      ];\n> -      return { args, themes };\n> +      ].map((theme) => ({ ...theme, data: makeData() }));\n> +      return { args, themes };\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-check-list v-bind=\"args\" style=\"width: 300px\" />\n> +          <sd-check-list v-bind=\"args\" :data=\"theme.data\" style=\"width: 300px\" />\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `30-68`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Some `change.diff` values don‚Äôt match `value - prev`.**  \n> Example: the 2021-02-09 entry has `value: 7`, `prev: 4`, but `diff: -2`. Inconsistent diffs can render misleading arrows or deltas. Please recompute or correct the mismatches in this series.\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/controls/SdLinkButton/SdLinkButton.stories.ts (1)</summary><blockquote>\n> \n> `14-79`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n> \n> **Add an onClick action to the meta args so the play test doesn't fail.**\n> \n> The Default story's play function (line 78) calls `expect(args.onClick).toHaveBeenCalled()`, but `onClick` is not defined in either the Default story's args or the meta config. Without this mock function, the play test will throw an error at runtime and the action won't appear in Storybook. Add `onClick: fn()` to the meta args and define its argType.\n> \n> <details>\n> <summary>üõ†Ô∏è Suggested fix</summary>\n> \n> ```diff\n>  const meta = {\n>    title: 'Controls/SdLinkButton',\n>    component: SdLinkButton,\n>    tags: ['autodocs'],\n> +  args: {\n> +    onClick: fn(),\n> +  },\n>    argTypes: {\n> +    onClick: {\n> +      description: 'Emitted when the link button is clicked',\n> +      action: 'click',\n> +      table: { category: 'events' },\n> +    },\n>      default: {\n>        description: 'Default slot for the link button label content',\n>        control: { type: 'text' },\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/controls/SdButton/SdButtonLarge/SdButtonLarge.stories.ts (1)</summary><blockquote>\n> \n> `167-191`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **AllThemes story renders button without label content.**\n> \n> The `args: {}` provides no default slot content, so the button will appear empty in the theme showcase. Other button stories in the PR (e.g., `SdButtonChip.stories.ts` at Lines 121-148) provide meaningful args like `name: 'Example'`.\n> \n> \n> <details>\n> <summary>üîß Suggested fix to add default label</summary>\n> \n> ```diff\n>  export const AllThemes: Story = {\n> -  args: {},\n> +  args: {\n> +    default: 'Get Started',\n> +  },\n>    render: (args: any) => ({\n>      components: { SdButtonLarge },\n>      setup() {\n>        // ...\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-button-large v-bind=\"args\" />\n> +          <sd-button-large v-bind=\"args\">{{ args.default }}</sd-button-large>\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> \n> </blockquote></details>\n\n<details>\n<summary>ü§ñ Fix all issues with AI agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts`:\n- Around line 103-121: The story's play asserts args.onClick but args never\nprovides an onClick spy (and the button role may not render without\nclickability) ‚Äî update the story's args to include a spy and enable clicking\n(e.g., add onClick as a spy function and clickable: true), and keep the\nrender/template wiring (render, template, SdBullet, args) unchanged; create the\nspy using your test helper (jest.fn() or Storybook action helper) at top of the\nstory file so play can assert args.onClick was called when userEvent.click hits\nthe button.\n\nIn `@src/components/display/SdChart/SdChart.stories.ts`:\n- Around line 199-206: The play function currently uses canvas.getByText with a\nclass-check callback (canvas.getByText(...\nelement?.classList?.contains('sd-chart'))), which is incorrect; update the\nassertion in the play function to use a semantic or test-id query instead (e.g.,\nwithin(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts`:\n- Around line 102-119: The story's template sets ref=\"imgEl\" on the <img> but\nnever passes that reference to the SdCopyImage component, so the copy behavior\nisn't demonstrated; update the WithImagePreview render setup to create a Vue ref\n(import ref from 'vue'), assign it to the image element (e.g., imgEl), and pass\nit into the SdCopyImage via the imageElement prop (or imageElement: imgEl) and\nensure the `@copy` handler still uses args.onCopy; modify the render function in\nthe WithImagePreview story and add the ref import.\n\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`:\n- Around line 64-71: The story is using createMockGridParams(...) with an as any\noverride which bypasses TypeScript checks for renderer-specific props (useTitle,\ngetRowData, getGhostRowData, gridOptions, ghostRowData); replace that call with\nthe specialized factory createChildTableCellParams(...) from agGridMocks and\npass the same properties (useTitle, getRowData, getGhostRowData/ghostRowData,\ngridOptions) so types are enforced; update the import to pull\ncreateChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`:\n- Around line 72-76: The exported story named Error shadows the global Error and\ntriggers the noShadowRestrictedNames lint rule; rename the export (for example\nchange export const Error to export const ErrorState or KeywordError) and update\nany places that import or reference this story (docs, storybook configs, tests)\nto use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`:\n- Line 2: The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<details>\n<summary>üü° Minor comments (28)</summary><blockquote>\n\n<details>\n<summary>src/components/display/SdTable/SdTableGoogleIntegrations.stories.ts-301-306 (1)</summary><blockquote>\n\n`301-306`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Strengthen AllThemes play assertions to verify each label explicitly.**\n\nThe current regex can pass if any theme name appears elsewhere (e.g., inside table data), masking a missing theme label. It‚Äôs safer to assert each expected label individually.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n     await step('Verify theme grid renders correctly', async () => {\n-      const themeContainers = canvas.getAllByText(/Light|Dark|Nebula Surge|Mountain Cliff|Horizon Hopper|Fall Symphony/);\n-      expect(themeContainers.length).toBeGreaterThanOrEqual(6);\n+      const themeNames = [\n+        'Light',\n+        'Dark',\n+        'Nebula Surge',\n+        'Mountain Cliff',\n+        'Horizon Hopper',\n+        'Fall Symphony',\n+      ];\n+      themeNames.forEach((name) => {\n+        expect(canvas.getByText(name)).toBeTruthy();\n+      });\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/ColumnHeaders/SortColumnHeader/SortColumnHeader.stories.ts-127-139 (1)</summary><blockquote>\n\n`127-139`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function clicks header but doesn't verify the sort result.**\n\nThe interaction test triggers a sort click but lacks an assertion to verify the expected outcome. Consider asserting that a sort indicator appears or the sort state changes:\n\n\n\n<details>\n<summary>üß™ Suggested enhancement</summary>\n\n```diff\n     await step('Click header to trigger sort', async () => {\n       const headerName = canvas.getByText('Volume');\n       await userEvent.click(headerName);\n     });\n+\n+    await step('Verify sort indicator appears', async () => {\n+      // Assert sort arrow or aria-sort attribute is present\n+      const header = canvas.getByRole('button', { name: /volume/i });\n+      await expect(header).toHaveAttribute('aria-sort', 'ascending');\n+    });\n   },\n```\n\n</details>\n\nAdjust the selector and expected attribute based on how `SortColumnHeader` communicates sort state in the DOM.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdBadge/SdBadge.stories.ts-225-233 (1)</summary><blockquote>\n\n`225-233`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function step description doesn't match the assertion.**\n\nThe step says \"Click the secondary icon and verify action event\", but the test clicks the badge button and asserts `onClick` was called‚Äînot `onAction`. If the intent is to test the secondary icon's action callback, the assertion should verify `args.onAction` instead.\n\n\n\n<details>\n<summary>Proposed fix to align description and assertion</summary>\n\nIf testing the secondary icon action:\n```diff\n-    await step('Click the secondary icon and verify action event', async () => {\n-      const badge = canvas.getByRole('button');\n-      await userEvent.click(badge);\n-      await expect(args.onClick).toHaveBeenCalled();\n+    await step('Click badge and verify onClick handler called', async () => {\n+      const badge = canvas.getByRole('button');\n+      await userEvent.click(badge);\n+      await expect(args.onClick).toHaveBeenCalled();\n     });\n```\n\nOr, if you actually want to test the secondary icon triggering `onAction`, update the assertion (and possibly the selector to target the icon specifically).\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSerpList/SdSerpList.stories.ts-57-64 (1)</summary><blockquote>\n\n`57-64`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect use of `getByText` for class-based element selection.**\n\nThe `getByText` query is designed for text content matching, not class-based selection. The callback `((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false)` ignores the text parameter entirely, which makes this query semantically incorrect and potentially flaky.\n\nUse `canvasElement.querySelector` for class-based selection, or verify actual rendered text content instead.\n\n\n\n<details>\n<summary>üîß Proposed fix using querySelector</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n-   const canvas = within(canvasElement);\n-\n    await step('Verify the SERP list renders with grouped items', async () => {\n-     const root = canvas.getByText((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false);\n+     const root = canvasElement.querySelector('.sd-serp-list');\n      await expect(root).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBox.stories.ts-101-107 (1)</summary><blockquote>\n\n`101-107`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion may be brittle and mismatches step description.**\n\nThe step describes verifying \"plan tabs\" but actually asserts on a hardcoded price value (`$47`). If the Starter plan pricing changes, this test will fail without any actual regression. Consider asserting on a more stable element that aligns with the step description (e.g., checking for plan tab elements).\n\n\n\n<details>\n<summary>üí° Suggested improvement</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify pricing box renders with plan tabs', async () => {\n-      await expect(canvas.getByText('$47')).toBeInTheDocument();\n+      await expect(canvas.getByRole('tablist')).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, update the step description to match what's being tested:\n```diff\n-    await step('Verify pricing box renders with plan tabs', async () => {\n+    await step('Verify pricing box renders with price display', async () => {\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdVolumeTrends/SdVolumeTrends.stories.ts-96-103 (1)</summary><blockquote>\n\n`96-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Semantic mismatch: `getByText` used to query by CSS class.**\n\nThe play function uses `getByText` with a custom matcher that checks for a CSS class (`sd-volume-trends`), which is semantically incorrect. `getByText` is designed for finding elements by text content, not DOM structure.\n\n\n\n<details>\n<summary>üõ†Ô∏è Proposed fix using querySelector</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Volume trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-volume-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-volume-trends');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\n</details>\n\nAlternatively, if the component has a semantic role, prefer `getByRole` for better accessibility alignment.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemoItem/SdDemoItem.stories.ts-131-137 (1)</summary><blockquote>\n\n`131-137`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Missing `@click` handler wiring in template.**\n\nThe `AllFileTypes` story doesn't pass the `onClick` handler to the demo items, so click events won't appear in the Actions panel. This is inconsistent with the meta args that define `onClick: fn()`.\n\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n     template: `\n       <div style=\"display: flex; gap: 16px;\">\n-        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" `@click`=\"args.onClick\" />\n       </div>\n     `,\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPositionTrends/SdPositionTrends.stories.ts-93-100 (1)</summary><blockquote>\n\n`93-100`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect usage of `getByText` for class-based element selection.**\n\n`getByText` is designed to match elements by their text content, not by class name. The predicate function receives `(content, element)` where `content` is the text content being evaluated. Using it to check `classList.contains()` is a misuse of the API and may fail if the element doesn't have matching text.\n\n\n<details>\n<summary>üõ†Ô∏è Suggested fix using container query</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Position trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-position-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-position-trends');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\nAlternatively, consider adding a `data-testid=\"sd-position-trends\"` to the component and using `canvas.getByTestId('sd-position-trends')` for more idiomatic Testing Library usage.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/VolumeTrendCellRenderer/VolumeTrendCellRenderer.stories.ts-86-90 (1)</summary><blockquote>\n\n`86-90`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Minor inconsistency: month 1's `prev` value.**\n\nFor month 1, `prev` is set to `5000`, but other stories (trendData12Months, UpwardTrend, DownwardTrend) consistently use `prev: 0` for the first month since there's no preceding month to compare against.\n\n\n\n<details>\n<summary>Suggested fix for consistency</summary>\n\n```diff\n         trends: Array.from({ length: 12 }, (_, i) => ({\n           month: i + 1,\n           value: 5000,\n-          change: { prev: 5000, diff: 0 },\n+          change: { prev: i === 0 ? 0 : 5000, diff: 0 },\n         })),\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdFlag/SdFlag.stories.ts-48-59 (1)</summary><blockquote>\n\n`48-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid hardcoded alt text in the play assertion.**\n\nThe play test hardcodes `'US'`, so it will fail if `args.name` changes. Use `args.name` to derive the expected alt text.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }) => {\n+  play: async ({ canvasElement, step, args }) => {\n     const canvas = within(canvasElement);\n+    const expectedAlt = String(args.name).toUpperCase();\n\n     await step('Verify flag image is rendered', async () => {\n       const img = canvas.getByRole('img');\n       await expect(img).toBeInTheDocument();\n     });\n\n     await step('Verify alt text matches country code', async () => {\n       const img = canvas.getByRole('img');\n-      await expect(img).toHaveAttribute('alt', 'US');\n+      await expect(img).toHaveAttribute('alt', expectedAlt);\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DateAndTypeCellRenderer/DateAndTypeCellRenderer.stories.ts-140-147 (1)</summary><blockquote>\n\n`140-147`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Type the play function parameters for better type safety.**\n\nThe `({ canvasElement, step }: any)` parameter typing loses type safety. Storybook provides proper types for the play function context‚Äîuse them instead of `any`.\n\nHowever, the date format assertion is correct and not brittle: The component explicitly uses the hardcoded format string `'D.M.YYYY'` (see DateAndTypeCellRenderer.vue line 41), so `'15.6.2024'` is the expected output for input `'2024-06-15'` and will not break due to locale variations.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordDifficultyCellRenderer/KeywordDifficultyCellRenderer.stories.ts-6-10 (1)</summary><blockquote>\n\n`6-10`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**JSDoc difficulty thresholds are internally inconsistent.**\n\nThe meta description states \"green for easy (1-79)\" but the individual story JSDoc comments split this into Medium (40-79) at line 52 and Easy (1-39) at line 63. Either update the meta description to reflect four tiers or reconcile the individual story descriptions.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts-54-103 (1)</summary><blockquote>\n\n`54-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Add `showCode` property to `MockGridParams` type to eliminate `as any` cast.**\n\nThe `showCode` property used in the ShowCode story (line 59) is not defined in the `MockGridParams` interface at `.storybook/mocks/agGridMocks.ts`, forcing the `as any` cast. Add `showCode?: boolean;` to the `MockGridParams` interface to properly support this property without type bypass.\n\nAdditionally, remove `any` type annotations from line 83 (`play` function) and line 102 (`render` function) to let Storybook infer the correct types. These are Storybook CSF3 constructs with well-defined types provided by `@storybook/vue3-vite`.\n\n<details>\n<summary>Changes needed</summary>\n\nIn `.storybook/mocks/agGridMocks.ts`, add to the `MockGridParams` interface:\n\n```diff\n export interface MockGridParams {\n   value?: unknown;\n   valueFormatted?: string | unknown[];\n   data?: Record<string, unknown>;\n+  showCode?: boolean;\n   node?: MockNode;\n```\n\nIn `src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts`:\n\n```diff\n export const ShowCode: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'USA',\n-      showCode: true,\n-    } as any),\n+      showCode: true,\n+    }),\n   },\n };\n\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }) => {\n\n-  render: (args: any) => ({\n+  render: (args) => ({\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdEmoji/SdEmoji.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use `queryByRole` so the fallback is reachable.**\n\n`getByRole` throws when the role isn't found, so the `?? canvasElement.querySelector(...)` branch never runs. Use `queryByRole` to keep the intended fallback behavior.\n\n<details>\n<summary>üí° Suggested fix</summary>\n\n```diff\n-      const emoji = canvas.getByRole('img', { hidden: true })\n-        ?? canvasElement.querySelector('.sd-emoji');\n+      const emoji = canvas.queryByRole('img', { hidden: true })\n+        ?? canvasElement.querySelector('.sd-emoji');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdCopyImage/SdCopyImage.stories.ts-57-65 (1)</summary><blockquote>\n\n`57-65`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Same clipboard API concern as SdCopy.**\n\nThe play function may fail in headless CI environments due to clipboard permission requirements. See comment on SdCopy.stories.ts.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBoxCounter/SdPricingBoxCounter.stories.ts-179-205 (1)</summary><blockquote>\n\n`179-205`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the interaction story description with the actual action.**  \nThe docstring says ‚Äúclicking the increment button,‚Äù but the play function only focuses the input. Either update the text or change the play to click the increment control. Here‚Äôs a minimal text fix to match current behavior:\n\n<details>\n<summary>Suggested update</summary>\n\n```diff\n- * Interaction test: clicking the increment button\n+ * Interaction test: focusing the counter input\n...\n-    await step('Click the input to focus it', async () => {\n+    await step('Focus the counter input', async () => {\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts-86-88 (1)</summary><blockquote>\n\n`86-88`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the JSDoc with the actual play assertions.**\n\nThe description says the icon is verified, but the play function only checks the text. Either add an icon assertion or reword the description to avoid misleading docs.\n\n<details>\n<summary>‚úèÔ∏è Minimal fix (description)</summary>\n\n```diff\n-/**\n- * Verifies the keyword text and state icon are rendered in the DOM\n- */\n+/**\n+ * Verifies the keyword text is rendered in the DOM\n+ */\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-71-84 (1)</summary><blockquote>\n\n`71-84`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Normalize season distributions to 1.0 in story args (and docs snippet).**\n\nThese stories describe a *distribution* across four seasons, but the values currently sum > 1.0. This can mislead consumers and skew visual expectations. If the intent is a true distribution, normalize these to total 1.0 and keep the docs snippet aligned with the args.  \n\n\n<details>\n<summary>üîß Suggested normalization</summary>\n\n```diff\n-        code: html`<sd-seasonality :spring=\"0.18\" :summer=\"0.52\" :fall=\"0.35\" :winter=\"0.15\" />`,\n+        code: html`<sd-seasonality :spring=\"0.15\" :summer=\"0.4\" :fall=\"0.3\" :winter=\"0.15\" />`,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n\n-    spring: 0.25,\n-    summer: 0.85,\n-    fall: 0.1,\n-    winter: 0.05,\n+    spring: 0.05,\n+    summer: 0.85,\n+    fall: 0.05,\n+    winter: 0.05,\n\n-    spring: 0.08,\n-    summer: 0.05,\n-    fall: 0.22,\n-    winter: 0.9,\n+    spring: 0.03,\n+    summer: 0.02,\n+    fall: 0.05,\n+    winter: 0.9,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n```\n</details>\n\n\nAlso applies to: 107-112, 147-152, 203-208\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use a direct DOM query instead of `getByText` with class predicate in play function.**\n\nLine 89 uses `getByText` with a class predicate, which is non-idiomatic and can be flaky/ambiguous because it's text-driven. Use `querySelector` directly to query the root element.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-import { expect, within } from 'storybook/test';\n+import { expect } from 'storybook/test';\n\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Seasonality component is rendered with four season items', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-seasonality') ?? false);\n-      await expect(wrapper).toBeInTheDocument();\n+      const wrapper = canvasElement.querySelector('.sd-seasonality');\n+      expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemo.stories.ts-88-101 (1)</summary><blockquote>\n\n`88-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play test doesn‚Äôt assert the emitted payload.**  \nThe step description says it verifies the correct file type, but it only checks that the handler was called. Consider asserting the expected value to prevent silent regressions.  \n\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n       const cards = canvas.getAllByText(/Excel|CSV|Google Sheets/);\n       await userEvent.click(cards[0]);\n-      await expect(args.onSelect).toHaveBeenCalled();\n+      await expect(args.onSelect).toHaveBeenCalledWith(DemoFileTypes.Excel);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdLinkIcon/SdLinkIcon.stories.ts-143-162 (1)</summary><blockquote>\n\n`143-162`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**ToolbarGroup doesn't forward `args`, so controls/actions won't apply.**\n\nThe story hard-codes props for each icon and ignores `args.disabled` / `args.onClick`, so toggling controls won't affect the toolbar items and clicks won't show in Actions. Consider spreading `args` into each icon (and optionally disable the `name` control for this story).\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-        <sd-link-icon :name=\"IconTypes.Pencil\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Copy\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Trash\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Gear\" :size=\"args.size\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Pencil\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Copy\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Trash\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Gear\" />\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableSort/SdTableSortItem/SdTableSortItem.stories.ts-75-108 (1)</summary><blockquote>\n\n`75-108`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Make the play query resilient to multiple buttons.**\n\nLine 91 uses `getByRole('button')`, which will throw if more than one button is rendered. The component renders multiple buttons: two metric/sort type selectors (sd-dropdown-button elements) and a remove button (sd-link-icon). Use `getAllByRole` with a count assertion instead.\n\n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n\n```diff\n-    const sortItem = canvas.getByRole('button');\n-    await expect(sortItem).toBeInTheDocument();\n+    const buttons = canvas.getAllByRole('button');\n+    await expect(buttons.length).toBeGreaterThan(0);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/InsightsCellRenderer/InsightsCellRenderer.stories.ts-141-161 (1)</summary><blockquote>\n\n`141-161`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid `getByText` throwing before the fallback executes.**\n\n`getByText` throws when no text is present, so the fallback `querySelector` never runs. For icon-only renders, this causes the test to fail immediately instead of attempting the fallback query. Use `queryByText` instead.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-      const container = canvas.getByText(/./).closest('.insights-cell')\n-        ?? canvasElement.querySelector('.insights-cell');\n+      const container = canvas.queryByText(/./)?.closest('.insights-cell')\n+        ?? canvasElement.querySelector('.insights-cell');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableOverview.stories.ts-54-85 (1)</summary><blockquote>\n\n`54-85`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function won't execute due to `skip-test` tag.**\n\nThe Default story has both a play function (Lines 80-84) and `tags: ['skip-test']` (Line 55). The play function will never execute during test runs, making it effectively dead code.\n\nIf the circular import issue is resolved, consider removing the skip-test tag. Otherwise, removing the play function would reduce maintenance burden.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DeviceCellRenderer/DeviceCellRenderer.stories.ts-94-101 (1)</summary><blockquote>\n\n`94-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion is too permissive.**\n\nThe regex `/./ ` matches any single character, making this test pass even if the component renders incorrect or unrelated content. This doesn't verify that the device name is actually rendered.\n\n\n<details>\n<summary>üîß Suggested improvement for meaningful assertion</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify device cell content is rendered', async () => {\n-      const cell = canvas.getByText(/./);\n+      const cell = canvas.getByText(/desktop/i);\n       await expect(cell).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdMetaData/SdMetaData.stories.ts-64-83 (1)</summary><blockquote>\n\n`64-83`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Match the test assertion to the component's actual format behavior.**\n\nThe hardcoded `'12,345'` has two issues: it's locale-dependent, and it doesn't match what the component actually renders. The `SdMetaData` component defaults to `format='compact'`, which would render `12345` as `\"12K\"` (not `\"12,345\"`). The suggested `Intl.NumberFormat()` fix addresses the locale concern but produces the wrong output‚Äîit formats as decimal while the component uses compact.\n\nEither explicitly set `format: 'decimal'` in args and derive the expected value from vue-i18n's `n()` function (matching the component's actual formatter), or update the test to expect the compact format output. The former approach is recommended:\n\n<details>\n<summary>üîß Suggested adjustment</summary>\n\n```diff\nargs: {\n  title: 'Title',\n  value: 12345,\n+ format: 'decimal',\n},\nplay: async ({ canvasElement, step, args }: any) => {\n  const canvas = within(canvasElement);\n+ const { n } = useI18n();\n+ const formattedValue = n(args.value, args.format);\n\n  await step('Verify title and value are rendered', async () => {\n    await expect(canvas.getByText('Title')).toBeInTheDocument();\n-   await expect(canvas.getByText('12,345')).toBeInTheDocument();\n+   await expect(canvas.getByText(formattedValue)).toBeInTheDocument();\n  });\n},\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/features/analytics/SdDailyComparisonUrlList/SdDailyComparisonUrlList.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change the import path from `storybook/test` to `@storybook/test`.** Storybook 10.1.11 supports and recommends importing from `@storybook/test`, the official package. The unscoped `storybook/test` subpath import has shown compatibility issues in Storybook 10 and is not the standard API surface.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableMarket.stories.ts-59-59 (1)</summary><blockquote>\n\n`59-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change to `story` for consistency with the other stories in this file.**\n\nAll other stories in `SdTableMarket.stories.ts` use `docs.description.story` (CompetitorsKeywords, CompetitionOverview, DailyComparison, MarketChild, and PositionDistribution), so CompetitorsDomain should follow the same convention.\n\n<details>\n<summary>üõ†Ô∏è Proposed fix</summary>\n\n```diff\n-        component: 'Table view for the `Market Competitors Domain` section.',\n+        story: 'Table view for the `Market Competitors Domain` section.',\n```\n</details>\n\n</blockquote></details>\n\n</blockquote></details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
        "createdAt": "2026-02-03T07:32:44Z",
        "type": "review",
        "issue": "[NOTE]",
        "suggestion": ">  /**\n> - * All themes showcase - displays both link relation states across all available themes.\n> + * All themes showcase - displays the Dofollow link relation state across all available themes.\n>   */\n>"
      }
    ],
    "byFile": {
      "src/components/display/SdBullet/SdBullet.stories.ts": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFn",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Clickable story needs an `onClick` spy (and likely `clickable`) to make the play assertion valid.**\n\n`args.onClick` is never set, so the play assertion will throw. If SdBullet requires a `clickable` prop to render a button role, `getByRole('button')` will also fail. Please align this story with other Clickable patterns by providing an `onClick: fn()` and enabling clickability.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({\n```\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  args: {\n    active: true,\n    color: BulletColor.Indigo,\n    clickable: true,\n    onClick: fn(),\n  },\n  render: (args: any) => ({\n    components: { SdBullet },\n    setup() {\n      return { args };\n    },\n    template: '<SdBullet v-bind=\"args\" `@click`=\"args.onClick\" />',\n  }),\n  play: async ({ canvasElement, args, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Click bullet and verify handler called', async () => {\n      const bullet = canvas.getByRole('button');\n      await userEvent.click(bullet);\n      await expect(args.onClick).toHaveBeenCalled();\n    });\n```\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts` around lines 103 - 121,\nThe story's play asserts args.onClick but args never provides an onClick spy\n(and the button role may not render without clickability) ‚Äî update the story's\nargs to include a spy and enable clicking (e.g., add onClick as a spy function\nand clickable: true), and keep the render/template wiring (render, template,\nSdBullet, args) unchanged; create the spy using your test helper (jest.fn() or\nStorybook action helper) at top of the story file so play can assert\nargs.onClick was called when userEvent.click hits the button.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Clickable story needs an `onClick` spy (and likely `clickable`) to make the play assertion valid.**\n\n`args.onClick` is never set, so the play assertion will throw. If SdBullet requires a `clickable` prop to render a button role, `getByRole('button')` will also fail. Please align this story with other Clickable patterns by providing an `onClick: fn()` and enabling clickability.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  args: {\n    active: true,\n    color: BulletColor.Indigo,\n    clickable: true,\n    onClick: fn(),\n  },\n  render: (args: any) => ({\n    components: { SdBullet },\n    setup() {\n      return { args };\n    },\n    template: '<SdBullet v-bind=\"args\" `@click`=\"args.onClick\" />',\n  }),\n  play: async ({ canvasElement, args, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Click bullet and verify handler called', async () => {\n      const bullet = canvas.getByRole('button');\n      await userEvent.click(bullet);\n      await expect(args.onClick).toHaveBeenCalled();\n    });\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts` around lines 103 - 121,\nThe story's play asserts args.onClick but args never provides an onClick spy\n(and the button role may not render without clickability) ‚Äî update the story's\nargs to include a spy and enable clicking (e.g., add onClick as a spy function\nand clickable: true), and keep the render/template wiring (render, template,\nSdBullet, args) unchanged; create the spy using your test helper (jest.fn() or\nStorybook action helper) at top of the story file so play can assert\nargs.onClick was called when userEvent.click hits the button.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdBullet/SdBullet.stories.ts",
          "line": 103,
          "diffHunk": "@@ -93,6 +96,32 @@ export const MultiColor: Story = {\n   },\n };\n \n+/**\n+ * Clickable bullet that responds to user interaction\n+ */\n+export const Clickable: Story = {\n+  args: {\n+    active: true,\n+    color: BulletColor.Indigo,\n+  },\n+  render: (args: any) => ({\n+    components: { SdBullet },\n+    setup() {\n+      return { args };\n+    },\n+    template: '<SdBullet v-bind=\"args\" @click=\"args.onClick\" />',\n+  }),\n+  play: async ({ canvasElement, args, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Click bullet and verify handler called', async () => {\n+      const bullet = canvas.getByRole('button');\n+      await userEvent.click(bullet);\n+      await expect(args.onClick).toHaveBeenCalled();\n+    });",
          "isResolved": false,
          "suggestion": "export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({"
        }
      ],
      "src/components/display/SdChart/SdChart.stories.ts": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFw",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Play function assertion has incorrect query approach.**\n\nThe `getByText` with a class check callback is semantically incorrect. `getByText` is meant to find elements by their text content, not by CSS class. This assertion may pass accidentally if any text element happens to have ancestors with `.sd-chart`, but it doesn't properly verify the chart rendered.\n\n<details>\n<summary>üêõ Suggested fix using proper query</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, add a `data-testid` attribute to the chart component for more reliable testing.\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Chart wrapper is rendered', async () => {\n      // Query the chart container directly\n      const wrapper = canvasElement.querySelector('.sd-chart');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdChart/SdChart.stories.ts` around lines 199 - 206,\nThe play function currently uses canvas.getByText with a class-check callback\n(canvas.getByText(... element?.classList?.contains('sd-chart'))), which is\nincorrect; update the assertion in the play function to use a semantic or\ntest-id query instead (e.g., within(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Play function assertion has incorrect query approach.**\n\nThe `getByText` with a class check callback is semantically incorrect. `getByText` is meant to find elements by their text content, not by CSS class. This assertion may pass accidentally if any text element happens to have ancestors with `.sd-chart`, but it doesn't properly verify the chart rendered.\n\n\n<details>\n<summary>üêõ Suggested fix using proper query</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, add a `data-testid` attribute to the chart component for more reliable testing.\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Chart wrapper is rendered', async () => {\n      // Query the chart container directly\n      const wrapper = canvasElement.querySelector('.sd-chart');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdChart/SdChart.stories.ts` around lines 199 - 206,\nThe play function currently uses canvas.getByText with a class-check callback\n(canvas.getByText(... element?.classList?.contains('sd-chart'))), which is\nincorrect; update the assertion in the play function to use a semantic or\ntest-id query instead (e.g., within(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n```\n\n</details>\n\n<!-- fingerprinting:phantom:medusa:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdChart/SdChart.stories.ts",
          "line": 199,
          "diffHunk": "@@ -173,18 +196,29 @@ export const Line: Story = {\n       'Dataset 2': 'var(--lime)',\n     },\n   },\n+  play: async ({ canvasElement, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Chart wrapper is rendered', async () => {\n+      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      await expect(wrapper).toBeInTheDocument();\n+    });\n+  },",
          "isResolved": false,
          "suggestion": "play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },"
        }
      ],
      "src/components/display/SdCopyImage/SdCopyImage.stories.ts": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFx",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**The `imageElement` ref is defined but not wired to the component.**\n\nThe template defines `ref=\"imgEl\"` on the image element, but this ref is never passed to `sd-copy-image` via the `imageElement` prop. This story visually shows an image but doesn't actually demonstrate the copy-image functionality.\n\n<details>\n<summary>üêõ Proposed fix to wire up the image reference</summary>\n\n```diff\n export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };\n```\n\nYou'll also need to import `ref` from Vue at the top of the file:\n\n```typescript\nimport { ref } from 'vue';\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts` around lines 102 -\n119, The story's template sets ref=\"imgEl\" on the <img> but never passes that\nreference to the SdCopyImage component, so the copy behavior isn't demonstrated;\nupdate the WithImagePreview render setup to create a Vue ref (import ref from\n'vue'), assign it to the image element (e.g., imgEl), and pass it into the\nSdCopyImage via the imageElement prop (or imageElement: imgEl) and ensure the\n`@copy` handler still uses args.onCopy; modify the render function in the\nWithImagePreview story and add the ref import.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**The `imageElement` ref is defined but not wired to the component.**\n\nThe template defines `ref=\"imgEl\"` on the image element, but this ref is never passed to `sd-copy-image` via the `imageElement` prop. This story visually shows an image but doesn't actually demonstrate the copy-image functionality.\n\n\n\n<details>\n<summary>üêõ Proposed fix to wire up the image reference</summary>\n\n```diff\n export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };\n```\n\nYou'll also need to import `ref` from Vue at the top of the file:\n\n```typescript\nimport { ref } from 'vue';\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts` around lines 102 -\n119, The story's template sets ref=\"imgEl\" on the <img> but never passes that\nreference to the SdCopyImage component, so the copy behavior isn't demonstrated;\nupdate the WithImagePreview render setup to create a Vue ref (import ref from\n'vue'), assign it to the image element (e.g., imgEl), and pass it into the\nSdCopyImage via the imageElement prop (or imageElement: imgEl) and ensure the\n`@copy` handler still uses args.onCopy; modify the render function in the\nWithImagePreview story and add the ref import.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdCopyImage/SdCopyImage.stories.ts",
          "line": 102,
          "diffHunk": "@@ -31,15 +45,84 @@ const meta = {\n export default meta;\n type Story = StoryObj<typeof meta>;\n \n+/**\n+ * Default copy image button\n+ */\n export const Default: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n     setup() { return { args }; },\n     template: '<sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">Copy Image</sd-copy-image>',\n   }),\n+  play: async ({ canvasElement, args, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Click the copy image button', async () => {\n+      const button = canvas.getByRole('button');\n+      await userEvent.click(button);\n+      await expect(args.onCopy).toHaveBeenCalled();\n+    });\n+  },\n };\n \n+/**\n+ * Copy image button rendered as a custom HTML element\n+ */\n+export const WithCustomElement: Story = {\n+  args: {\n+    as: 'span',\n+  },\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: '<sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\" style=\"cursor: pointer; text-decoration: underline;\">Copy as span</sd-copy-image>',\n+  }),\n+};\n+\n+/**\n+ * Copy image button with scoped slot showing copied state\n+ */\n+export const ScopedSlot: Story = {\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: `\n+      <sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">\n+        <template #default=\"{ copied }\">\n+          {{ copied ? 'Image Copied!' : 'Click to copy image' }}\n+        </template>\n+      </sd-copy-image>\n+    `,\n+  }),\n+};\n+\n+/**\n+ * Copy image with an inline image element reference\n+ */\n+export const WithImagePreview: Story = {\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: `\n+      <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n+        <img\n+          ref=\"imgEl\"\n+          src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n+          alt=\"Sample image\"\n+          crossorigin=\"anonymous\"\n+          style=\"border-radius: 8px;\"\n+        />\n+        <sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">Copy This Image</sd-copy-image>\n+      </div>\n+    `,\n+  }),\n+};",
          "isResolved": false,
          "suggestion": "export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };"
        }
      ],
      "src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFz",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_üõ†Ô∏è Refactor suggestion_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\n# First, let's view the actual file to confirm the code structure\ncat -n src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts | head -80\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 3072\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the MockGridParams interface definition\nfd -e ts -e tsx | xargs rg -l \"MockGridParams\" | head -5\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 574\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Run the verification script to check how many cell renderer stories use this pattern\nrg -c 'createMockGridParams\\(.*as any\\)' src/components/display/SdTable/CellRenderers/\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check all instances of 'as any' used with createMockGridParams in this specific file\nrg -n 'createMockGridParams.*as any' src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for 'as any' in cell renderer stories\nrg 'as any' src/components/display/SdTable/CellRenderers/ -t ts --glob=\"*.stories.ts\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1652\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find MockGridParams interface definition\nrg -n \"interface MockGridParams|type MockGridParams\" --glob=\"*.ts\" --glob=\"*.tsx\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check the agGridMocks file mentioned in the import\nfd agGridMocks -e ts -e tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file content\ncat src/storybook-mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also check if there's a type definition file\nfd agGridMocks -e d.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the agGridMocks file\nfd agGridMocks\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also search for the file by content\nrg -l \"createMockGridParams\" --type ts --type tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 100\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for the definition of createMockGridParams\nrg \"export.*createMockGridParams|function createMockGridParams\" --type ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check tsconfig for path aliases\ncat tsconfig.json | head -50\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1409\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find all mocks directories\nfd -t d \"mocks|mock\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file at the correct location\ncat ./.storybook/mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 7967\n\n---\n\n</details>\n\n**Use specialized factory functions instead of `as any` workarounds.**\n\nThe `as any` assertions bypass TypeScript type safety for custom renderer-specific properties like `useTitle`, `getRowData`, `gridOptions`, and `ghostRowData`. This pattern is used across multiple cell renderer stories (at least 14 instances), indicating a systemic issue.\n\nThe `agGridMocks.ts` module already provides specialized factory functions for this purpose‚Äîfor example, `createChildTableCellParams()` is designed exactly for this renderer. Use the appropriate specialized function instead of `createMockGridParams()` with `as any` to maintain type safety and avoid potential property typos.\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`\naround lines 64 - 71, The story is using createMockGridParams(...) with an as\nany override which bypasses TypeScript checks for renderer-specific props\n(useTitle, getRowData, getGhostRowData, gridOptions, ghostRowData); replace that\ncall with the specialized factory createChildTableCellParams(...) from\nagGridMocks and pass the same properties (useTitle, getRowData,\ngetGhostRowData/ghostRowData, gridOptions) so types are enforced; update the\nimport to pull createChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n```\n\n</details>",
          "rawBody": "_üõ†Ô∏è Refactor suggestion_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\n# First, let's view the actual file to confirm the code structure\ncat -n src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts | head -80\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 3072\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the MockGridParams interface definition\nfd -e ts -e tsx | xargs rg -l \"MockGridParams\" | head -5\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 574\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Run the verification script to check how many cell renderer stories use this pattern\nrg -c 'createMockGridParams\\(.*as any\\)' src/components/display/SdTable/CellRenderers/\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check all instances of 'as any' used with createMockGridParams in this specific file\nrg -n 'createMockGridParams.*as any' src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for 'as any' in cell renderer stories\nrg 'as any' src/components/display/SdTable/CellRenderers/ -t ts --glob=\"*.stories.ts\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1652\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find MockGridParams interface definition\nrg -n \"interface MockGridParams|type MockGridParams\" --glob=\"*.ts\" --glob=\"*.tsx\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check the agGridMocks file mentioned in the import\nfd agGridMocks -e ts -e tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file content\ncat src/storybook-mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also check if there's a type definition file\nfd agGridMocks -e d.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the agGridMocks file\nfd agGridMocks\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also search for the file by content\nrg -l \"createMockGridParams\" --type ts --type tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 100\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for the definition of createMockGridParams\nrg \"export.*createMockGridParams|function createMockGridParams\" --type ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check tsconfig for path aliases\ncat tsconfig.json | head -50\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1409\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find all mocks directories\nfd -t d \"mocks|mock\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file at the correct location\ncat ./.storybook/mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 7967\n\n---\n\n\n\n</details>\n\n**Use specialized factory functions instead of `as any` workarounds.**\n\nThe `as any` assertions bypass TypeScript type safety for custom renderer-specific properties like `useTitle`, `getRowData`, `gridOptions`, and `ghostRowData`. This pattern is used across multiple cell renderer stories (at least 14 instances), indicating a systemic issue.\n\nThe `agGridMocks.ts` module already provides specialized factory functions for this purpose‚Äîfor example, `createChildTableCellParams()` is designed exactly for this renderer. Use the appropriate specialized function instead of `createMockGridParams()` with `as any` to maintain type safety and avoid potential property typos.\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`\naround lines 64 - 71, The story is using createMockGridParams(...) with an as\nany override which bypasses TypeScript checks for renderer-specific props\n(useTitle, getRowData, getGhostRowData, gridOptions, ghostRowData); replace that\ncall with the specialized factory createChildTableCellParams(...) from\nagGridMocks and pass the same properties (useTitle, getRowData,\ngetGhostRowData/ghostRowData, gridOptions) so types are enforced; update the\nimport to pull createChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts",
          "line": 64,
          "diffHunk": "@@ -26,41 +31,145 @@ const meta = {\n export default meta;\n type Story = StoryObj<typeof meta>;\n \n+const sampleColumnDefs = [\n+  { field: 'keyword', headerName: 'Keyword' },\n+  { field: 'volume', headerName: 'Volume' },\n+  { field: 'visibility', headerName: 'Visibility' },\n+  { field: 'traffic', headerName: 'Traffic' },\n+  { field: 'position', headerName: 'Position' },\n+];\n+\n const sampleRowData = [\n   {\n     keyword: 'seo software tool',\n     volume: { value: 123400 },\n     visibility: { value: 0.23, change: { prev: 0.1, diff: 0.13 } },\n     traffic: { value: 56700, change: { prev: 56500, diff: 200 } },\n     position: { value: 23, change: { prev: 33, diff: 10 } },\n-    visualRank: { value: 2, change: { prev: 1, diff: 1 } },\n-    pixelRank: { value: 120, change: { prev: 250, diff: 130 } },\n-    adsValue: { value: 1200, change: { prev: 1000, diff: 200 } },\n+  },\n+  {\n+    keyword: 'keyword tracking',\n+    volume: { value: 45000 },\n+    visibility: { value: 0.45, change: { prev: 0.4, diff: 0.05 } },\n+    traffic: { value: 12300, change: { prev: 11000, diff: 1300 } },\n+    position: { value: 5, change: { prev: 8, diff: 3 } },\n   },\n ];\n \n-const sampleColumnDefs = [\n-  { field: 'keyword', headerName: 'Keyword' },\n-  { field: 'volume', headerName: 'Volume' },\n-  { field: 'visibility', headerName: 'Visibility' },\n-  { field: 'traffic', headerName: 'Traffic' },\n-  { field: 'position', headerName: 'Position' },\n-];\n+/**\n+ * Default child table with sample keyword data\n+ */\n+export const Default: Story = {\n+  args: {\n+    params: createMockGridParams({\n+      columnDefs: sampleColumnDefs,\n+      useTitle: () => 'Keyword Breakdown',\n+      getRowData: () => sampleRowData,\n+      getGhostRowData: () => [],\n+      gridOptions: {},\n+      ghostRowData: [],\n+    } as any),",
          "isResolved": false
        }
      ],
      "src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgF1",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Rename the `Error` story to avoid shadowing the global `Error`.**\n\nBiome flags this as a lint error (`noShadowRestrictedNames`). It can break lint CI. Rename the export (and update any doc references if needed).\n\n<details>\n<summary>‚úÖ Proposed fix</summary>\n\n```diff\n-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };\n```\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n/**\n * Keyword in error state with X-mark circle icon and error gradient\n */\nexport const ErrorState: Story = {\n  args: {\n```\n\n</details>\n\n<details>\n<summary>üß∞ Tools</summary>\n\n<details>\n<summary>ü™õ Biome (2.3.13)</summary>\n\n[error] 75-75: Do not shadow the global \"Error\" property.\n\nConsider renaming this variable. It's easy to confuse the origin of variables when they're named after a known global.\n\n(lint/suspicious/noShadowRestrictedNames)\n\n</details>\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`\naround lines 72 - 76, The exported story named Error shadows the global Error\nand triggers the noShadowRestrictedNames lint rule; rename the export (for\nexample change export const Error to export const ErrorState or KeywordError)\nand update any places that import or reference this story (docs, storybook\nconfigs, tests) to use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Rename the `Error` story to avoid shadowing the global `Error`.**\n\nBiome flags this as a lint error (`noShadowRestrictedNames`). It can break lint CI. Rename the export (and update any doc references if needed).\n\n<details>\n<summary>‚úÖ Proposed fix</summary>\n\n```diff\n-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n/**\n * Keyword in error state with X-mark circle icon and error gradient\n */\nexport const ErrorState: Story = {\n  args: {\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>üß∞ Tools</summary>\n\n<details>\n<summary>ü™õ Biome (2.3.13)</summary>\n\n[error] 75-75: Do not shadow the global \"Error\" property.\n\nConsider renaming this variable. It's easy to confuse the origin of variables when they're named after a known global.\n\n(lint/suspicious/noShadowRestrictedNames)\n\n</details>\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`\naround lines 72 - 76, The exported story named Error shadows the global Error\nand triggers the noShadowRestrictedNames lint rule; rename the export (for\nexample change export const Error to export const ErrorState or KeywordError)\nand update any places that import or reference this story (docs, storybook\nconfigs, tests) to use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts",
          "line": 72,
          "diffHunk": "@@ -65,20 +70,79 @@ export const InProgress: Story = {\n };\n \n /**\n- * Keyword in error state.\n+ * Keyword in error state with X-mark circle icon and error gradient\n  */\n export const Error: Story = {\n   args: {",
          "isResolved": false,
          "suggestion": "-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };"
        }
      ],
      "src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts": [
        {
          "id": "PRRC_kwDOQ5kgRs6kXgF8",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\nfind . -name \"PositionTrendCellRenderer.stories.ts\" -type f\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 182\n\n---\n\nüèÅ Script executed:\n\n```shell\ncat -n ./src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 8700\n\n---\n\nüåê Web query:\n\n`Testing Library getByRole throws error when element not found`\n\nüí° Result:\n\n`getByRole` **is supposed to throw** when it can‚Äôt find a match (or when it finds more than one match). That‚Äôs how all `getBy*` queries behave in Testing Library. Use a different query depending on what you‚Äôre testing: ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### What to use instead\n\n- **Asserting it is *not* present** (no throw):\n  ```js\n  expect(screen.queryByRole('button', { name: /save/i })).not.toBeInTheDocument()\n  ```\n  `queryBy*` returns `null` when not found. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n- **Element appears asynchronously** (wait + throw if it never appears):\n  ```js\n  const btn = await screen.findByRole('button', { name: /save/i })\n  ```\n  `findBy*` retries until timeout, then rejects. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### Common ‚Äúfound in DOM but not by role‚Äù gotchas\n\n- The element might be **hidden/inaccessible**, so `getByRole` won‚Äôt match unless you include hidden elements:\n  ```js\n  screen.getByRole('button', { name: /save/i, hidden: true })\n  ```\n  ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\n- The **role or accessible name** might not be what you think (Testing Library uses the accessibility tree). When `getByRole` throws, read the ‚ÄúHere are the available roles‚Äù section in the error to see what it *can* access. ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\nCitations:\n\n- 1: https://testing-library.com/docs/queries/about?utm_source=openai\n- 2: https://testing-library.com/docs/queries/about?utm_source=openai\n- 3: https://testing-library.com/docs/queries/about?utm_source=openai\n- 4: https://testing-library.com/docs/queries/byrole?utm_source=openai\n- 5: https://testing-library.com/docs/queries/byrole?utm_source=openai\n\n---\n\n</details>\n\n**Use `queryByRole` with proper fallback logic to prevent test failure when the element lacks `role=\"img\"`.**\n\nWhen `getByRole` doesn't find a match, it throws an error immediately‚Äîthe OR operator never evaluates the fallback selector. Use `queryByRole` (which returns `null` instead of throwing) or `findByRole` with proper fallback handling.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\nawait step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`\nat line 2, The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\nfind . -name \"PositionTrendCellRenderer.stories.ts\" -type f\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 182\n\n---\n\nüèÅ Script executed:\n\n```shell\ncat -n ./src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 8700\n\n---\n\nüåê Web query:\n\n`Testing Library getByRole throws error when element not found`\n\nüí° Result:\n\n`getByRole` **is supposed to throw** when it can‚Äôt find a match (or when it finds more than one match). That‚Äôs how all `getBy*` queries behave in Testing Library. Use a different query depending on what you‚Äôre testing: ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### What to use instead\n\n- **Asserting it is *not* present** (no throw):\n  ```js\n  expect(screen.queryByRole('button', { name: /save/i })).not.toBeInTheDocument()\n  ```\n  `queryBy*` returns `null` when not found. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n- **Element appears asynchronously** (wait + throw if it never appears):\n  ```js\n  const btn = await screen.findByRole('button', { name: /save/i })\n  ```\n  `findBy*` retries until timeout, then rejects. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### Common ‚Äúfound in DOM but not by role‚Äù gotchas\n\n- The element might be **hidden/inaccessible**, so `getByRole` won‚Äôt match unless you include hidden elements:\n  ```js\n  screen.getByRole('button', { name: /save/i, hidden: true })\n  ```\n  ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\n- The **role or accessible name** might not be what you think (Testing Library uses the accessibility tree). When `getByRole` throws, read the ‚ÄúHere are the available roles‚Äù section in the error to see what it *can* access. ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\nCitations:\n\n- 1: https://testing-library.com/docs/queries/about?utm_source=openai\n- 2: https://testing-library.com/docs/queries/about?utm_source=openai\n- 3: https://testing-library.com/docs/queries/about?utm_source=openai\n- 4: https://testing-library.com/docs/queries/byrole?utm_source=openai\n- 5: https://testing-library.com/docs/queries/byrole?utm_source=openai\n\n---\n\n\n\n</details>\n\n**Use `queryByRole` with proper fallback logic to prevent test failure when the element lacks `role=\"img\"`.**\n\nWhen `getByRole` doesn't find a match, it throws an error immediately‚Äîthe OR operator never evaluates the fallback selector. Use `queryByRole` (which returns `null` instead of throwing) or `findByRole` with proper fallback handling.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\nawait step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`\nat line 2, The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:44Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts",
          "line": 2,
          "diffHunk": "@@ -1,30 +1,36 @@\n import type { Meta, StoryObj } from '@storybook/vue3-vite';\n+import { expect, within } from 'storybook/test';",
          "isResolved": false,
          "suggestion": "await step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});"
        }
      ]
    }
  },
  "reviews": {
    "summary": [
      {
        "author": "copilot-pull-request-reviewer",
        "state": "COMMENTED",
        "submittedAt": "2026-02-03T06:27:19Z",
        "body": "Copilot encountered an error and was unable to review this pull request. You can try again by re-requesting a review.",
        "commentCount": 0
      },
      {
        "author": "coderabbitai",
        "state": "COMMENTED",
        "submittedAt": "2026-02-03T07:32:44Z",
        "body": "**Actionable comments posted: 6**\n\n> [!NOTE]\n> Due to the large number of review comments, Critical, Major severity comments were prioritized as inline comments.\n\n> [!CAUTION]\n> Some comments are outside the diff and can‚Äôt be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>‚ö†Ô∏è Outside diff range comments (8)</summary><blockquote>\n> \n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/LinkRelationCellRenderer/LinkRelationCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `98-130`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **JSDoc description doesn't match implementation.**\n> \n> The JSDoc states \"displays both link relation states across all available themes\" but the implementation only renders a single state (`value: true`). Either update the documentation to accurately describe the single-state showcase, or modify the template to render both states per theme.\n> \n> \n> \n> <details>\n> <summary>Option 1: Fix JSDoc to match implementation</summary>\n> \n> ```diff\n>  /**\n> - * All themes showcase - displays both link relation states across all available themes.\n> + * All themes showcase - displays the Dofollow link relation state across all available themes.\n>   */\n> ```\n> </details>\n> \n> <details>\n> <summary>Option 2: Render both states per theme</summary>\n> \n> ```diff\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <link-relation-cell-renderer v-bind=\"args\" />\n> +          <div style=\"display: flex; gap: 8px;\">\n> +            <link-relation-cell-renderer :params=\"{ value: true }\" />\n> +            <link-relation-cell-renderer :params=\"{ value: false }\" />\n> +          </div>\n>          </div>\n>        </div>\n>      `,\n> ```\n> \n> Note: If choosing Option 2, you may need to wrap the params with `createMockGridParams` depending on component requirements.\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/SdTableTags.stories.ts (1)</summary><blockquote>\n> \n> `148-176`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **AllThemes likely renders an empty/misconfigured table.**\n> \n> `AllThemes` doesn‚Äôt pass `columnDefs`, `rowData`, or `gridOptions`, so the table may render without data or required configuration. Consider reusing `Default.args` and passing `gridOptions` like the `Table` render does.  \n> \n> \n> <details>\n> <summary>üõ†Ô∏è Suggested fix</summary>\n> \n> ```diff\n>  export const AllThemes: Story = {\n> +  args: { ...Default.args },\n>    render: (args: any) => ({\n>      components: { SdTable },\n>      setup() {\n> +      const gridOptions = createGridOptions();\n>        const themes = [\n>          { name: 'Light', class: 'wope-light-theme' },\n>          { name: 'Dark', class: 'wope-dark-theme' },\n>          { name: 'Nebula Surge', class: 'nebula-surge-theme' },\n>          { name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n>          { name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n>          { name: 'Fall Symphony', class: 'fall-symphony-theme' },\n>        ];\n> -      return { args, themes };\n> +      return { args, themes, gridOptions };\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-table v-bind=\"args\" style=\"width: 400px; height: 256px\" />\n> +          <sd-table v-bind=\"args\" :grid-options=\"gridOptions\" style=\"width: 400px; height: 256px\" />\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/SdTablePerformance.stories.ts (1)</summary><blockquote>\n> \n> `1494-1494`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n> \n> **Fix `summaryColumnDefs()` call in AllThemes story to include required configuration parameters.**\n> \n> Line 1494 calls `summaryColumnDefs()` without arguments, but the function requires an object with `lastDate`, `location`, and `language` properties. The function uses `lastDate` to format column headers via `dayjs(lastDate).format('MMM D')` and passes `location` and `language` to cell components. Calling it without arguments will cause runtime errors. Update to match the Default story pattern (line 56):\n> \n> ```javascript\n> summaryColumnDefs({\n>   lastDate: '2021-02-02',\n>   location: { countryCode: 'USA' },\n>   language: { locale: 'en_US' }\n> })\n> ```\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/VolumeBestCellRenderer/VolumeBestCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `33-39`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Make story data deterministic (avoid `new Date()` in args).**\n> \n> Using the current month means the rendered output changes over time, which can cause flaky snapshots and inconsistent docs. Prefer a fixed sample month shared across stories.  \n> \n> \n> <details>\n> <summary>üîß Suggested change (deterministic sample month)</summary>\n> \n> ```diff\n>  type Story = StoryObj<typeof meta>;\n> +const SAMPLE_MONTH = 1;\n> \n>  export const Default: Story = {\n>    args: {\n>      params: createMockGridParams({\n>        value: {\n> -        months: [new Date().getMonth() + 1],\n> +        months: [SAMPLE_MONTH],\n>          value: 8000,\n>        },\n>      }),\n>    },\n>  };\n> \n>  export const AllThemes: Story = {\n>    args: {\n>      params: createMockGridParams({\n>        value: {\n> -        months: [new Date().getMonth() + 1],\n> +        months: [SAMPLE_MONTH],\n>          value: 8000,\n>        },\n>      }),\n>    },\n> ```\n> </details>\n> \n> \n> Also applies to: 116-121\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdCheckList/SdCheckList.stories.ts (1)</summary><blockquote>\n> \n> `158-185`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Clone data per theme to prevent state synchronization across instances.**\n> \n> AllThemes renders six SdCheckList instances that all reference the same `args.data` array. Since SdTree (used by SdCheckList) uses `vue3-tree` with `v-model:nodes`, interaction mutations propagate back to the original array‚Äîtoggling a checkbox in one theme will update all others. Each theme should have its own isolated data copy.\n> \n> <details>\n> <summary>üîß Suggested adjustment (per-theme data clone)</summary>\n> \n> ```diff\n>    render: (args: any) => ({\n>      components: { SdCheckList },\n>      setup() {\n> +      const makeData = () => structuredClone(args.data ?? sampleData);\n>        const themes = [\n>          { name: 'Light', class: 'wope-light-theme' },\n>          { name: 'Dark', class: 'wope-dark-theme' },\n>          { name: 'Nebula Surge', class: 'nebula-surge-theme' },\n>          { name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n>          { name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n>          { name: 'Fall Symphony', class: 'fall-symphony-theme' },\n> -      ];\n> -      return { args, themes };\n> +      ].map((theme) => ({ ...theme, data: makeData() }));\n> +      return { args, themes };\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-check-list v-bind=\"args\" style=\"width: 300px\" />\n> +          <sd-check-list v-bind=\"args\" :data=\"theme.data\" style=\"width: 300px\" />\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `30-68`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Some `change.diff` values don‚Äôt match `value - prev`.**  \n> Example: the 2021-02-09 entry has `value: 7`, `prev: 4`, but `diff: -2`. Inconsistent diffs can render misleading arrows or deltas. Please recompute or correct the mismatches in this series.\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/controls/SdLinkButton/SdLinkButton.stories.ts (1)</summary><blockquote>\n> \n> `14-79`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n> \n> **Add an onClick action to the meta args so the play test doesn't fail.**\n> \n> The Default story's play function (line 78) calls `expect(args.onClick).toHaveBeenCalled()`, but `onClick` is not defined in either the Default story's args or the meta config. Without this mock function, the play test will throw an error at runtime and the action won't appear in Storybook. Add `onClick: fn()` to the meta args and define its argType.\n> \n> <details>\n> <summary>üõ†Ô∏è Suggested fix</summary>\n> \n> ```diff\n>  const meta = {\n>    title: 'Controls/SdLinkButton',\n>    component: SdLinkButton,\n>    tags: ['autodocs'],\n> +  args: {\n> +    onClick: fn(),\n> +  },\n>    argTypes: {\n> +    onClick: {\n> +      description: 'Emitted when the link button is clicked',\n> +      action: 'click',\n> +      table: { category: 'events' },\n> +    },\n>      default: {\n>        description: 'Default slot for the link button label content',\n>        control: { type: 'text' },\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/controls/SdButton/SdButtonLarge/SdButtonLarge.stories.ts (1)</summary><blockquote>\n> \n> `167-191`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **AllThemes story renders button without label content.**\n> \n> The `args: {}` provides no default slot content, so the button will appear empty in the theme showcase. Other button stories in the PR (e.g., `SdButtonChip.stories.ts` at Lines 121-148) provide meaningful args like `name: 'Example'`.\n> \n> \n> <details>\n> <summary>üîß Suggested fix to add default label</summary>\n> \n> ```diff\n>  export const AllThemes: Story = {\n> -  args: {},\n> +  args: {\n> +    default: 'Get Started',\n> +  },\n>    render: (args: any) => ({\n>      components: { SdButtonLarge },\n>      setup() {\n>        // ...\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-button-large v-bind=\"args\" />\n> +          <sd-button-large v-bind=\"args\">{{ args.default }}</sd-button-large>\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> \n> </blockquote></details>\n\n<details>\n<summary>ü§ñ Fix all issues with AI agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts`:\n- Around line 103-121: The story's play asserts args.onClick but args never\nprovides an onClick spy (and the button role may not render without\nclickability) ‚Äî update the story's args to include a spy and enable clicking\n(e.g., add onClick as a spy function and clickable: true), and keep the\nrender/template wiring (render, template, SdBullet, args) unchanged; create the\nspy using your test helper (jest.fn() or Storybook action helper) at top of the\nstory file so play can assert args.onClick was called when userEvent.click hits\nthe button.\n\nIn `@src/components/display/SdChart/SdChart.stories.ts`:\n- Around line 199-206: The play function currently uses canvas.getByText with a\nclass-check callback (canvas.getByText(...\nelement?.classList?.contains('sd-chart'))), which is incorrect; update the\nassertion in the play function to use a semantic or test-id query instead (e.g.,\nwithin(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts`:\n- Around line 102-119: The story's template sets ref=\"imgEl\" on the <img> but\nnever passes that reference to the SdCopyImage component, so the copy behavior\nisn't demonstrated; update the WithImagePreview render setup to create a Vue ref\n(import ref from 'vue'), assign it to the image element (e.g., imgEl), and pass\nit into the SdCopyImage via the imageElement prop (or imageElement: imgEl) and\nensure the `@copy` handler still uses args.onCopy; modify the render function in\nthe WithImagePreview story and add the ref import.\n\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`:\n- Around line 64-71: The story is using createMockGridParams(...) with an as any\noverride which bypasses TypeScript checks for renderer-specific props (useTitle,\ngetRowData, getGhostRowData, gridOptions, ghostRowData); replace that call with\nthe specialized factory createChildTableCellParams(...) from agGridMocks and\npass the same properties (useTitle, getRowData, getGhostRowData/ghostRowData,\ngridOptions) so types are enforced; update the import to pull\ncreateChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`:\n- Around line 72-76: The exported story named Error shadows the global Error and\ntriggers the noShadowRestrictedNames lint rule; rename the export (for example\nchange export const Error to export const ErrorState or KeywordError) and update\nany places that import or reference this story (docs, storybook configs, tests)\nto use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`:\n- Line 2: The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<details>\n<summary>üü° Minor comments (28)</summary><blockquote>\n\n<details>\n<summary>src/components/display/SdTable/SdTableGoogleIntegrations.stories.ts-301-306 (1)</summary><blockquote>\n\n`301-306`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Strengthen AllThemes play assertions to verify each label explicitly.**\n\nThe current regex can pass if any theme name appears elsewhere (e.g., inside table data), masking a missing theme label. It‚Äôs safer to assert each expected label individually.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n     await step('Verify theme grid renders correctly', async () => {\n-      const themeContainers = canvas.getAllByText(/Light|Dark|Nebula Surge|Mountain Cliff|Horizon Hopper|Fall Symphony/);\n-      expect(themeContainers.length).toBeGreaterThanOrEqual(6);\n+      const themeNames = [\n+        'Light',\n+        'Dark',\n+        'Nebula Surge',\n+        'Mountain Cliff',\n+        'Horizon Hopper',\n+        'Fall Symphony',\n+      ];\n+      themeNames.forEach((name) => {\n+        expect(canvas.getByText(name)).toBeTruthy();\n+      });\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/ColumnHeaders/SortColumnHeader/SortColumnHeader.stories.ts-127-139 (1)</summary><blockquote>\n\n`127-139`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function clicks header but doesn't verify the sort result.**\n\nThe interaction test triggers a sort click but lacks an assertion to verify the expected outcome. Consider asserting that a sort indicator appears or the sort state changes:\n\n\n\n<details>\n<summary>üß™ Suggested enhancement</summary>\n\n```diff\n     await step('Click header to trigger sort', async () => {\n       const headerName = canvas.getByText('Volume');\n       await userEvent.click(headerName);\n     });\n+\n+    await step('Verify sort indicator appears', async () => {\n+      // Assert sort arrow or aria-sort attribute is present\n+      const header = canvas.getByRole('button', { name: /volume/i });\n+      await expect(header).toHaveAttribute('aria-sort', 'ascending');\n+    });\n   },\n```\n\n</details>\n\nAdjust the selector and expected attribute based on how `SortColumnHeader` communicates sort state in the DOM.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdBadge/SdBadge.stories.ts-225-233 (1)</summary><blockquote>\n\n`225-233`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function step description doesn't match the assertion.**\n\nThe step says \"Click the secondary icon and verify action event\", but the test clicks the badge button and asserts `onClick` was called‚Äînot `onAction`. If the intent is to test the secondary icon's action callback, the assertion should verify `args.onAction` instead.\n\n\n\n<details>\n<summary>Proposed fix to align description and assertion</summary>\n\nIf testing the secondary icon action:\n```diff\n-    await step('Click the secondary icon and verify action event', async () => {\n-      const badge = canvas.getByRole('button');\n-      await userEvent.click(badge);\n-      await expect(args.onClick).toHaveBeenCalled();\n+    await step('Click badge and verify onClick handler called', async () => {\n+      const badge = canvas.getByRole('button');\n+      await userEvent.click(badge);\n+      await expect(args.onClick).toHaveBeenCalled();\n     });\n```\n\nOr, if you actually want to test the secondary icon triggering `onAction`, update the assertion (and possibly the selector to target the icon specifically).\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSerpList/SdSerpList.stories.ts-57-64 (1)</summary><blockquote>\n\n`57-64`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect use of `getByText` for class-based element selection.**\n\nThe `getByText` query is designed for text content matching, not class-based selection. The callback `((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false)` ignores the text parameter entirely, which makes this query semantically incorrect and potentially flaky.\n\nUse `canvasElement.querySelector` for class-based selection, or verify actual rendered text content instead.\n\n\n\n<details>\n<summary>üîß Proposed fix using querySelector</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n-   const canvas = within(canvasElement);\n-\n    await step('Verify the SERP list renders with grouped items', async () => {\n-     const root = canvas.getByText((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false);\n+     const root = canvasElement.querySelector('.sd-serp-list');\n      await expect(root).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBox.stories.ts-101-107 (1)</summary><blockquote>\n\n`101-107`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion may be brittle and mismatches step description.**\n\nThe step describes verifying \"plan tabs\" but actually asserts on a hardcoded price value (`$47`). If the Starter plan pricing changes, this test will fail without any actual regression. Consider asserting on a more stable element that aligns with the step description (e.g., checking for plan tab elements).\n\n\n\n<details>\n<summary>üí° Suggested improvement</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify pricing box renders with plan tabs', async () => {\n-      await expect(canvas.getByText('$47')).toBeInTheDocument();\n+      await expect(canvas.getByRole('tablist')).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, update the step description to match what's being tested:\n```diff\n-    await step('Verify pricing box renders with plan tabs', async () => {\n+    await step('Verify pricing box renders with price display', async () => {\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdVolumeTrends/SdVolumeTrends.stories.ts-96-103 (1)</summary><blockquote>\n\n`96-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Semantic mismatch: `getByText` used to query by CSS class.**\n\nThe play function uses `getByText` with a custom matcher that checks for a CSS class (`sd-volume-trends`), which is semantically incorrect. `getByText` is designed for finding elements by text content, not DOM structure.\n\n\n\n<details>\n<summary>üõ†Ô∏è Proposed fix using querySelector</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Volume trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-volume-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-volume-trends');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\n</details>\n\nAlternatively, if the component has a semantic role, prefer `getByRole` for better accessibility alignment.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemoItem/SdDemoItem.stories.ts-131-137 (1)</summary><blockquote>\n\n`131-137`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Missing `@click` handler wiring in template.**\n\nThe `AllFileTypes` story doesn't pass the `onClick` handler to the demo items, so click events won't appear in the Actions panel. This is inconsistent with the meta args that define `onClick: fn()`.\n\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n     template: `\n       <div style=\"display: flex; gap: 16px;\">\n-        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" `@click`=\"args.onClick\" />\n       </div>\n     `,\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPositionTrends/SdPositionTrends.stories.ts-93-100 (1)</summary><blockquote>\n\n`93-100`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect usage of `getByText` for class-based element selection.**\n\n`getByText` is designed to match elements by their text content, not by class name. The predicate function receives `(content, element)` where `content` is the text content being evaluated. Using it to check `classList.contains()` is a misuse of the API and may fail if the element doesn't have matching text.\n\n\n<details>\n<summary>üõ†Ô∏è Suggested fix using container query</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Position trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-position-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-position-trends');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\nAlternatively, consider adding a `data-testid=\"sd-position-trends\"` to the component and using `canvas.getByTestId('sd-position-trends')` for more idiomatic Testing Library usage.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/VolumeTrendCellRenderer/VolumeTrendCellRenderer.stories.ts-86-90 (1)</summary><blockquote>\n\n`86-90`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Minor inconsistency: month 1's `prev` value.**\n\nFor month 1, `prev` is set to `5000`, but other stories (trendData12Months, UpwardTrend, DownwardTrend) consistently use `prev: 0` for the first month since there's no preceding month to compare against.\n\n\n\n<details>\n<summary>Suggested fix for consistency</summary>\n\n```diff\n         trends: Array.from({ length: 12 }, (_, i) => ({\n           month: i + 1,\n           value: 5000,\n-          change: { prev: 5000, diff: 0 },\n+          change: { prev: i === 0 ? 0 : 5000, diff: 0 },\n         })),\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdFlag/SdFlag.stories.ts-48-59 (1)</summary><blockquote>\n\n`48-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid hardcoded alt text in the play assertion.**\n\nThe play test hardcodes `'US'`, so it will fail if `args.name` changes. Use `args.name` to derive the expected alt text.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }) => {\n+  play: async ({ canvasElement, step, args }) => {\n     const canvas = within(canvasElement);\n+    const expectedAlt = String(args.name).toUpperCase();\n\n     await step('Verify flag image is rendered', async () => {\n       const img = canvas.getByRole('img');\n       await expect(img).toBeInTheDocument();\n     });\n\n     await step('Verify alt text matches country code', async () => {\n       const img = canvas.getByRole('img');\n-      await expect(img).toHaveAttribute('alt', 'US');\n+      await expect(img).toHaveAttribute('alt', expectedAlt);\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DateAndTypeCellRenderer/DateAndTypeCellRenderer.stories.ts-140-147 (1)</summary><blockquote>\n\n`140-147`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Type the play function parameters for better type safety.**\n\nThe `({ canvasElement, step }: any)` parameter typing loses type safety. Storybook provides proper types for the play function context‚Äîuse them instead of `any`.\n\nHowever, the date format assertion is correct and not brittle: The component explicitly uses the hardcoded format string `'D.M.YYYY'` (see DateAndTypeCellRenderer.vue line 41), so `'15.6.2024'` is the expected output for input `'2024-06-15'` and will not break due to locale variations.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordDifficultyCellRenderer/KeywordDifficultyCellRenderer.stories.ts-6-10 (1)</summary><blockquote>\n\n`6-10`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**JSDoc difficulty thresholds are internally inconsistent.**\n\nThe meta description states \"green for easy (1-79)\" but the individual story JSDoc comments split this into Medium (40-79) at line 52 and Easy (1-39) at line 63. Either update the meta description to reflect four tiers or reconcile the individual story descriptions.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts-54-103 (1)</summary><blockquote>\n\n`54-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Add `showCode` property to `MockGridParams` type to eliminate `as any` cast.**\n\nThe `showCode` property used in the ShowCode story (line 59) is not defined in the `MockGridParams` interface at `.storybook/mocks/agGridMocks.ts`, forcing the `as any` cast. Add `showCode?: boolean;` to the `MockGridParams` interface to properly support this property without type bypass.\n\nAdditionally, remove `any` type annotations from line 83 (`play` function) and line 102 (`render` function) to let Storybook infer the correct types. These are Storybook CSF3 constructs with well-defined types provided by `@storybook/vue3-vite`.\n\n<details>\n<summary>Changes needed</summary>\n\nIn `.storybook/mocks/agGridMocks.ts`, add to the `MockGridParams` interface:\n\n```diff\n export interface MockGridParams {\n   value?: unknown;\n   valueFormatted?: string | unknown[];\n   data?: Record<string, unknown>;\n+  showCode?: boolean;\n   node?: MockNode;\n```\n\nIn `src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts`:\n\n```diff\n export const ShowCode: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'USA',\n-      showCode: true,\n-    } as any),\n+      showCode: true,\n+    }),\n   },\n };\n\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }) => {\n\n-  render: (args: any) => ({\n+  render: (args) => ({\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdEmoji/SdEmoji.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use `queryByRole` so the fallback is reachable.**\n\n`getByRole` throws when the role isn't found, so the `?? canvasElement.querySelector(...)` branch never runs. Use `queryByRole` to keep the intended fallback behavior.\n\n<details>\n<summary>üí° Suggested fix</summary>\n\n```diff\n-      const emoji = canvas.getByRole('img', { hidden: true })\n-        ?? canvasElement.querySelector('.sd-emoji');\n+      const emoji = canvas.queryByRole('img', { hidden: true })\n+        ?? canvasElement.querySelector('.sd-emoji');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdCopyImage/SdCopyImage.stories.ts-57-65 (1)</summary><blockquote>\n\n`57-65`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Same clipboard API concern as SdCopy.**\n\nThe play function may fail in headless CI environments due to clipboard permission requirements. See comment on SdCopy.stories.ts.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBoxCounter/SdPricingBoxCounter.stories.ts-179-205 (1)</summary><blockquote>\n\n`179-205`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the interaction story description with the actual action.**  \nThe docstring says ‚Äúclicking the increment button,‚Äù but the play function only focuses the input. Either update the text or change the play to click the increment control. Here‚Äôs a minimal text fix to match current behavior:\n\n<details>\n<summary>Suggested update</summary>\n\n```diff\n- * Interaction test: clicking the increment button\n+ * Interaction test: focusing the counter input\n...\n-    await step('Click the input to focus it', async () => {\n+    await step('Focus the counter input', async () => {\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts-86-88 (1)</summary><blockquote>\n\n`86-88`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the JSDoc with the actual play assertions.**\n\nThe description says the icon is verified, but the play function only checks the text. Either add an icon assertion or reword the description to avoid misleading docs.\n\n<details>\n<summary>‚úèÔ∏è Minimal fix (description)</summary>\n\n```diff\n-/**\n- * Verifies the keyword text and state icon are rendered in the DOM\n- */\n+/**\n+ * Verifies the keyword text is rendered in the DOM\n+ */\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-71-84 (1)</summary><blockquote>\n\n`71-84`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Normalize season distributions to 1.0 in story args (and docs snippet).**\n\nThese stories describe a *distribution* across four seasons, but the values currently sum > 1.0. This can mislead consumers and skew visual expectations. If the intent is a true distribution, normalize these to total 1.0 and keep the docs snippet aligned with the args.  \n\n\n<details>\n<summary>üîß Suggested normalization</summary>\n\n```diff\n-        code: html`<sd-seasonality :spring=\"0.18\" :summer=\"0.52\" :fall=\"0.35\" :winter=\"0.15\" />`,\n+        code: html`<sd-seasonality :spring=\"0.15\" :summer=\"0.4\" :fall=\"0.3\" :winter=\"0.15\" />`,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n\n-    spring: 0.25,\n-    summer: 0.85,\n-    fall: 0.1,\n-    winter: 0.05,\n+    spring: 0.05,\n+    summer: 0.85,\n+    fall: 0.05,\n+    winter: 0.05,\n\n-    spring: 0.08,\n-    summer: 0.05,\n-    fall: 0.22,\n-    winter: 0.9,\n+    spring: 0.03,\n+    summer: 0.02,\n+    fall: 0.05,\n+    winter: 0.9,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n```\n</details>\n\n\nAlso applies to: 107-112, 147-152, 203-208\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use a direct DOM query instead of `getByText` with class predicate in play function.**\n\nLine 89 uses `getByText` with a class predicate, which is non-idiomatic and can be flaky/ambiguous because it's text-driven. Use `querySelector` directly to query the root element.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-import { expect, within } from 'storybook/test';\n+import { expect } from 'storybook/test';\n\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Seasonality component is rendered with four season items', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-seasonality') ?? false);\n-      await expect(wrapper).toBeInTheDocument();\n+      const wrapper = canvasElement.querySelector('.sd-seasonality');\n+      expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemo.stories.ts-88-101 (1)</summary><blockquote>\n\n`88-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play test doesn‚Äôt assert the emitted payload.**  \nThe step description says it verifies the correct file type, but it only checks that the handler was called. Consider asserting the expected value to prevent silent regressions.  \n\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n       const cards = canvas.getAllByText(/Excel|CSV|Google Sheets/);\n       await userEvent.click(cards[0]);\n-      await expect(args.onSelect).toHaveBeenCalled();\n+      await expect(args.onSelect).toHaveBeenCalledWith(DemoFileTypes.Excel);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdLinkIcon/SdLinkIcon.stories.ts-143-162 (1)</summary><blockquote>\n\n`143-162`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**ToolbarGroup doesn't forward `args`, so controls/actions won't apply.**\n\nThe story hard-codes props for each icon and ignores `args.disabled` / `args.onClick`, so toggling controls won't affect the toolbar items and clicks won't show in Actions. Consider spreading `args` into each icon (and optionally disable the `name` control for this story).\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-        <sd-link-icon :name=\"IconTypes.Pencil\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Copy\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Trash\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Gear\" :size=\"args.size\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Pencil\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Copy\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Trash\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Gear\" />\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableSort/SdTableSortItem/SdTableSortItem.stories.ts-75-108 (1)</summary><blockquote>\n\n`75-108`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Make the play query resilient to multiple buttons.**\n\nLine 91 uses `getByRole('button')`, which will throw if more than one button is rendered. The component renders multiple buttons: two metric/sort type selectors (sd-dropdown-button elements) and a remove button (sd-link-icon). Use `getAllByRole` with a count assertion instead.\n\n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n\n```diff\n-    const sortItem = canvas.getByRole('button');\n-    await expect(sortItem).toBeInTheDocument();\n+    const buttons = canvas.getAllByRole('button');\n+    await expect(buttons.length).toBeGreaterThan(0);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/InsightsCellRenderer/InsightsCellRenderer.stories.ts-141-161 (1)</summary><blockquote>\n\n`141-161`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid `getByText` throwing before the fallback executes.**\n\n`getByText` throws when no text is present, so the fallback `querySelector` never runs. For icon-only renders, this causes the test to fail immediately instead of attempting the fallback query. Use `queryByText` instead.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-      const container = canvas.getByText(/./).closest('.insights-cell')\n-        ?? canvasElement.querySelector('.insights-cell');\n+      const container = canvas.queryByText(/./)?.closest('.insights-cell')\n+        ?? canvasElement.querySelector('.insights-cell');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableOverview.stories.ts-54-85 (1)</summary><blockquote>\n\n`54-85`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function won't execute due to `skip-test` tag.**\n\nThe Default story has both a play function (Lines 80-84) and `tags: ['skip-test']` (Line 55). The play function will never execute during test runs, making it effectively dead code.\n\nIf the circular import issue is resolved, consider removing the skip-test tag. Otherwise, removing the play function would reduce maintenance burden.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DeviceCellRenderer/DeviceCellRenderer.stories.ts-94-101 (1)</summary><blockquote>\n\n`94-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion is too permissive.**\n\nThe regex `/./ ` matches any single character, making this test pass even if the component renders incorrect or unrelated content. This doesn't verify that the device name is actually rendered.\n\n\n<details>\n<summary>üîß Suggested improvement for meaningful assertion</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify device cell content is rendered', async () => {\n-      const cell = canvas.getByText(/./);\n+      const cell = canvas.getByText(/desktop/i);\n       await expect(cell).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdMetaData/SdMetaData.stories.ts-64-83 (1)</summary><blockquote>\n\n`64-83`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Match the test assertion to the component's actual format behavior.**\n\nThe hardcoded `'12,345'` has two issues: it's locale-dependent, and it doesn't match what the component actually renders. The `SdMetaData` component defaults to `format='compact'`, which would render `12345` as `\"12K\"` (not `\"12,345\"`). The suggested `Intl.NumberFormat()` fix addresses the locale concern but produces the wrong output‚Äîit formats as decimal while the component uses compact.\n\nEither explicitly set `format: 'decimal'` in args and derive the expected value from vue-i18n's `n()` function (matching the component's actual formatter), or update the test to expect the compact format output. The former approach is recommended:\n\n<details>\n<summary>üîß Suggested adjustment</summary>\n\n```diff\nargs: {\n  title: 'Title',\n  value: 12345,\n+ format: 'decimal',\n},\nplay: async ({ canvasElement, step, args }: any) => {\n  const canvas = within(canvasElement);\n+ const { n } = useI18n();\n+ const formattedValue = n(args.value, args.format);\n\n  await step('Verify title and value are rendered', async () => {\n    await expect(canvas.getByText('Title')).toBeInTheDocument();\n-   await expect(canvas.getByText('12,345')).toBeInTheDocument();\n+   await expect(canvas.getByText(formattedValue)).toBeInTheDocument();\n  });\n},\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/features/analytics/SdDailyComparisonUrlList/SdDailyComparisonUrlList.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change the import path from `storybook/test` to `@storybook/test`.** Storybook 10.1.11 supports and recommends importing from `@storybook/test`, the official package. The unscoped `storybook/test` subpath import has shown compatibility issues in Storybook 10 and is not the standard API surface.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableMarket.stories.ts-59-59 (1)</summary><blockquote>\n\n`59-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change to `story` for consistency with the other stories in this file.**\n\nAll other stories in `SdTableMarket.stories.ts` use `docs.description.story` (CompetitorsKeywords, CompetitionOverview, DailyComparison, MarketChild, and PositionDistribution), so CompetitorsDomain should follow the same convention.\n\n<details>\n<summary>üõ†Ô∏è Proposed fix</summary>\n\n```diff\n-        component: 'Table view for the `Market Competitors Domain` section.',\n+        story: 'Table view for the `Market Competitors Domain` section.',\n```\n</details>\n\n</blockquote></details>\n\n</blockquote></details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
        "commentCount": 6
      }
    ],
    "byAuthor": {
      "copilot-pull-request-reviewer": [
        {
          "id": "PRR_kwDOQ5kgRs7fHUdB",
          "agent": "copilot",
          "author": "copilot-pull-request-reviewer",
          "body": "Copilot encountered an error and was unable to review this pull request. You can try again by re-requesting a review.",
          "rawBody": "Copilot encountered an error and was unable to review this pull request. You can try again by re-requesting a review.",
          "createdAt": "2026-02-03T06:27:19Z",
          "type": "review"
        }
      ],
      "coderabbitai": [
        {
          "id": "PRR_kwDOQ5kgRs7fIUfE",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "**Actionable comments posted: 6**\n**[NOTE]** Due to the large number of review comments, Critical, Major severity comments were prioritized as inline comments.\n**[CAUTION]** Some comments are outside the diff and can‚Äôt be posted inline due to platform limitations.\n<details>\n<summary>‚ö†Ô∏è Outside diff range comments (8)</summary><blockquote>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/LinkRelationCellRenderer/LinkRelationCellRenderer.stories.ts (1)</summary><blockquote>\n`98-130`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**JSDoc description doesn't match implementation.**\nThe JSDoc states \"displays both link relation states across all available themes\" but the implementation only renders a single state (`value: true`). Either update the documentation to accurately describe the single-state showcase, or modify the template to render both states per theme.\n<details>\n<summary>Option 1: Fix JSDoc to match implementation</summary>\n```diff\n/**\n- * All themes showcase - displays both link relation states across all available themes.\n+ * All themes showcase - displays the Dofollow link relation state across all available themes.\n*/\n```\n</details>\n<details>\n<summary>Option 2: Render both states per theme</summary>\n```diff\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <link-relation-cell-renderer v-bind=\"args\" />\n+          <div style=\"display: flex; gap: 8px;\">\n+            <link-relation-cell-renderer :params=\"{ value: true }\" />\n+            <link-relation-cell-renderer :params=\"{ value: false }\" />\n+          </div>\n</div>\n</div>\n`,\n```\nNote: If choosing Option 2, you may need to wrap the params with `createMockGridParams` depending on component requirements.\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableTags.stories.ts (1)</summary><blockquote>\n`148-176`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**AllThemes likely renders an empty/misconfigured table.**\n`AllThemes` doesn‚Äôt pass `columnDefs`, `rowData`, or `gridOptions`, so the table may render without data or required configuration. Consider reusing `Default.args` and passing `gridOptions` like the `Table` render does.  \n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n```diff\nexport const AllThemes: Story = {\n+  args: { ...Default.args },\nrender: (args: any) => ({\ncomponents: { SdTable },\nsetup() {\n+      const gridOptions = createGridOptions();\nconst themes = [\n{ name: 'Light', class: 'wope-light-theme' },\n{ name: 'Dark', class: 'wope-dark-theme' },\n{ name: 'Nebula Surge', class: 'nebula-surge-theme' },\n{ name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n{ name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n{ name: 'Fall Symphony', class: 'fall-symphony-theme' },\n];\n-      return { args, themes };\n+      return { args, themes, gridOptions };\n},\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <sd-table v-bind=\"args\" style=\"width: 400px; height: 256px\" />\n+          <sd-table v-bind=\"args\" :grid-options=\"gridOptions\" style=\"width: 400px; height: 256px\" />\n</div>\n</div>\n`,\n}),\n```\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTablePerformance.stories.ts (1)</summary><blockquote>\n`1494-1494`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n**Fix `summaryColumnDefs()` call in AllThemes story to include required configuration parameters.**\nLine 1494 calls `summaryColumnDefs()` without arguments, but the function requires an object with `lastDate`, `location`, and `language` properties. The function uses `lastDate` to format column headers via `dayjs(lastDate).format('MMM D')` and passes `location` and `language` to cell components. Calling it without arguments will cause runtime errors. Update to match the Default story pattern (line 56):\n```javascript\nsummaryColumnDefs({\nlastDate: '2021-02-02',\nlocation: { countryCode: 'USA' },\nlanguage: { locale: 'en_US' }\n})\n```\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/VolumeBestCellRenderer/VolumeBestCellRenderer.stories.ts (1)</summary><blockquote>\n`33-39`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**Make story data deterministic (avoid `new Date()` in args).**\nUsing the current month means the rendered output changes over time, which can cause flaky snapshots and inconsistent docs. Prefer a fixed sample month shared across stories.  \n<details>\n<summary>üîß Suggested change (deterministic sample month)</summary>\n```diff\ntype Story = StoryObj<typeof meta>;\n+const SAMPLE_MONTH = 1;\nexport const Default: Story = {\nargs: {\nparams: createMockGridParams({\nvalue: {\n-        months: [new Date().getMonth() + 1],\n+        months: [SAMPLE_MONTH],\nvalue: 8000,\n},\n}),\n},\n};\nexport const AllThemes: Story = {\nargs: {\nparams: createMockGridParams({\nvalue: {\n-        months: [new Date().getMonth() + 1],\n+        months: [SAMPLE_MONTH],\nvalue: 8000,\n},\n}),\n},\n```\n</details>\nAlso applies to: 116-121\n</blockquote></details>\n<details>\n<summary>src/components/display/SdCheckList/SdCheckList.stories.ts (1)</summary><blockquote>\n`158-185`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**Clone data per theme to prevent state synchronization across instances.**\nAllThemes renders six SdCheckList instances that all reference the same `args.data` array. Since SdTree (used by SdCheckList) uses `vue3-tree` with `v-model:nodes`, interaction mutations propagate back to the original array‚Äîtoggling a checkbox in one theme will update all others. Each theme should have its own isolated data copy.\n<details>\n<summary>üîß Suggested adjustment (per-theme data clone)</summary>\n```diff\nrender: (args: any) => ({\ncomponents: { SdCheckList },\nsetup() {\n+      const makeData = () => structuredClone(args.data ?? sampleData);\nconst themes = [\n{ name: 'Light', class: 'wope-light-theme' },\n{ name: 'Dark', class: 'wope-dark-theme' },\n{ name: 'Nebula Surge', class: 'nebula-surge-theme' },\n{ name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n{ name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n{ name: 'Fall Symphony', class: 'fall-symphony-theme' },\n-      ];\n-      return { args, themes };\n+      ].map((theme) => ({ ...theme, data: makeData() }));\n+      return { args, themes };\n},\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <sd-check-list v-bind=\"args\" style=\"width: 300px\" />\n+          <sd-check-list v-bind=\"args\" :data=\"theme.data\" style=\"width: 300px\" />\n</div>\n</div>\n`,\n}),\n```\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts (1)</summary><blockquote>\n`30-68`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**Some `change.diff` values don‚Äôt match `value - prev`.**  \nExample: the 2021-02-09 entry has `value: 7`, `prev: 4`, but `diff: -2`. Inconsistent diffs can render misleading arrows or deltas. Please recompute or correct the mismatches in this series.\n</blockquote></details>\n<details>\n<summary>src/components/controls/SdLinkButton/SdLinkButton.stories.ts (1)</summary><blockquote>\n`14-79`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n**Add an onClick action to the meta args so the play test doesn't fail.**\nThe Default story's play function (line 78) calls `expect(args.onClick).toHaveBeenCalled()`, but `onClick` is not defined in either the Default story's args or the meta config. Without this mock function, the play test will throw an error at runtime and the action won't appear in Storybook. Add `onClick: fn()` to the meta args and define its argType.\n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n```diff\nconst meta = {\ntitle: 'Controls/SdLinkButton',\ncomponent: SdLinkButton,\ntags: ['autodocs'],\n+  args: {\n+    onClick: fn(),\n+  },\nargTypes: {\n+    onClick: {\n+      description: 'Emitted when the link button is clicked',\n+      action: 'click',\n+      table: { category: 'events' },\n+    },\ndefault: {\ndescription: 'Default slot for the link button label content',\ncontrol: { type: 'text' },\n```\n</details>\n</blockquote></details>\n<details>\n<summary>src/components/controls/SdButton/SdButtonLarge/SdButtonLarge.stories.ts (1)</summary><blockquote>\n`167-191`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n**AllThemes story renders button without label content.**\nThe `args: {}` provides no default slot content, so the button will appear empty in the theme showcase. Other button stories in the PR (e.g., `SdButtonChip.stories.ts` at Lines 121-148) provide meaningful args like `name: 'Example'`.\n<details>\n<summary>üîß Suggested fix to add default label</summary>\n```diff\nexport const AllThemes: Story = {\n-  args: {},\n+  args: {\n+    default: 'Get Started',\n+  },\nrender: (args: any) => ({\ncomponents: { SdButtonLarge },\nsetup() {\n// ...\n},\ntemplate: `\n<div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n<div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n<div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n-          <sd-button-large v-bind=\"args\" />\n+          <sd-button-large v-bind=\"args\">{{ args.default }}</sd-button-large>\n</div>\n</div>\n`,\n}),\n```\n</details>\n</blockquote></details>\n</blockquote></details>\n\n<details>\n<summary>ü§ñ Fix all issues with AI agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts`:\n- Around line 103-121: The story's play asserts args.onClick but args never\nprovides an onClick spy (and the button role may not render without\nclickability) ‚Äî update the story's args to include a spy and enable clicking\n(e.g., add onClick as a spy function and clickable: true), and keep the\nrender/template wiring (render, template, SdBullet, args) unchanged; create the\nspy using your test helper (jest.fn() or Storybook action helper) at top of the\nstory file so play can assert args.onClick was called when userEvent.click hits\nthe button.\n\nIn `@src/components/display/SdChart/SdChart.stories.ts`:\n- Around line 199-206: The play function currently uses canvas.getByText with a\nclass-check callback (canvas.getByText(...\nelement?.classList?.contains('sd-chart'))), which is incorrect; update the\nassertion in the play function to use a semantic or test-id query instead (e.g.,\nwithin(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts`:\n- Around line 102-119: The story's template sets ref=\"imgEl\" on the <img> but\nnever passes that reference to the SdCopyImage component, so the copy behavior\nisn't demonstrated; update the WithImagePreview render setup to create a Vue ref\n(import ref from 'vue'), assign it to the image element (e.g., imgEl), and pass\nit into the SdCopyImage via the imageElement prop (or imageElement: imgEl) and\nensure the `@copy` handler still uses args.onCopy; modify the render function in\nthe WithImagePreview story and add the ref import.\n\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`:\n- Around line 64-71: The story is using createMockGridParams(...) with an as any\noverride which bypasses TypeScript checks for renderer-specific props (useTitle,\ngetRowData, getGhostRowData, gridOptions, ghostRowData); replace that call with\nthe specialized factory createChildTableCellParams(...) from agGridMocks and\npass the same properties (useTitle, getRowData, getGhostRowData/ghostRowData,\ngridOptions) so types are enforced; update the import to pull\ncreateChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`:\n- Around line 72-76: The exported story named Error shadows the global Error and\ntriggers the noShadowRestrictedNames lint rule; rename the export (for example\nchange export const Error to export const ErrorState or KeywordError) and update\nany places that import or reference this story (docs, storybook configs, tests)\nto use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`:\n- Line 2: The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<details>\n<summary>üü° Minor comments (28)</summary><blockquote>\n\n<details>\n<summary>src/components/display/SdTable/SdTableGoogleIntegrations.stories.ts-301-306 (1)</summary><blockquote>\n\n`301-306`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Strengthen AllThemes play assertions to verify each label explicitly.**\n\nThe current regex can pass if any theme name appears elsewhere (e.g., inside table data), masking a missing theme label. It‚Äôs safer to assert each expected label individually.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n     await step('Verify theme grid renders correctly', async () => {\n-      const themeContainers = canvas.getAllByText(/Light|Dark|Nebula Surge|Mountain Cliff|Horizon Hopper|Fall Symphony/);\n-      expect(themeContainers.length).toBeGreaterThanOrEqual(6);\n+      const themeNames = [\n+        'Light',\n+        'Dark',\n+        'Nebula Surge',\n+        'Mountain Cliff',\n+        'Horizon Hopper',\n+        'Fall Symphony',\n+      ];\n+      themeNames.forEach((name) => {\n+        expect(canvas.getByText(name)).toBeTruthy();\n+      });\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/ColumnHeaders/SortColumnHeader/SortColumnHeader.stories.ts-127-139 (1)</summary><blockquote>\n\n`127-139`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function clicks header but doesn't verify the sort result.**\n\nThe interaction test triggers a sort click but lacks an assertion to verify the expected outcome. Consider asserting that a sort indicator appears or the sort state changes:\n\n<details>\n<summary>üß™ Suggested enhancement</summary>\n\n```diff\n     await step('Click header to trigger sort', async () => {\n       const headerName = canvas.getByText('Volume');\n       await userEvent.click(headerName);\n     });\n+\n+    await step('Verify sort indicator appears', async () => {\n+      // Assert sort arrow or aria-sort attribute is present\n+      const header = canvas.getByRole('button', { name: /volume/i });\n+      await expect(header).toHaveAttribute('aria-sort', 'ascending');\n+    });\n   },\n```\n\n</details>\n\nAdjust the selector and expected attribute based on how `SortColumnHeader` communicates sort state in the DOM.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdBadge/SdBadge.stories.ts-225-233 (1)</summary><blockquote>\n\n`225-233`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function step description doesn't match the assertion.**\n\nThe step says \"Click the secondary icon and verify action event\", but the test clicks the badge button and asserts `onClick` was called‚Äînot `onAction`. If the intent is to test the secondary icon's action callback, the assertion should verify `args.onAction` instead.\n\n<details>\n<summary>Proposed fix to align description and assertion</summary>\n\nIf testing the secondary icon action:\n```diff\n-    await step('Click the secondary icon and verify action event', async () => {\n-      const badge = canvas.getByRole('button');\n-      await userEvent.click(badge);\n-      await expect(args.onClick).toHaveBeenCalled();\n+    await step('Click badge and verify onClick handler called', async () => {\n+      const badge = canvas.getByRole('button');\n+      await userEvent.click(badge);\n+      await expect(args.onClick).toHaveBeenCalled();\n     });\n```\n\nOr, if you actually want to test the secondary icon triggering `onAction`, update the assertion (and possibly the selector to target the icon specifically).\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSerpList/SdSerpList.stories.ts-57-64 (1)</summary><blockquote>\n\n`57-64`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect use of `getByText` for class-based element selection.**\n\nThe `getByText` query is designed for text content matching, not class-based selection. The callback `((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false)` ignores the text parameter entirely, which makes this query semantically incorrect and potentially flaky.\n\nUse `canvasElement.querySelector` for class-based selection, or verify actual rendered text content instead.\n\n<details>\n<summary>üîß Proposed fix using querySelector</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n-   const canvas = within(canvasElement);\n-\n    await step('Verify the SERP list renders with grouped items', async () => {\n-     const root = canvas.getByText((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false);\n+     const root = canvasElement.querySelector('.sd-serp-list');\n      await expect(root).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBox.stories.ts-101-107 (1)</summary><blockquote>\n\n`101-107`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion may be brittle and mismatches step description.**\n\nThe step describes verifying \"plan tabs\" but actually asserts on a hardcoded price value (`$47`). If the Starter plan pricing changes, this test will fail without any actual regression. Consider asserting on a more stable element that aligns with the step description (e.g., checking for plan tab elements).\n\n<details>\n<summary>üí° Suggested improvement</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify pricing box renders with plan tabs', async () => {\n-      await expect(canvas.getByText('$47')).toBeInTheDocument();\n+      await expect(canvas.getByRole('tablist')).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, update the step description to match what's being tested:\n```diff\n-    await step('Verify pricing box renders with plan tabs', async () => {\n+    await step('Verify pricing box renders with price display', async () => {\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdVolumeTrends/SdVolumeTrends.stories.ts-96-103 (1)</summary><blockquote>\n\n`96-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Semantic mismatch: `getByText` used to query by CSS class.**\n\nThe play function uses `getByText` with a custom matcher that checks for a CSS class (`sd-volume-trends`), which is semantically incorrect. `getByText` is designed for finding elements by text content, not DOM structure.\n\n<details>\n<summary>üõ†Ô∏è Proposed fix using querySelector</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Volume trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-volume-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-volume-trends');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\n</details>\n\nAlternatively, if the component has a semantic role, prefer `getByRole` for better accessibility alignment.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemoItem/SdDemoItem.stories.ts-131-137 (1)</summary><blockquote>\n\n`131-137`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Missing `@click` handler wiring in template.**\n\nThe `AllFileTypes` story doesn't pass the `onClick` handler to the demo items, so click events won't appear in the Actions panel. This is inconsistent with the meta args that define `onClick: fn()`.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n     template: `\n       <div style=\"display: flex; gap: 16px;\">\n-        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" `@click`=\"args.onClick\" />\n       </div>\n     `,\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPositionTrends/SdPositionTrends.stories.ts-93-100 (1)</summary><blockquote>\n\n`93-100`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect usage of `getByText` for class-based element selection.**\n\n`getByText` is designed to match elements by their text content, not by class name. The predicate function receives `(content, element)` where `content` is the text content being evaluated. Using it to check `classList.contains()` is a misuse of the API and may fail if the element doesn't have matching text.\n\n<details>\n<summary>üõ†Ô∏è Suggested fix using container query</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Position trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-position-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-position-trends');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\nAlternatively, consider adding a `data-testid=\"sd-position-trends\"` to the component and using `canvas.getByTestId('sd-position-trends')` for more idiomatic Testing Library usage.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/VolumeTrendCellRenderer/VolumeTrendCellRenderer.stories.ts-86-90 (1)</summary><blockquote>\n\n`86-90`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Minor inconsistency: month 1's `prev` value.**\n\nFor month 1, `prev` is set to `5000`, but other stories (trendData12Months, UpwardTrend, DownwardTrend) consistently use `prev: 0` for the first month since there's no preceding month to compare against.\n\n<details>\n<summary>Suggested fix for consistency</summary>\n\n```diff\n         trends: Array.from({ length: 12 }, (_, i) => ({\n           month: i + 1,\n           value: 5000,\n-          change: { prev: 5000, diff: 0 },\n+          change: { prev: i === 0 ? 0 : 5000, diff: 0 },\n         })),\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdFlag/SdFlag.stories.ts-48-59 (1)</summary><blockquote>\n\n`48-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid hardcoded alt text in the play assertion.**\n\nThe play test hardcodes `'US'`, so it will fail if `args.name` changes. Use `args.name` to derive the expected alt text.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }) => {\n+  play: async ({ canvasElement, step, args }) => {\n     const canvas = within(canvasElement);\n+    const expectedAlt = String(args.name).toUpperCase();\n\n     await step('Verify flag image is rendered', async () => {\n       const img = canvas.getByRole('img');\n       await expect(img).toBeInTheDocument();\n     });\n\n     await step('Verify alt text matches country code', async () => {\n       const img = canvas.getByRole('img');\n-      await expect(img).toHaveAttribute('alt', 'US');\n+      await expect(img).toHaveAttribute('alt', expectedAlt);\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DateAndTypeCellRenderer/DateAndTypeCellRenderer.stories.ts-140-147 (1)</summary><blockquote>\n\n`140-147`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Type the play function parameters for better type safety.**\n\nThe `({ canvasElement, step }: any)` parameter typing loses type safety. Storybook provides proper types for the play function context‚Äîuse them instead of `any`.\n\nHowever, the date format assertion is correct and not brittle: The component explicitly uses the hardcoded format string `'D.M.YYYY'` (see DateAndTypeCellRenderer.vue line 41), so `'15.6.2024'` is the expected output for input `'2024-06-15'` and will not break due to locale variations.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordDifficultyCellRenderer/KeywordDifficultyCellRenderer.stories.ts-6-10 (1)</summary><blockquote>\n\n`6-10`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**JSDoc difficulty thresholds are internally inconsistent.**\n\nThe meta description states \"green for easy (1-79)\" but the individual story JSDoc comments split this into Medium (40-79) at line 52 and Easy (1-39) at line 63. Either update the meta description to reflect four tiers or reconcile the individual story descriptions.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts-54-103 (1)</summary><blockquote>\n\n`54-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Add `showCode` property to `MockGridParams` type to eliminate `as any` cast.**\n\nThe `showCode` property used in the ShowCode story (line 59) is not defined in the `MockGridParams` interface at `.storybook/mocks/agGridMocks.ts`, forcing the `as any` cast. Add `showCode?: boolean;` to the `MockGridParams` interface to properly support this property without type bypass.\n\nAdditionally, remove `any` type annotations from line 83 (`play` function) and line 102 (`render` function) to let Storybook infer the correct types. These are Storybook CSF3 constructs with well-defined types provided by `@storybook/vue3-vite`.\n\n<details>\n<summary>Changes needed</summary>\n\nIn `.storybook/mocks/agGridMocks.ts`, add to the `MockGridParams` interface:\n\n```diff\n export interface MockGridParams {\n   value?: unknown;\n   valueFormatted?: string | unknown[];\n   data?: Record<string, unknown>;\n+  showCode?: boolean;\n   node?: MockNode;\n```\n\nIn `src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts`:\n\n```diff\n export const ShowCode: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'USA',\n-      showCode: true,\n-    } as any),\n+      showCode: true,\n+    }),\n   },\n };\n\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }) => {\n\n-  render: (args: any) => ({\n+  render: (args) => ({\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdEmoji/SdEmoji.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use `queryByRole` so the fallback is reachable.**\n\n`getByRole` throws when the role isn't found, so the `?? canvasElement.querySelector(...)` branch never runs. Use `queryByRole` to keep the intended fallback behavior.\n\n<details>\n<summary>üí° Suggested fix</summary>\n\n```diff\n-      const emoji = canvas.getByRole('img', { hidden: true })\n-        ?? canvasElement.querySelector('.sd-emoji');\n+      const emoji = canvas.queryByRole('img', { hidden: true })\n+        ?? canvasElement.querySelector('.sd-emoji');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdCopyImage/SdCopyImage.stories.ts-57-65 (1)</summary><blockquote>\n\n`57-65`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Same clipboard API concern as SdCopy.**\n\nThe play function may fail in headless CI environments due to clipboard permission requirements. See comment on SdCopy.stories.ts.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBoxCounter/SdPricingBoxCounter.stories.ts-179-205 (1)</summary><blockquote>\n\n`179-205`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the interaction story description with the actual action.**  \nThe docstring says ‚Äúclicking the increment button,‚Äù but the play function only focuses the input. Either update the text or change the play to click the increment control. Here‚Äôs a minimal text fix to match current behavior:\n\n<details>\n<summary>Suggested update</summary>\n\n```diff\n- * Interaction test: clicking the increment button\n+ * Interaction test: focusing the counter input\n...\n-    await step('Click the input to focus it', async () => {\n+    await step('Focus the counter input', async () => {\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts-86-88 (1)</summary><blockquote>\n\n`86-88`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the JSDoc with the actual play assertions.**\n\nThe description says the icon is verified, but the play function only checks the text. Either add an icon assertion or reword the description to avoid misleading docs.\n\n<details>\n<summary>‚úèÔ∏è Minimal fix (description)</summary>\n\n```diff\n-/**\n- * Verifies the keyword text and state icon are rendered in the DOM\n- */\n+/**\n+ * Verifies the keyword text is rendered in the DOM\n+ */\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-71-84 (1)</summary><blockquote>\n\n`71-84`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Normalize season distributions to 1.0 in story args (and docs snippet).**\n\nThese stories describe a *distribution* across four seasons, but the values currently sum > 1.0. This can mislead consumers and skew visual expectations. If the intent is a true distribution, normalize these to total 1.0 and keep the docs snippet aligned with the args.\n\n<details>\n<summary>üîß Suggested normalization</summary>\n\n```diff\n-        code: html`<sd-seasonality :spring=\"0.18\" :summer=\"0.52\" :fall=\"0.35\" :winter=\"0.15\" />`,\n+        code: html`<sd-seasonality :spring=\"0.15\" :summer=\"0.4\" :fall=\"0.3\" :winter=\"0.15\" />`,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n\n-    spring: 0.25,\n-    summer: 0.85,\n-    fall: 0.1,\n-    winter: 0.05,\n+    spring: 0.05,\n+    summer: 0.85,\n+    fall: 0.05,\n+    winter: 0.05,\n\n-    spring: 0.08,\n-    summer: 0.05,\n-    fall: 0.22,\n-    winter: 0.9,\n+    spring: 0.03,\n+    summer: 0.02,\n+    fall: 0.05,\n+    winter: 0.9,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n```\n</details>\n\nAlso applies to: 107-112, 147-152, 203-208\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use a direct DOM query instead of `getByText` with class predicate in play function.**\n\nLine 89 uses `getByText` with a class predicate, which is non-idiomatic and can be flaky/ambiguous because it's text-driven. Use `querySelector` directly to query the root element.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-import { expect, within } from 'storybook/test';\n+import { expect } from 'storybook/test';\n\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Seasonality component is rendered with four season items', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-seasonality') ?? false);\n-      await expect(wrapper).toBeInTheDocument();\n+      const wrapper = canvasElement.querySelector('.sd-seasonality');\n+      expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemo.stories.ts-88-101 (1)</summary><blockquote>\n\n`88-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play test doesn‚Äôt assert the emitted payload.**  \nThe step description says it verifies the correct file type, but it only checks that the handler was called. Consider asserting the expected value to prevent silent regressions.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n       const cards = canvas.getAllByText(/Excel|CSV|Google Sheets/);\n       await userEvent.click(cards[0]);\n-      await expect(args.onSelect).toHaveBeenCalled();\n+      await expect(args.onSelect).toHaveBeenCalledWith(DemoFileTypes.Excel);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdLinkIcon/SdLinkIcon.stories.ts-143-162 (1)</summary><blockquote>\n\n`143-162`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**ToolbarGroup doesn't forward `args`, so controls/actions won't apply.**\n\nThe story hard-codes props for each icon and ignores `args.disabled` / `args.onClick`, so toggling controls won't affect the toolbar items and clicks won't show in Actions. Consider spreading `args` into each icon (and optionally disable the `name` control for this story).\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-        <sd-link-icon :name=\"IconTypes.Pencil\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Copy\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Trash\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Gear\" :size=\"args.size\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Pencil\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Copy\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Trash\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Gear\" />\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableSort/SdTableSortItem/SdTableSortItem.stories.ts-75-108 (1)</summary><blockquote>\n\n`75-108`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Make the play query resilient to multiple buttons.**\n\nLine 91 uses `getByRole('button')`, which will throw if more than one button is rendered. The component renders multiple buttons: two metric/sort type selectors (sd-dropdown-button elements) and a remove button (sd-link-icon). Use `getAllByRole` with a count assertion instead.\n\n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n\n```diff\n-    const sortItem = canvas.getByRole('button');\n-    await expect(sortItem).toBeInTheDocument();\n+    const buttons = canvas.getAllByRole('button');\n+    await expect(buttons.length).toBeGreaterThan(0);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/InsightsCellRenderer/InsightsCellRenderer.stories.ts-141-161 (1)</summary><blockquote>\n\n`141-161`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid `getByText` throwing before the fallback executes.**\n\n`getByText` throws when no text is present, so the fallback `querySelector` never runs. For icon-only renders, this causes the test to fail immediately instead of attempting the fallback query. Use `queryByText` instead.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-      const container = canvas.getByText(/./).closest('.insights-cell')\n-        ?? canvasElement.querySelector('.insights-cell');\n+      const container = canvas.queryByText(/./)?.closest('.insights-cell')\n+        ?? canvasElement.querySelector('.insights-cell');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableOverview.stories.ts-54-85 (1)</summary><blockquote>\n\n`54-85`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function won't execute due to `skip-test` tag.**\n\nThe Default story has both a play function (Lines 80-84) and `tags: ['skip-test']` (Line 55). The play function will never execute during test runs, making it effectively dead code.\n\nIf the circular import issue is resolved, consider removing the skip-test tag. Otherwise, removing the play function would reduce maintenance burden.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DeviceCellRenderer/DeviceCellRenderer.stories.ts-94-101 (1)</summary><blockquote>\n\n`94-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion is too permissive.**\n\nThe regex `/./ ` matches any single character, making this test pass even if the component renders incorrect or unrelated content. This doesn't verify that the device name is actually rendered.\n\n<details>\n<summary>üîß Suggested improvement for meaningful assertion</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify device cell content is rendered', async () => {\n-      const cell = canvas.getByText(/./);\n+      const cell = canvas.getByText(/desktop/i);\n       await expect(cell).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdMetaData/SdMetaData.stories.ts-64-83 (1)</summary><blockquote>\n\n`64-83`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Match the test assertion to the component's actual format behavior.**\n\nThe hardcoded `'12,345'` has two issues: it's locale-dependent, and it doesn't match what the component actually renders. The `SdMetaData` component defaults to `format='compact'`, which would render `12345` as `\"12K\"` (not `\"12,345\"`). The suggested `Intl.NumberFormat()` fix addresses the locale concern but produces the wrong output‚Äîit formats as decimal while the component uses compact.\n\nEither explicitly set `format: 'decimal'` in args and derive the expected value from vue-i18n's `n()` function (matching the component's actual formatter), or update the test to expect the compact format output. The former approach is recommended:\n\n<details>\n<summary>üîß Suggested adjustment</summary>\n\n```diff\nargs: {\n  title: 'Title',\n  value: 12345,\n+ format: 'decimal',\n},\nplay: async ({ canvasElement, step, args }: any) => {\n  const canvas = within(canvasElement);\n+ const { n } = useI18n();\n+ const formattedValue = n(args.value, args.format);\n\n  await step('Verify title and value are rendered', async () => {\n    await expect(canvas.getByText('Title')).toBeInTheDocument();\n-   await expect(canvas.getByText('12,345')).toBeInTheDocument();\n+   await expect(canvas.getByText(formattedValue)).toBeInTheDocument();\n  });\n},\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/features/analytics/SdDailyComparisonUrlList/SdDailyComparisonUrlList.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change the import path from `storybook/test` to `@storybook/test`.** Storybook 10.1.11 supports and recommends importing from `@storybook/test`, the official package. The unscoped `storybook/test` subpath import has shown compatibility issues in Storybook 10 and is not the standard API surface.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableMarket.stories.ts-59-59 (1)</summary><blockquote>\n\n`59-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change to `story` for consistency with the other stories in this file.**\n\nAll other stories in `SdTableMarket.stories.ts` use `docs.description.story` (CompetitorsKeywords, CompetitionOverview, DailyComparison, MarketChild, and PositionDistribution), so CompetitorsDomain should follow the same convention.\n\n<details>\n<summary>üõ†Ô∏è Proposed fix</summary>\n\n```diff\n-        component: 'Table view for the `Market Competitors Domain` section.',\n+        story: 'Table view for the `Market Competitors Domain` section.',\n```\n</details>\n\n</blockquote></details>\n\n</blockquote></details>",
          "rawBody": "**Actionable comments posted: 6**\n\n> [!NOTE]\n> Due to the large number of review comments, Critical, Major severity comments were prioritized as inline comments.\n\n> [!CAUTION]\n> Some comments are outside the diff and can‚Äôt be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>‚ö†Ô∏è Outside diff range comments (8)</summary><blockquote>\n> \n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/LinkRelationCellRenderer/LinkRelationCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `98-130`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **JSDoc description doesn't match implementation.**\n> \n> The JSDoc states \"displays both link relation states across all available themes\" but the implementation only renders a single state (`value: true`). Either update the documentation to accurately describe the single-state showcase, or modify the template to render both states per theme.\n> \n> \n> \n> <details>\n> <summary>Option 1: Fix JSDoc to match implementation</summary>\n> \n> ```diff\n>  /**\n> - * All themes showcase - displays both link relation states across all available themes.\n> + * All themes showcase - displays the Dofollow link relation state across all available themes.\n>   */\n> ```\n> </details>\n> \n> <details>\n> <summary>Option 2: Render both states per theme</summary>\n> \n> ```diff\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <link-relation-cell-renderer v-bind=\"args\" />\n> +          <div style=\"display: flex; gap: 8px;\">\n> +            <link-relation-cell-renderer :params=\"{ value: true }\" />\n> +            <link-relation-cell-renderer :params=\"{ value: false }\" />\n> +          </div>\n>          </div>\n>        </div>\n>      `,\n> ```\n> \n> Note: If choosing Option 2, you may need to wrap the params with `createMockGridParams` depending on component requirements.\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/SdTableTags.stories.ts (1)</summary><blockquote>\n> \n> `148-176`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **AllThemes likely renders an empty/misconfigured table.**\n> \n> `AllThemes` doesn‚Äôt pass `columnDefs`, `rowData`, or `gridOptions`, so the table may render without data or required configuration. Consider reusing `Default.args` and passing `gridOptions` like the `Table` render does.  \n> \n> \n> <details>\n> <summary>üõ†Ô∏è Suggested fix</summary>\n> \n> ```diff\n>  export const AllThemes: Story = {\n> +  args: { ...Default.args },\n>    render: (args: any) => ({\n>      components: { SdTable },\n>      setup() {\n> +      const gridOptions = createGridOptions();\n>        const themes = [\n>          { name: 'Light', class: 'wope-light-theme' },\n>          { name: 'Dark', class: 'wope-dark-theme' },\n>          { name: 'Nebula Surge', class: 'nebula-surge-theme' },\n>          { name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n>          { name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n>          { name: 'Fall Symphony', class: 'fall-symphony-theme' },\n>        ];\n> -      return { args, themes };\n> +      return { args, themes, gridOptions };\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-table v-bind=\"args\" style=\"width: 400px; height: 256px\" />\n> +          <sd-table v-bind=\"args\" :grid-options=\"gridOptions\" style=\"width: 400px; height: 256px\" />\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/SdTablePerformance.stories.ts (1)</summary><blockquote>\n> \n> `1494-1494`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n> \n> **Fix `summaryColumnDefs()` call in AllThemes story to include required configuration parameters.**\n> \n> Line 1494 calls `summaryColumnDefs()` without arguments, but the function requires an object with `lastDate`, `location`, and `language` properties. The function uses `lastDate` to format column headers via `dayjs(lastDate).format('MMM D')` and passes `location` and `language` to cell components. Calling it without arguments will cause runtime errors. Update to match the Default story pattern (line 56):\n> \n> ```javascript\n> summaryColumnDefs({\n>   lastDate: '2021-02-02',\n>   location: { countryCode: 'USA' },\n>   language: { locale: 'en_US' }\n> })\n> ```\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/VolumeBestCellRenderer/VolumeBestCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `33-39`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Make story data deterministic (avoid `new Date()` in args).**\n> \n> Using the current month means the rendered output changes over time, which can cause flaky snapshots and inconsistent docs. Prefer a fixed sample month shared across stories.  \n> \n> \n> <details>\n> <summary>üîß Suggested change (deterministic sample month)</summary>\n> \n> ```diff\n>  type Story = StoryObj<typeof meta>;\n> +const SAMPLE_MONTH = 1;\n> \n>  export const Default: Story = {\n>    args: {\n>      params: createMockGridParams({\n>        value: {\n> -        months: [new Date().getMonth() + 1],\n> +        months: [SAMPLE_MONTH],\n>          value: 8000,\n>        },\n>      }),\n>    },\n>  };\n> \n>  export const AllThemes: Story = {\n>    args: {\n>      params: createMockGridParams({\n>        value: {\n> -        months: [new Date().getMonth() + 1],\n> +        months: [SAMPLE_MONTH],\n>          value: 8000,\n>        },\n>      }),\n>    },\n> ```\n> </details>\n> \n> \n> Also applies to: 116-121\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdCheckList/SdCheckList.stories.ts (1)</summary><blockquote>\n> \n> `158-185`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Clone data per theme to prevent state synchronization across instances.**\n> \n> AllThemes renders six SdCheckList instances that all reference the same `args.data` array. Since SdTree (used by SdCheckList) uses `vue3-tree` with `v-model:nodes`, interaction mutations propagate back to the original array‚Äîtoggling a checkbox in one theme will update all others. Each theme should have its own isolated data copy.\n> \n> <details>\n> <summary>üîß Suggested adjustment (per-theme data clone)</summary>\n> \n> ```diff\n>    render: (args: any) => ({\n>      components: { SdCheckList },\n>      setup() {\n> +      const makeData = () => structuredClone(args.data ?? sampleData);\n>        const themes = [\n>          { name: 'Light', class: 'wope-light-theme' },\n>          { name: 'Dark', class: 'wope-dark-theme' },\n>          { name: 'Nebula Surge', class: 'nebula-surge-theme' },\n>          { name: 'Mountain Cliff', class: 'mountain-cliff-theme' },\n>          { name: 'Horizon Hopper', class: 'horizon-hopper-theme' },\n>          { name: 'Fall Symphony', class: 'fall-symphony-theme' },\n> -      ];\n> -      return { args, themes };\n> +      ].map((theme) => ({ ...theme, data: makeData() }));\n> +      return { args, themes };\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-check-list v-bind=\"args\" style=\"width: 300px\" />\n> +          <sd-check-list v-bind=\"args\" :data=\"theme.data\" style=\"width: 300px\" />\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts (1)</summary><blockquote>\n> \n> `30-68`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **Some `change.diff` values don‚Äôt match `value - prev`.**  \n> Example: the 2021-02-09 entry has `value: 7`, `prev: 4`, but `diff: -2`. Inconsistent diffs can render misleading arrows or deltas. Please recompute or correct the mismatches in this series.\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/controls/SdLinkButton/SdLinkButton.stories.ts (1)</summary><blockquote>\n> \n> `14-79`: _‚ö†Ô∏è Potential issue_ | _üî¥ Critical_\n> \n> **Add an onClick action to the meta args so the play test doesn't fail.**\n> \n> The Default story's play function (line 78) calls `expect(args.onClick).toHaveBeenCalled()`, but `onClick` is not defined in either the Default story's args or the meta config. Without this mock function, the play test will throw an error at runtime and the action won't appear in Storybook. Add `onClick: fn()` to the meta args and define its argType.\n> \n> <details>\n> <summary>üõ†Ô∏è Suggested fix</summary>\n> \n> ```diff\n>  const meta = {\n>    title: 'Controls/SdLinkButton',\n>    component: SdLinkButton,\n>    tags: ['autodocs'],\n> +  args: {\n> +    onClick: fn(),\n> +  },\n>    argTypes: {\n> +    onClick: {\n> +      description: 'Emitted when the link button is clicked',\n> +      action: 'click',\n> +      table: { category: 'events' },\n> +    },\n>      default: {\n>        description: 'Default slot for the link button label content',\n>        control: { type: 'text' },\n> ```\n> </details>\n> \n> </blockquote></details>\n> <details>\n> <summary>src/components/controls/SdButton/SdButtonLarge/SdButtonLarge.stories.ts (1)</summary><blockquote>\n> \n> `167-191`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n> \n> **AllThemes story renders button without label content.**\n> \n> The `args: {}` provides no default slot content, so the button will appear empty in the theme showcase. Other button stories in the PR (e.g., `SdButtonChip.stories.ts` at Lines 121-148) provide meaningful args like `name: 'Example'`.\n> \n> \n> <details>\n> <summary>üîß Suggested fix to add default label</summary>\n> \n> ```diff\n>  export const AllThemes: Story = {\n> -  args: {},\n> +  args: {\n> +    default: 'Get Started',\n> +  },\n>    render: (args: any) => ({\n>      components: { SdButtonLarge },\n>      setup() {\n>        // ...\n>      },\n>      template: `\n>        <div style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;\">\n>          <div v-for=\"theme in themes\" :key=\"theme.name\" :class=\"theme.class\" style=\"padding: 24px; border-radius: 8px;\">\n>            <div style=\"margin-bottom: 8px; font-weight: 600; color: var(--txt-1);\">{{ theme.name }}</div>\n> -          <sd-button-large v-bind=\"args\" />\n> +          <sd-button-large v-bind=\"args\">{{ args.default }}</sd-button-large>\n>          </div>\n>        </div>\n>      `,\n>    }),\n> ```\n> </details>\n> \n> </blockquote></details>\n> \n> </blockquote></details>\n\n<details>\n<summary>ü§ñ Fix all issues with AI agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts`:\n- Around line 103-121: The story's play asserts args.onClick but args never\nprovides an onClick spy (and the button role may not render without\nclickability) ‚Äî update the story's args to include a spy and enable clicking\n(e.g., add onClick as a spy function and clickable: true), and keep the\nrender/template wiring (render, template, SdBullet, args) unchanged; create the\nspy using your test helper (jest.fn() or Storybook action helper) at top of the\nstory file so play can assert args.onClick was called when userEvent.click hits\nthe button.\n\nIn `@src/components/display/SdChart/SdChart.stories.ts`:\n- Around line 199-206: The play function currently uses canvas.getByText with a\nclass-check callback (canvas.getByText(...\nelement?.classList?.contains('sd-chart'))), which is incorrect; update the\nassertion in the play function to use a semantic or test-id query instead (e.g.,\nwithin(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts`:\n- Around line 102-119: The story's template sets ref=\"imgEl\" on the <img> but\nnever passes that reference to the SdCopyImage component, so the copy behavior\nisn't demonstrated; update the WithImagePreview render setup to create a Vue ref\n(import ref from 'vue'), assign it to the image element (e.g., imgEl), and pass\nit into the SdCopyImage via the imageElement prop (or imageElement: imgEl) and\nensure the `@copy` handler still uses args.onCopy; modify the render function in\nthe WithImagePreview story and add the ref import.\n\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`:\n- Around line 64-71: The story is using createMockGridParams(...) with an as any\noverride which bypasses TypeScript checks for renderer-specific props (useTitle,\ngetRowData, getGhostRowData, gridOptions, ghostRowData); replace that call with\nthe specialized factory createChildTableCellParams(...) from agGridMocks and\npass the same properties (useTitle, getRowData, getGhostRowData/ghostRowData,\ngridOptions) so types are enforced; update the import to pull\ncreateChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`:\n- Around line 72-76: The exported story named Error shadows the global Error and\ntriggers the noShadowRestrictedNames lint rule; rename the export (for example\nchange export const Error to export const ErrorState or KeywordError) and update\nany places that import or reference this story (docs, storybook configs, tests)\nto use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`:\n- Line 2: The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<details>\n<summary>üü° Minor comments (28)</summary><blockquote>\n\n<details>\n<summary>src/components/display/SdTable/SdTableGoogleIntegrations.stories.ts-301-306 (1)</summary><blockquote>\n\n`301-306`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Strengthen AllThemes play assertions to verify each label explicitly.**\n\nThe current regex can pass if any theme name appears elsewhere (e.g., inside table data), masking a missing theme label. It‚Äôs safer to assert each expected label individually.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n     await step('Verify theme grid renders correctly', async () => {\n-      const themeContainers = canvas.getAllByText(/Light|Dark|Nebula Surge|Mountain Cliff|Horizon Hopper|Fall Symphony/);\n-      expect(themeContainers.length).toBeGreaterThanOrEqual(6);\n+      const themeNames = [\n+        'Light',\n+        'Dark',\n+        'Nebula Surge',\n+        'Mountain Cliff',\n+        'Horizon Hopper',\n+        'Fall Symphony',\n+      ];\n+      themeNames.forEach((name) => {\n+        expect(canvas.getByText(name)).toBeTruthy();\n+      });\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/ColumnHeaders/SortColumnHeader/SortColumnHeader.stories.ts-127-139 (1)</summary><blockquote>\n\n`127-139`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function clicks header but doesn't verify the sort result.**\n\nThe interaction test triggers a sort click but lacks an assertion to verify the expected outcome. Consider asserting that a sort indicator appears or the sort state changes:\n\n\n\n<details>\n<summary>üß™ Suggested enhancement</summary>\n\n```diff\n     await step('Click header to trigger sort', async () => {\n       const headerName = canvas.getByText('Volume');\n       await userEvent.click(headerName);\n     });\n+\n+    await step('Verify sort indicator appears', async () => {\n+      // Assert sort arrow or aria-sort attribute is present\n+      const header = canvas.getByRole('button', { name: /volume/i });\n+      await expect(header).toHaveAttribute('aria-sort', 'ascending');\n+    });\n   },\n```\n\n</details>\n\nAdjust the selector and expected attribute based on how `SortColumnHeader` communicates sort state in the DOM.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdBadge/SdBadge.stories.ts-225-233 (1)</summary><blockquote>\n\n`225-233`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function step description doesn't match the assertion.**\n\nThe step says \"Click the secondary icon and verify action event\", but the test clicks the badge button and asserts `onClick` was called‚Äînot `onAction`. If the intent is to test the secondary icon's action callback, the assertion should verify `args.onAction` instead.\n\n\n\n<details>\n<summary>Proposed fix to align description and assertion</summary>\n\nIf testing the secondary icon action:\n```diff\n-    await step('Click the secondary icon and verify action event', async () => {\n-      const badge = canvas.getByRole('button');\n-      await userEvent.click(badge);\n-      await expect(args.onClick).toHaveBeenCalled();\n+    await step('Click badge and verify onClick handler called', async () => {\n+      const badge = canvas.getByRole('button');\n+      await userEvent.click(badge);\n+      await expect(args.onClick).toHaveBeenCalled();\n     });\n```\n\nOr, if you actually want to test the secondary icon triggering `onAction`, update the assertion (and possibly the selector to target the icon specifically).\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSerpList/SdSerpList.stories.ts-57-64 (1)</summary><blockquote>\n\n`57-64`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect use of `getByText` for class-based element selection.**\n\nThe `getByText` query is designed for text content matching, not class-based selection. The callback `((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false)` ignores the text parameter entirely, which makes this query semantically incorrect and potentially flaky.\n\nUse `canvasElement.querySelector` for class-based selection, or verify actual rendered text content instead.\n\n\n\n<details>\n<summary>üîß Proposed fix using querySelector</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n-   const canvas = within(canvasElement);\n-\n    await step('Verify the SERP list renders with grouped items', async () => {\n-     const root = canvas.getByText((_: string, el: Element | null) => el?.classList?.contains('sd-serp-list') ?? false);\n+     const root = canvasElement.querySelector('.sd-serp-list');\n      await expect(root).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBox.stories.ts-101-107 (1)</summary><blockquote>\n\n`101-107`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion may be brittle and mismatches step description.**\n\nThe step describes verifying \"plan tabs\" but actually asserts on a hardcoded price value (`$47`). If the Starter plan pricing changes, this test will fail without any actual regression. Consider asserting on a more stable element that aligns with the step description (e.g., checking for plan tab elements).\n\n\n\n<details>\n<summary>üí° Suggested improvement</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify pricing box renders with plan tabs', async () => {\n-      await expect(canvas.getByText('$47')).toBeInTheDocument();\n+      await expect(canvas.getByRole('tablist')).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, update the step description to match what's being tested:\n```diff\n-    await step('Verify pricing box renders with plan tabs', async () => {\n+    await step('Verify pricing box renders with price display', async () => {\n```\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdVolumeTrends/SdVolumeTrends.stories.ts-96-103 (1)</summary><blockquote>\n\n`96-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Semantic mismatch: `getByText` used to query by CSS class.**\n\nThe play function uses `getByText` with a custom matcher that checks for a CSS class (`sd-volume-trends`), which is semantically incorrect. `getByText` is designed for finding elements by text content, not DOM structure.\n\n\n\n<details>\n<summary>üõ†Ô∏è Proposed fix using querySelector</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Volume trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-volume-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-volume-trends');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\n</details>\n\nAlternatively, if the component has a semantic role, prefer `getByRole` for better accessibility alignment.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemoItem/SdDemoItem.stories.ts-131-137 (1)</summary><blockquote>\n\n`131-137`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Missing `@click` handler wiring in template.**\n\nThe `AllFileTypes` story doesn't pass the `onClick` handler to the demo items, so click events won't appear in the Actions panel. This is inconsistent with the meta args that define `onClick: fn()`.\n\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n     template: `\n       <div style=\"display: flex; gap: 16px;\">\n-        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" />\n-        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Excel\" link=\"/assets/demo/excel.xlsx\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.CSV\" link=\"/assets/demo/csv.csv\" :link-type=\"DemoLinkTypes.Internal\" `@click`=\"args.onClick\" />\n+        <sd-demo-item :file-type=\"DemoFileTypes.Sheets\" link=\"https://docs.google.com/spreadsheets\" :link-type=\"DemoLinkTypes.External\" `@click`=\"args.onClick\" />\n       </div>\n     `,\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPositionTrends/SdPositionTrends.stories.ts-93-100 (1)</summary><blockquote>\n\n`93-100`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Incorrect usage of `getByText` for class-based element selection.**\n\n`getByText` is designed to match elements by their text content, not by class name. The predicate function receives `(content, element)` where `content` is the text content being evaluated. Using it to check `classList.contains()` is a misuse of the API and may fail if the element doesn't have matching text.\n\n\n<details>\n<summary>üõ†Ô∏è Suggested fix using container query</summary>\n\n```diff\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Position trends chart is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-position-trends') ?? false);\n+      const wrapper = canvasElement.querySelector('.sd-position-trends');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\nAlternatively, consider adding a `data-testid=\"sd-position-trends\"` to the component and using `canvas.getByTestId('sd-position-trends')` for more idiomatic Testing Library usage.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/VolumeTrendCellRenderer/VolumeTrendCellRenderer.stories.ts-86-90 (1)</summary><blockquote>\n\n`86-90`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Minor inconsistency: month 1's `prev` value.**\n\nFor month 1, `prev` is set to `5000`, but other stories (trendData12Months, UpwardTrend, DownwardTrend) consistently use `prev: 0` for the first month since there's no preceding month to compare against.\n\n\n\n<details>\n<summary>Suggested fix for consistency</summary>\n\n```diff\n         trends: Array.from({ length: 12 }, (_, i) => ({\n           month: i + 1,\n           value: 5000,\n-          change: { prev: 5000, diff: 0 },\n+          change: { prev: i === 0 ? 0 : 5000, diff: 0 },\n         })),\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdFlag/SdFlag.stories.ts-48-59 (1)</summary><blockquote>\n\n`48-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid hardcoded alt text in the play assertion.**\n\nThe play test hardcodes `'US'`, so it will fail if `args.name` changes. Use `args.name` to derive the expected alt text.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n-  play: async ({ canvasElement, step }) => {\n+  play: async ({ canvasElement, step, args }) => {\n     const canvas = within(canvasElement);\n+    const expectedAlt = String(args.name).toUpperCase();\n\n     await step('Verify flag image is rendered', async () => {\n       const img = canvas.getByRole('img');\n       await expect(img).toBeInTheDocument();\n     });\n\n     await step('Verify alt text matches country code', async () => {\n       const img = canvas.getByRole('img');\n-      await expect(img).toHaveAttribute('alt', 'US');\n+      await expect(img).toHaveAttribute('alt', expectedAlt);\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DateAndTypeCellRenderer/DateAndTypeCellRenderer.stories.ts-140-147 (1)</summary><blockquote>\n\n`140-147`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Type the play function parameters for better type safety.**\n\nThe `({ canvasElement, step }: any)` parameter typing loses type safety. Storybook provides proper types for the play function context‚Äîuse them instead of `any`.\n\nHowever, the date format assertion is correct and not brittle: The component explicitly uses the hardcoded format string `'D.M.YYYY'` (see DateAndTypeCellRenderer.vue line 41), so `'15.6.2024'` is the expected output for input `'2024-06-15'` and will not break due to locale variations.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordDifficultyCellRenderer/KeywordDifficultyCellRenderer.stories.ts-6-10 (1)</summary><blockquote>\n\n`6-10`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**JSDoc difficulty thresholds are internally inconsistent.**\n\nThe meta description states \"green for easy (1-79)\" but the individual story JSDoc comments split this into Medium (40-79) at line 52 and Easy (1-39) at line 63. Either update the meta description to reflect four tiers or reconcile the individual story descriptions.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts-54-103 (1)</summary><blockquote>\n\n`54-103`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Add `showCode` property to `MockGridParams` type to eliminate `as any` cast.**\n\nThe `showCode` property used in the ShowCode story (line 59) is not defined in the `MockGridParams` interface at `.storybook/mocks/agGridMocks.ts`, forcing the `as any` cast. Add `showCode?: boolean;` to the `MockGridParams` interface to properly support this property without type bypass.\n\nAdditionally, remove `any` type annotations from line 83 (`play` function) and line 102 (`render` function) to let Storybook infer the correct types. These are Storybook CSF3 constructs with well-defined types provided by `@storybook/vue3-vite`.\n\n<details>\n<summary>Changes needed</summary>\n\nIn `.storybook/mocks/agGridMocks.ts`, add to the `MockGridParams` interface:\n\n```diff\n export interface MockGridParams {\n   value?: unknown;\n   valueFormatted?: string | unknown[];\n   data?: Record<string, unknown>;\n+  showCode?: boolean;\n   node?: MockNode;\n```\n\nIn `src/components/display/SdTable/CellRenderers/CountryCellRenderer/CountryCellRenderer.stories.ts`:\n\n```diff\n export const ShowCode: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'USA',\n-      showCode: true,\n-    } as any),\n+      showCode: true,\n+    }),\n   },\n };\n\n-  play: async ({ canvasElement, step }: any) => {\n+  play: async ({ canvasElement, step }) => {\n\n-  render: (args: any) => ({\n+  render: (args) => ({\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdEmoji/SdEmoji.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use `queryByRole` so the fallback is reachable.**\n\n`getByRole` throws when the role isn't found, so the `?? canvasElement.querySelector(...)` branch never runs. Use `queryByRole` to keep the intended fallback behavior.\n\n<details>\n<summary>üí° Suggested fix</summary>\n\n```diff\n-      const emoji = canvas.getByRole('img', { hidden: true })\n-        ?? canvasElement.querySelector('.sd-emoji');\n+      const emoji = canvas.queryByRole('img', { hidden: true })\n+        ?? canvasElement.querySelector('.sd-emoji');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdCopyImage/SdCopyImage.stories.ts-57-65 (1)</summary><blockquote>\n\n`57-65`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Same clipboard API concern as SdCopy.**\n\nThe play function may fail in headless CI environments due to clipboard permission requirements. See comment on SdCopy.stories.ts.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdPricingBox/SdPricingBoxCounter/SdPricingBoxCounter.stories.ts-179-205 (1)</summary><blockquote>\n\n`179-205`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the interaction story description with the actual action.**  \nThe docstring says ‚Äúclicking the increment button,‚Äù but the play function only focuses the input. Either update the text or change the play to click the increment control. Here‚Äôs a minimal text fix to match current behavior:\n\n<details>\n<summary>Suggested update</summary>\n\n```diff\n- * Interaction test: clicking the increment button\n+ * Interaction test: focusing the counter input\n...\n-    await step('Click the input to focus it', async () => {\n+    await step('Focus the counter input', async () => {\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts-86-88 (1)</summary><blockquote>\n\n`86-88`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Align the JSDoc with the actual play assertions.**\n\nThe description says the icon is verified, but the play function only checks the text. Either add an icon assertion or reword the description to avoid misleading docs.\n\n<details>\n<summary>‚úèÔ∏è Minimal fix (description)</summary>\n\n```diff\n-/**\n- * Verifies the keyword text and state icon are rendered in the DOM\n- */\n+/**\n+ * Verifies the keyword text is rendered in the DOM\n+ */\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-71-84 (1)</summary><blockquote>\n\n`71-84`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Normalize season distributions to 1.0 in story args (and docs snippet).**\n\nThese stories describe a *distribution* across four seasons, but the values currently sum > 1.0. This can mislead consumers and skew visual expectations. If the intent is a true distribution, normalize these to total 1.0 and keep the docs snippet aligned with the args.  \n\n\n<details>\n<summary>üîß Suggested normalization</summary>\n\n```diff\n-        code: html`<sd-seasonality :spring=\"0.18\" :summer=\"0.52\" :fall=\"0.35\" :winter=\"0.15\" />`,\n+        code: html`<sd-seasonality :spring=\"0.15\" :summer=\"0.4\" :fall=\"0.3\" :winter=\"0.15\" />`,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n\n-    spring: 0.25,\n-    summer: 0.85,\n-    fall: 0.1,\n-    winter: 0.05,\n+    spring: 0.05,\n+    summer: 0.85,\n+    fall: 0.05,\n+    winter: 0.05,\n\n-    spring: 0.08,\n-    summer: 0.05,\n-    fall: 0.22,\n-    winter: 0.9,\n+    spring: 0.03,\n+    summer: 0.02,\n+    fall: 0.05,\n+    winter: 0.9,\n\n-    spring: 0.18,\n-    summer: 0.52,\n-    fall: 0.35,\n-    winter: 0.15,\n+    spring: 0.15,\n+    summer: 0.4,\n+    fall: 0.3,\n+    winter: 0.15,\n```\n</details>\n\n\nAlso applies to: 107-112, 147-152, 203-208\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdSeasonality/SdSeasonality.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Use a direct DOM query instead of `getByText` with class predicate in play function.**\n\nLine 89 uses `getByText` with a class predicate, which is non-idiomatic and can be flaky/ambiguous because it's text-driven. Use `querySelector` directly to query the root element.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-import { expect, within } from 'storybook/test';\n+import { expect } from 'storybook/test';\n\n   play: async ({ canvasElement, step }: any) => {\n-    const canvas = within(canvasElement);\n-\n     await step('Seasonality component is rendered with four season items', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-seasonality') ?? false);\n-      await expect(wrapper).toBeInTheDocument();\n+      const wrapper = canvasElement.querySelector('.sd-seasonality');\n+      expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdDemo/SdDemo.stories.ts-88-101 (1)</summary><blockquote>\n\n`88-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play test doesn‚Äôt assert the emitted payload.**  \nThe step description says it verifies the correct file type, but it only checks that the handler was called. Consider asserting the expected value to prevent silent regressions.  \n\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\n       const cards = canvas.getAllByText(/Excel|CSV|Google Sheets/);\n       await userEvent.click(cards[0]);\n-      await expect(args.onSelect).toHaveBeenCalled();\n+      await expect(args.onSelect).toHaveBeenCalledWith(DemoFileTypes.Excel);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdLinkIcon/SdLinkIcon.stories.ts-143-162 (1)</summary><blockquote>\n\n`143-162`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**ToolbarGroup doesn't forward `args`, so controls/actions won't apply.**\n\nThe story hard-codes props for each icon and ignores `args.disabled` / `args.onClick`, so toggling controls won't affect the toolbar items and clicks won't show in Actions. Consider spreading `args` into each icon (and optionally disable the `name` control for this story).\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-        <sd-link-icon :name=\"IconTypes.Pencil\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Copy\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Trash\" :size=\"args.size\" />\n-        <sd-link-icon :name=\"IconTypes.Gear\" :size=\"args.size\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Pencil\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Copy\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Trash\" />\n+        <sd-link-icon v-bind=\"args\" :name=\"IconTypes.Gear\" />\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableSort/SdTableSortItem/SdTableSortItem.stories.ts-75-108 (1)</summary><blockquote>\n\n`75-108`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Make the play query resilient to multiple buttons.**\n\nLine 91 uses `getByRole('button')`, which will throw if more than one button is rendered. The component renders multiple buttons: two metric/sort type selectors (sd-dropdown-button elements) and a remove button (sd-link-icon). Use `getAllByRole` with a count assertion instead.\n\n<details>\n<summary>üõ†Ô∏è Suggested fix</summary>\n\n```diff\n-    const sortItem = canvas.getByRole('button');\n-    await expect(sortItem).toBeInTheDocument();\n+    const buttons = canvas.getAllByRole('button');\n+    await expect(buttons.length).toBeGreaterThan(0);\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/InsightsCellRenderer/InsightsCellRenderer.stories.ts-141-161 (1)</summary><blockquote>\n\n`141-161`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Avoid `getByText` throwing before the fallback executes.**\n\n`getByText` throws when no text is present, so the fallback `querySelector` never runs. For icon-only renders, this causes the test to fail immediately instead of attempting the fallback query. Use `queryByText` instead.\n\n<details>\n<summary>Suggested fix</summary>\n\n```diff\n-      const container = canvas.getByText(/./).closest('.insights-cell')\n-        ?? canvasElement.querySelector('.insights-cell');\n+      const container = canvas.queryByText(/./)?.closest('.insights-cell')\n+        ?? canvasElement.querySelector('.insights-cell');\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableOverview.stories.ts-54-85 (1)</summary><blockquote>\n\n`54-85`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function won't execute due to `skip-test` tag.**\n\nThe Default story has both a play function (Lines 80-84) and `tags: ['skip-test']` (Line 55). The play function will never execute during test runs, making it effectively dead code.\n\nIf the circular import issue is resolved, consider removing the skip-test tag. Otherwise, removing the play function would reduce maintenance burden.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/CellRenderers/DeviceCellRenderer/DeviceCellRenderer.stories.ts-94-101 (1)</summary><blockquote>\n\n`94-101`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Play function assertion is too permissive.**\n\nThe regex `/./ ` matches any single character, making this test pass even if the component renders incorrect or unrelated content. This doesn't verify that the device name is actually rendered.\n\n\n<details>\n<summary>üîß Suggested improvement for meaningful assertion</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Verify device cell content is rendered', async () => {\n-      const cell = canvas.getByText(/./);\n+      const cell = canvas.getByText(/desktop/i);\n       await expect(cell).toBeInTheDocument();\n     });\n   },\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdMetaData/SdMetaData.stories.ts-64-83 (1)</summary><blockquote>\n\n`64-83`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Match the test assertion to the component's actual format behavior.**\n\nThe hardcoded `'12,345'` has two issues: it's locale-dependent, and it doesn't match what the component actually renders. The `SdMetaData` component defaults to `format='compact'`, which would render `12345` as `\"12K\"` (not `\"12,345\"`). The suggested `Intl.NumberFormat()` fix addresses the locale concern but produces the wrong output‚Äîit formats as decimal while the component uses compact.\n\nEither explicitly set `format: 'decimal'` in args and derive the expected value from vue-i18n's `n()` function (matching the component's actual formatter), or update the test to expect the compact format output. The former approach is recommended:\n\n<details>\n<summary>üîß Suggested adjustment</summary>\n\n```diff\nargs: {\n  title: 'Title',\n  value: 12345,\n+ format: 'decimal',\n},\nplay: async ({ canvasElement, step, args }: any) => {\n  const canvas = within(canvasElement);\n+ const { n } = useI18n();\n+ const formattedValue = n(args.value, args.format);\n\n  await step('Verify title and value are rendered', async () => {\n    await expect(canvas.getByText('Title')).toBeInTheDocument();\n-   await expect(canvas.getByText('12,345')).toBeInTheDocument();\n+   await expect(canvas.getByText(formattedValue)).toBeInTheDocument();\n  });\n},\n```\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/components/features/analytics/SdDailyComparisonUrlList/SdDailyComparisonUrlList.stories.ts-2-2 (1)</summary><blockquote>\n\n`2-2`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change the import path from `storybook/test` to `@storybook/test`.** Storybook 10.1.11 supports and recommends importing from `@storybook/test`, the official package. The unscoped `storybook/test` subpath import has shown compatibility issues in Storybook 10 and is not the standard API surface.\n\n</blockquote></details>\n<details>\n<summary>src/components/display/SdTable/SdTableMarket.stories.ts-59-59 (1)</summary><blockquote>\n\n`59-59`: _‚ö†Ô∏è Potential issue_ | _üü° Minor_\n\n**Change to `story` for consistency with the other stories in this file.**\n\nAll other stories in `SdTableMarket.stories.ts` use `docs.description.story` (CompetitorsKeywords, CompetitionOverview, DailyComparison, MarketChild, and PositionDistribution), so CompetitorsDomain should follow the same convention.\n\n<details>\n<summary>üõ†Ô∏è Proposed fix</summary>\n\n```diff\n-        component: 'Table view for the `Market Competitors Domain` section.',\n+        story: 'Table view for the `Market Competitors Domain` section.',\n```\n</details>\n\n</blockquote></details>\n\n</blockquote></details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
          "createdAt": "2026-02-03T07:32:44Z",
          "type": "review",
          "issue": "[NOTE]",
          "suggestion": ">  /**\n> - * All themes showcase - displays both link relation states across all available themes.\n> + * All themes showcase - displays the Dofollow link relation state across all available themes.\n>   */\n>"
        },
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFn",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Clickable story needs an `onClick` spy (and likely `clickable`) to make the play assertion valid.**\n\n`args.onClick` is never set, so the play assertion will throw. If SdBullet requires a `clickable` prop to render a button role, `getByRole('button')` will also fail. Please align this story with other Clickable patterns by providing an `onClick: fn()` and enabling clickability.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({\n```\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  args: {\n    active: true,\n    color: BulletColor.Indigo,\n    clickable: true,\n    onClick: fn(),\n  },\n  render: (args: any) => ({\n    components: { SdBullet },\n    setup() {\n      return { args };\n    },\n    template: '<SdBullet v-bind=\"args\" `@click`=\"args.onClick\" />',\n  }),\n  play: async ({ canvasElement, args, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Click bullet and verify handler called', async () => {\n      const bullet = canvas.getByRole('button');\n      await userEvent.click(bullet);\n      await expect(args.onClick).toHaveBeenCalled();\n    });\n```\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts` around lines 103 - 121,\nThe story's play asserts args.onClick but args never provides an onClick spy\n(and the button role may not render without clickability) ‚Äî update the story's\nargs to include a spy and enable clicking (e.g., add onClick as a spy function\nand clickable: true), and keep the render/template wiring (render, template,\nSdBullet, args) unchanged; create the spy using your test helper (jest.fn() or\nStorybook action helper) at top of the story file so play can assert\nargs.onClick was called when userEvent.click hits the button.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Clickable story needs an `onClick` spy (and likely `clickable`) to make the play assertion valid.**\n\n`args.onClick` is never set, so the play assertion will throw. If SdBullet requires a `clickable` prop to render a button role, `getByRole('button')` will also fail. Please align this story with other Clickable patterns by providing an `onClick: fn()` and enabling clickability.\n\n<details>\n<summary>‚úÖ Suggested fix</summary>\n\n```diff\n export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  args: {\n    active: true,\n    color: BulletColor.Indigo,\n    clickable: true,\n    onClick: fn(),\n  },\n  render: (args: any) => ({\n    components: { SdBullet },\n    setup() {\n      return { args };\n    },\n    template: '<SdBullet v-bind=\"args\" `@click`=\"args.onClick\" />',\n  }),\n  play: async ({ canvasElement, args, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Click bullet and verify handler called', async () => {\n      const bullet = canvas.getByRole('button');\n      await userEvent.click(bullet);\n      await expect(args.onClick).toHaveBeenCalled();\n    });\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdBullet/SdBullet.stories.ts` around lines 103 - 121,\nThe story's play asserts args.onClick but args never provides an onClick spy\n(and the button role may not render without clickability) ‚Äî update the story's\nargs to include a spy and enable clicking (e.g., add onClick as a spy function\nand clickable: true), and keep the render/template wiring (render, template,\nSdBullet, args) unchanged; create the spy using your test helper (jest.fn() or\nStorybook action helper) at top of the story file so play can assert\nargs.onClick was called when userEvent.click hits the button.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdBullet/SdBullet.stories.ts",
          "line": 103,
          "diffHunk": "@@ -93,6 +96,32 @@ export const MultiColor: Story = {\n   },\n };\n \n+/**\n+ * Clickable bullet that responds to user interaction\n+ */\n+export const Clickable: Story = {\n+  args: {\n+    active: true,\n+    color: BulletColor.Indigo,\n+  },\n+  render: (args: any) => ({\n+    components: { SdBullet },\n+    setup() {\n+      return { args };\n+    },\n+    template: '<SdBullet v-bind=\"args\" @click=\"args.onClick\" />',\n+  }),\n+  play: async ({ canvasElement, args, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Click bullet and verify handler called', async () => {\n+      const bullet = canvas.getByRole('button');\n+      await userEvent.click(bullet);\n+      await expect(args.onClick).toHaveBeenCalled();\n+    });",
          "isResolved": false,
          "suggestion": "export const Clickable: Story = {\n   args: {\n     active: true,\n     color: BulletColor.Indigo,\n+    clickable: true,\n+    onClick: fn(),\n   },\n   render: (args: any) => ({"
        },
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFw",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Play function assertion has incorrect query approach.**\n\nThe `getByText` with a class check callback is semantically incorrect. `getByText` is meant to find elements by their text content, not by CSS class. This assertion may pass accidentally if any text element happens to have ancestors with `.sd-chart`, but it doesn't properly verify the chart rendered.\n\n<details>\n<summary>üêõ Suggested fix using proper query</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, add a `data-testid` attribute to the chart component for more reliable testing.\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Chart wrapper is rendered', async () => {\n      // Query the chart container directly\n      const wrapper = canvasElement.querySelector('.sd-chart');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdChart/SdChart.stories.ts` around lines 199 - 206,\nThe play function currently uses canvas.getByText with a class-check callback\n(canvas.getByText(... element?.classList?.contains('sd-chart'))), which is\nincorrect; update the assertion in the play function to use a semantic or\ntest-id query instead (e.g., within(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Play function assertion has incorrect query approach.**\n\nThe `getByText` with a class check callback is semantically incorrect. `getByText` is meant to find elements by their text content, not by CSS class. This assertion may pass accidentally if any text element happens to have ancestors with `.sd-chart`, but it doesn't properly verify the chart rendered.\n\n\n<details>\n<summary>üêõ Suggested fix using proper query</summary>\n\n```diff\n   play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },\n```\n\nAlternatively, add a `data-testid` attribute to the chart component for more reliable testing.\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  play: async ({ canvasElement, step }: any) => {\n    const canvas = within(canvasElement);\n\n    await step('Chart wrapper is rendered', async () => {\n      // Query the chart container directly\n      const wrapper = canvasElement.querySelector('.sd-chart');\n      await expect(wrapper).toBeInTheDocument();\n    });\n  },\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdChart/SdChart.stories.ts` around lines 199 - 206,\nThe play function currently uses canvas.getByText with a class-check callback\n(canvas.getByText(... element?.classList?.contains('sd-chart'))), which is\nincorrect; update the assertion in the play function to use a semantic or\ntest-id query instead (e.g., within(canvasElement).getByRole(...) or\nwithin(canvasElement).getByTestId('sd-chart')) and add a data-testid=\"sd-chart\"\nto the chart component if needed so the test reliably selects the chart wrapper;\nensure you update the play function's wrapper lookup and the expectation to use\nthe new query (replace canvas.getByText usage with getByRole/getByTestId in the\nplay block).\n```\n\n</details>\n\n<!-- fingerprinting:phantom:medusa:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdChart/SdChart.stories.ts",
          "line": 199,
          "diffHunk": "@@ -173,18 +196,29 @@ export const Line: Story = {\n       'Dataset 2': 'var(--lime)',\n     },\n   },\n+  play: async ({ canvasElement, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Chart wrapper is rendered', async () => {\n+      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      await expect(wrapper).toBeInTheDocument();\n+    });\n+  },",
          "isResolved": false,
          "suggestion": "play: async ({ canvasElement, step }: any) => {\n     const canvas = within(canvasElement);\n \n     await step('Chart wrapper is rendered', async () => {\n-      const wrapper = canvas.getByText((_content: string, element: Element | null) => element?.classList?.contains('sd-chart') ?? false);\n+      // Query the chart container directly\n+      const wrapper = canvasElement.querySelector('.sd-chart');\n       await expect(wrapper).toBeInTheDocument();\n     });\n   },"
        },
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFx",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**The `imageElement` ref is defined but not wired to the component.**\n\nThe template defines `ref=\"imgEl\"` on the image element, but this ref is never passed to `sd-copy-image` via the `imageElement` prop. This story visually shows an image but doesn't actually demonstrate the copy-image functionality.\n\n<details>\n<summary>üêõ Proposed fix to wire up the image reference</summary>\n\n```diff\n export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };\n```\n\nYou'll also need to import `ref` from Vue at the top of the file:\n\n```typescript\nimport { ref } from 'vue';\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts` around lines 102 -\n119, The story's template sets ref=\"imgEl\" on the <img> but never passes that\nreference to the SdCopyImage component, so the copy behavior isn't demonstrated;\nupdate the WithImagePreview render setup to create a Vue ref (import ref from\n'vue'), assign it to the image element (e.g., imgEl), and pass it into the\nSdCopyImage via the imageElement prop (or imageElement: imgEl) and ensure the\n`@copy` handler still uses args.onCopy; modify the render function in the\nWithImagePreview story and add the ref import.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**The `imageElement` ref is defined but not wired to the component.**\n\nThe template defines `ref=\"imgEl\"` on the image element, but this ref is never passed to `sd-copy-image` via the `imageElement` prop. This story visually shows an image but doesn't actually demonstrate the copy-image functionality.\n\n\n\n<details>\n<summary>üêõ Proposed fix to wire up the image reference</summary>\n\n```diff\n export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };\n```\n\nYou'll also need to import `ref` from Vue at the top of the file:\n\n```typescript\nimport { ref } from 'vue';\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn `@src/components/display/SdCopyImage/SdCopyImage.stories.ts` around lines 102 -\n119, The story's template sets ref=\"imgEl\" on the <img> but never passes that\nreference to the SdCopyImage component, so the copy behavior isn't demonstrated;\nupdate the WithImagePreview render setup to create a Vue ref (import ref from\n'vue'), assign it to the image element (e.g., imgEl), and pass it into the\nSdCopyImage via the imageElement prop (or imageElement: imgEl) and ensure the\n`@copy` handler still uses args.onCopy; modify the render function in the\nWithImagePreview story and add the ref import.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdCopyImage/SdCopyImage.stories.ts",
          "line": 102,
          "diffHunk": "@@ -31,15 +45,84 @@ const meta = {\n export default meta;\n type Story = StoryObj<typeof meta>;\n \n+/**\n+ * Default copy image button\n+ */\n export const Default: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n     setup() { return { args }; },\n     template: '<sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">Copy Image</sd-copy-image>',\n   }),\n+  play: async ({ canvasElement, args, step }: any) => {\n+    const canvas = within(canvasElement);\n+\n+    await step('Click the copy image button', async () => {\n+      const button = canvas.getByRole('button');\n+      await userEvent.click(button);\n+      await expect(args.onCopy).toHaveBeenCalled();\n+    });\n+  },\n };\n \n+/**\n+ * Copy image button rendered as a custom HTML element\n+ */\n+export const WithCustomElement: Story = {\n+  args: {\n+    as: 'span',\n+  },\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: '<sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\" style=\"cursor: pointer; text-decoration: underline;\">Copy as span</sd-copy-image>',\n+  }),\n+};\n+\n+/**\n+ * Copy image button with scoped slot showing copied state\n+ */\n+export const ScopedSlot: Story = {\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: `\n+      <sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">\n+        <template #default=\"{ copied }\">\n+          {{ copied ? 'Image Copied!' : 'Click to copy image' }}\n+        </template>\n+      </sd-copy-image>\n+    `,\n+  }),\n+};\n+\n+/**\n+ * Copy image with an inline image element reference\n+ */\n+export const WithImagePreview: Story = {\n+  render: (args: any) => ({\n+    components: { SdCopyImage },\n+    setup() { return { args }; },\n+    template: `\n+      <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n+        <img\n+          ref=\"imgEl\"\n+          src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n+          alt=\"Sample image\"\n+          crossorigin=\"anonymous\"\n+          style=\"border-radius: 8px;\"\n+        />\n+        <sd-copy-image v-bind=\"args\" @copy=\"args.onCopy\">Copy This Image</sd-copy-image>\n+      </div>\n+    `,\n+  }),\n+};",
          "isResolved": false,
          "suggestion": "export const WithImagePreview: Story = {\n   render: (args: any) => ({\n     components: { SdCopyImage },\n-    setup() { return { args }; },\n+    setup() {\n+      const imgEl = ref<HTMLImageElement | null>(null);\n+      return { args, imgEl };\n+    },\n     template: `\n       <div style=\"display: flex; flex-direction: column; align-items: center; gap: 12px;\">\n         <img\n           ref=\"imgEl\"\n           src=\"https://placehold.co/200x100/6366f1/white?text=Copy+Me\"\n           alt=\"Sample image\"\n           crossorigin=\"anonymous\"\n           style=\"border-radius: 8px;\"\n         />\n-        <sd-copy-image v-bind=\"args\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n+        <sd-copy-image v-bind=\"args\" :image-element=\"imgEl\" `@copy`=\"args.onCopy\">Copy This Image</sd-copy-image>\n       </div>\n     `,\n   }),\n };"
        },
        {
          "id": "PRRC_kwDOQ5kgRs6kXgFz",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_üõ†Ô∏è Refactor suggestion_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\n# First, let's view the actual file to confirm the code structure\ncat -n src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts | head -80\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 3072\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the MockGridParams interface definition\nfd -e ts -e tsx | xargs rg -l \"MockGridParams\" | head -5\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 574\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Run the verification script to check how many cell renderer stories use this pattern\nrg -c 'createMockGridParams\\(.*as any\\)' src/components/display/SdTable/CellRenderers/\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check all instances of 'as any' used with createMockGridParams in this specific file\nrg -n 'createMockGridParams.*as any' src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for 'as any' in cell renderer stories\nrg 'as any' src/components/display/SdTable/CellRenderers/ -t ts --glob=\"*.stories.ts\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1652\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find MockGridParams interface definition\nrg -n \"interface MockGridParams|type MockGridParams\" --glob=\"*.ts\" --glob=\"*.tsx\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check the agGridMocks file mentioned in the import\nfd agGridMocks -e ts -e tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file content\ncat src/storybook-mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also check if there's a type definition file\nfd agGridMocks -e d.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the agGridMocks file\nfd agGridMocks\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also search for the file by content\nrg -l \"createMockGridParams\" --type ts --type tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 100\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for the definition of createMockGridParams\nrg \"export.*createMockGridParams|function createMockGridParams\" --type ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check tsconfig for path aliases\ncat tsconfig.json | head -50\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1409\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find all mocks directories\nfd -t d \"mocks|mock\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file at the correct location\ncat ./.storybook/mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 7967\n\n---\n\n</details>\n\n**Use specialized factory functions instead of `as any` workarounds.**\n\nThe `as any` assertions bypass TypeScript type safety for custom renderer-specific properties like `useTitle`, `getRowData`, `gridOptions`, and `ghostRowData`. This pattern is used across multiple cell renderer stories (at least 14 instances), indicating a systemic issue.\n\nThe `agGridMocks.ts` module already provides specialized factory functions for this purpose‚Äîfor example, `createChildTableCellParams()` is designed exactly for this renderer. Use the appropriate specialized function instead of `createMockGridParams()` with `as any` to maintain type safety and avoid potential property typos.\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`\naround lines 64 - 71, The story is using createMockGridParams(...) with an as\nany override which bypasses TypeScript checks for renderer-specific props\n(useTitle, getRowData, getGhostRowData, gridOptions, ghostRowData); replace that\ncall with the specialized factory createChildTableCellParams(...) from\nagGridMocks and pass the same properties (useTitle, getRowData,\ngetGhostRowData/ghostRowData, gridOptions) so types are enforced; update the\nimport to pull createChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n```\n\n</details>",
          "rawBody": "_üõ†Ô∏è Refactor suggestion_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\n# First, let's view the actual file to confirm the code structure\ncat -n src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts | head -80\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 3072\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the MockGridParams interface definition\nfd -e ts -e tsx | xargs rg -l \"MockGridParams\" | head -5\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 574\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Run the verification script to check how many cell renderer stories use this pattern\nrg -c 'createMockGridParams\\(.*as any\\)' src/components/display/SdTable/CellRenderers/\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check all instances of 'as any' used with createMockGridParams in this specific file\nrg -n 'createMockGridParams.*as any' src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for 'as any' in cell renderer stories\nrg 'as any' src/components/display/SdTable/CellRenderers/ -t ts --glob=\"*.stories.ts\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1652\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find MockGridParams interface definition\nrg -n \"interface MockGridParams|type MockGridParams\" --glob=\"*.ts\" --glob=\"*.tsx\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check the agGridMocks file mentioned in the import\nfd agGridMocks -e ts -e tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file content\ncat src/storybook-mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also check if there's a type definition file\nfd agGridMocks -e d.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find the agGridMocks file\nfd agGridMocks\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Also search for the file by content\nrg -l \"createMockGridParams\" --type ts --type tsx\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 100\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Search for the definition of createMockGridParams\nrg \"export.*createMockGridParams|function createMockGridParams\" --type ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 55\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Check tsconfig for path aliases\ncat tsconfig.json | head -50\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 1409\n\n---\n\nüèÅ Script executed:\n\n```shell\n# Find all mocks directories\nfd -t d \"mocks|mock\"\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 139\n\n---\n\nüèÅ Script executed:\n\n```shell\n# View the agGridMocks file at the correct location\ncat ./.storybook/mocks/agGridMocks.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 7967\n\n---\n\n\n\n</details>\n\n**Use specialized factory functions instead of `as any` workarounds.**\n\nThe `as any` assertions bypass TypeScript type safety for custom renderer-specific properties like `useTitle`, `getRowData`, `gridOptions`, and `ghostRowData`. This pattern is used across multiple cell renderer stories (at least 14 instances), indicating a systemic issue.\n\nThe `agGridMocks.ts` module already provides specialized factory functions for this purpose‚Äîfor example, `createChildTableCellParams()` is designed exactly for this renderer. Use the appropriate specialized function instead of `createMockGridParams()` with `as any` to maintain type safety and avoid potential property typos.\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts`\naround lines 64 - 71, The story is using createMockGridParams(...) with an as\nany override which bypasses TypeScript checks for renderer-specific props\n(useTitle, getRowData, getGhostRowData, gridOptions, ghostRowData); replace that\ncall with the specialized factory createChildTableCellParams(...) from\nagGridMocks and pass the same properties (useTitle, getRowData,\ngetGhostRowData/ghostRowData, gridOptions) so types are enforced; update the\nimport to pull createChildTableCellParams and remove the as any cast in\nChildTableCellRenderer.stories.ts.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:ocelot -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/ChildTableCellRenderer/ChildTableCellRenderer.stories.ts",
          "line": 64,
          "diffHunk": "@@ -26,41 +31,145 @@ const meta = {\n export default meta;\n type Story = StoryObj<typeof meta>;\n \n+const sampleColumnDefs = [\n+  { field: 'keyword', headerName: 'Keyword' },\n+  { field: 'volume', headerName: 'Volume' },\n+  { field: 'visibility', headerName: 'Visibility' },\n+  { field: 'traffic', headerName: 'Traffic' },\n+  { field: 'position', headerName: 'Position' },\n+];\n+\n const sampleRowData = [\n   {\n     keyword: 'seo software tool',\n     volume: { value: 123400 },\n     visibility: { value: 0.23, change: { prev: 0.1, diff: 0.13 } },\n     traffic: { value: 56700, change: { prev: 56500, diff: 200 } },\n     position: { value: 23, change: { prev: 33, diff: 10 } },\n-    visualRank: { value: 2, change: { prev: 1, diff: 1 } },\n-    pixelRank: { value: 120, change: { prev: 250, diff: 130 } },\n-    adsValue: { value: 1200, change: { prev: 1000, diff: 200 } },\n+  },\n+  {\n+    keyword: 'keyword tracking',\n+    volume: { value: 45000 },\n+    visibility: { value: 0.45, change: { prev: 0.4, diff: 0.05 } },\n+    traffic: { value: 12300, change: { prev: 11000, diff: 1300 } },\n+    position: { value: 5, change: { prev: 8, diff: 3 } },\n   },\n ];\n \n-const sampleColumnDefs = [\n-  { field: 'keyword', headerName: 'Keyword' },\n-  { field: 'volume', headerName: 'Volume' },\n-  { field: 'visibility', headerName: 'Visibility' },\n-  { field: 'traffic', headerName: 'Traffic' },\n-  { field: 'position', headerName: 'Position' },\n-];\n+/**\n+ * Default child table with sample keyword data\n+ */\n+export const Default: Story = {\n+  args: {\n+    params: createMockGridParams({\n+      columnDefs: sampleColumnDefs,\n+      useTitle: () => 'Keyword Breakdown',\n+      getRowData: () => sampleRowData,\n+      getGhostRowData: () => [],\n+      gridOptions: {},\n+      ghostRowData: [],\n+    } as any),",
          "isResolved": false
        },
        {
          "id": "PRRC_kwDOQ5kgRs6kXgF1",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Rename the `Error` story to avoid shadowing the global `Error`.**\n\nBiome flags this as a lint error (`noShadowRestrictedNames`). It can break lint CI. Rename the export (and update any doc references if needed).\n\n<details>\n<summary>‚úÖ Proposed fix</summary>\n\n```diff\n-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };\n```\n</details>\n\n<details>\n<summary>üìù Committable suggestion</summary>\n‚ÄºÔ∏è **IMPORTANT**\nCarefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n/**\n * Keyword in error state with X-mark circle icon and error gradient\n */\nexport const ErrorState: Story = {\n  args: {\n```\n\n</details>\n\n<details>\n<summary>üß∞ Tools</summary>\n\n<details>\n<summary>ü™õ Biome (2.3.13)</summary>\n\n[error] 75-75: Do not shadow the global \"Error\" property.\n\nConsider renaming this variable. It's easy to confuse the origin of variables when they're named after a known global.\n\n(lint/suspicious/noShadowRestrictedNames)\n\n</details>\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`\naround lines 72 - 76, The exported story named Error shadows the global Error\nand triggers the noShadowRestrictedNames lint rule; rename the export (for\nexample change export const Error to export const ErrorState or KeywordError)\nand update any places that import or reference this story (docs, storybook\nconfigs, tests) to use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n**Rename the `Error` story to avoid shadowing the global `Error`.**\n\nBiome flags this as a lint error (`noShadowRestrictedNames`). It can break lint CI. Rename the export (and update any doc references if needed).\n\n<details>\n<summary>‚úÖ Proposed fix</summary>\n\n```diff\n-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>üìù Committable suggestion</summary>\n\n> ‚ÄºÔ∏è **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n/**\n * Keyword in error state with X-mark circle icon and error gradient\n */\nexport const ErrorState: Story = {\n  args: {\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>üß∞ Tools</summary>\n\n<details>\n<summary>ü™õ Biome (2.3.13)</summary>\n\n[error] 75-75: Do not shadow the global \"Error\" property.\n\nConsider renaming this variable. It's easy to confuse the origin of variables when they're named after a known global.\n\n(lint/suspicious/noShadowRestrictedNames)\n\n</details>\n\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts`\naround lines 72 - 76, The exported story named Error shadows the global Error\nand triggers the noShadowRestrictedNames lint rule; rename the export (for\nexample change export const Error to export const ErrorState or KeywordError)\nand update any places that import or reference this story (docs, storybook\nconfigs, tests) to use the new identifier (look for the symbol Error in\nKeywordStateCellRenderer.stories and adjust its usage accordingly).\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:43Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/KeywordStateCellRenderer/KeywordStateCellRenderer.stories.ts",
          "line": 72,
          "diffHunk": "@@ -65,20 +70,79 @@ export const InProgress: Story = {\n };\n \n /**\n- * Keyword in error state.\n+ * Keyword in error state with X-mark circle icon and error gradient\n  */\n export const Error: Story = {\n   args: {",
          "isResolved": false,
          "suggestion": "-export const Error: Story = {\n+export const ErrorState: Story = {\n   args: {\n     params: createMockGridParams({\n       value: 'failed keyword lookup',\n       data: {\n         keywordState: KeywordStateTypes.Error,\n       },\n     }),\n   },\n };"
        },
        {
          "id": "PRRC_kwDOQ5kgRs6kXgF8",
          "agent": "coderabbit",
          "author": "coderabbitai",
          "body": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\nfind . -name \"PositionTrendCellRenderer.stories.ts\" -type f\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 182\n\n---\n\nüèÅ Script executed:\n\n```shell\ncat -n ./src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 8700\n\n---\n\nüåê Web query:\n\n`Testing Library getByRole throws error when element not found`\n\nüí° Result:\n\n`getByRole` **is supposed to throw** when it can‚Äôt find a match (or when it finds more than one match). That‚Äôs how all `getBy*` queries behave in Testing Library. Use a different query depending on what you‚Äôre testing: ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### What to use instead\n\n- **Asserting it is *not* present** (no throw):\n  ```js\n  expect(screen.queryByRole('button', { name: /save/i })).not.toBeInTheDocument()\n  ```\n  `queryBy*` returns `null` when not found. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n- **Element appears asynchronously** (wait + throw if it never appears):\n  ```js\n  const btn = await screen.findByRole('button', { name: /save/i })\n  ```\n  `findBy*` retries until timeout, then rejects. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### Common ‚Äúfound in DOM but not by role‚Äù gotchas\n\n- The element might be **hidden/inaccessible**, so `getByRole` won‚Äôt match unless you include hidden elements:\n  ```js\n  screen.getByRole('button', { name: /save/i, hidden: true })\n  ```\n  ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\n- The **role or accessible name** might not be what you think (Testing Library uses the accessibility tree). When `getByRole` throws, read the ‚ÄúHere are the available roles‚Äù section in the error to see what it *can* access. ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\nCitations:\n\n- 1: https://testing-library.com/docs/queries/about?utm_source=openai\n- 2: https://testing-library.com/docs/queries/about?utm_source=openai\n- 3: https://testing-library.com/docs/queries/about?utm_source=openai\n- 4: https://testing-library.com/docs/queries/byrole?utm_source=openai\n- 5: https://testing-library.com/docs/queries/byrole?utm_source=openai\n\n---\n\n</details>\n\n**Use `queryByRole` with proper fallback logic to prevent test failure when the element lacks `role=\"img\"`.**\n\nWhen `getByRole` doesn't find a match, it throws an error immediately‚Äîthe OR operator never evaluates the fallback selector. Use `queryByRole` (which returns `null` instead of throwing) or `findByRole` with proper fallback handling.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\nawait step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`\nat line 2, The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>",
          "rawBody": "_‚ö†Ô∏è Potential issue_ | _üü† Major_\n\n<details>\n<summary>üß© Analysis chain</summary>\n\nüèÅ Script executed:\n\n```shell\nfind . -name \"PositionTrendCellRenderer.stories.ts\" -type f\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 182\n\n---\n\nüèÅ Script executed:\n\n```shell\ncat -n ./src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts\n```\n\nRepository: yigitkonur/design-system-wope\n\nLength of output: 8700\n\n---\n\nüåê Web query:\n\n`Testing Library getByRole throws error when element not found`\n\nüí° Result:\n\n`getByRole` **is supposed to throw** when it can‚Äôt find a match (or when it finds more than one match). That‚Äôs how all `getBy*` queries behave in Testing Library. Use a different query depending on what you‚Äôre testing: ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### What to use instead\n\n- **Asserting it is *not* present** (no throw):\n  ```js\n  expect(screen.queryByRole('button', { name: /save/i })).not.toBeInTheDocument()\n  ```\n  `queryBy*` returns `null` when not found. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n- **Element appears asynchronously** (wait + throw if it never appears):\n  ```js\n  const btn = await screen.findByRole('button', { name: /save/i })\n  ```\n  `findBy*` retries until timeout, then rejects. ([testing-library.com](https://testing-library.com/docs/queries/about?utm_source=openai))\n\n### Common ‚Äúfound in DOM but not by role‚Äù gotchas\n\n- The element might be **hidden/inaccessible**, so `getByRole` won‚Äôt match unless you include hidden elements:\n  ```js\n  screen.getByRole('button', { name: /save/i, hidden: true })\n  ```\n  ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\n- The **role or accessible name** might not be what you think (Testing Library uses the accessibility tree). When `getByRole` throws, read the ‚ÄúHere are the available roles‚Äù section in the error to see what it *can* access. ([testing-library.com](https://testing-library.com/docs/queries/byrole?utm_source=openai))\n\nCitations:\n\n- 1: https://testing-library.com/docs/queries/about?utm_source=openai\n- 2: https://testing-library.com/docs/queries/about?utm_source=openai\n- 3: https://testing-library.com/docs/queries/about?utm_source=openai\n- 4: https://testing-library.com/docs/queries/byrole?utm_source=openai\n- 5: https://testing-library.com/docs/queries/byrole?utm_source=openai\n\n---\n\n\n\n</details>\n\n**Use `queryByRole` with proper fallback logic to prevent test failure when the element lacks `role=\"img\"`.**\n\nWhen `getByRole` doesn't find a match, it throws an error immediately‚Äîthe OR operator never evaluates the fallback selector. Use `queryByRole` (which returns `null` instead of throwing) or `findByRole` with proper fallback handling.\n\n<details>\n<summary>üîß Suggested fix</summary>\n\n```diff\nawait step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});\n```\n</details>\n\n<details>\n<summary>ü§ñ Prompt for AI Agents</summary>\n\n```\nIn\n`@src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts`\nat line 2, The test uses getByRole which throws if the element lacks role=\"img\",\ncausing brittle failures; update the test to use queryByRole (or findByRole with\nawait) and add proper fallback logic when querying the rendered container\nreturned by within (e.g., replace getByRole calls with\ncontainer.queryByRole('img') and assert null-safe behavior or fallback\nselectors), referencing the existing imports expect and within from\n'storybook/test' and any test helper names that call getByRole so the test no\nlonger throws when the role is absent.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:poseidon:eagle -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
          "createdAt": "2026-02-03T07:32:44Z",
          "type": "inline",
          "file": "src/components/display/SdTable/CellRenderers/PositionTrendCellRenderer/PositionTrendCellRenderer.stories.ts",
          "line": 2,
          "diffHunk": "@@ -1,30 +1,36 @@\n import type { Meta, StoryObj } from '@storybook/vue3-vite';\n+import { expect, within } from 'storybook/test';",
          "isResolved": false,
          "suggestion": "await step('Trend visualization renders within the canvas', async () => {\n-  await expect(canvas.getByRole('img') || canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]')).toBeTruthy();\n+  const img = canvas.queryByRole('img');\n+  const trendEl =\n+    img ?? canvasElement.querySelector('.sd-position-trends, [class*=\"position\"]');\n+  expect(trendEl).toBeTruthy();\n});"
        }
      ]
    }
  }
}